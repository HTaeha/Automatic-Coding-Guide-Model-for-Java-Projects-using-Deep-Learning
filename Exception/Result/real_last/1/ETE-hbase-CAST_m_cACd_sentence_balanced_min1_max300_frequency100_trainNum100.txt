Using TensorFlow backend.
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.
Instructions for updating:
Colocations handled automatically by placer.
WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/keras/backend/tensorflow_backend.py:3445: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.
Instructions for updating:
Please use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.
First data
zero :  10049
one :  10279

Second data
zero :  10049
one :  10279

Third data
zero :  10049
one :  10279

4th data
zero :  10049
one :  10279

hbase-code
After set document size of train data, the number of zero and one label data :  44 56
After set document size of test data, the number of zero and one label data :  10005 10223

Sentence length Average : 36

Under 10 : 4078
Over 10, Under 30 : 8257
Over 30, Under 100 : 6473
Over 100, Under 150 : 866
Over 150, Under 200 : 416
Over 200, Under 400 : 238
Over 400 : 0

After balance out data.
hbase-code

Sentence length Average : 36

Under 10 : 4078
Over 10, Under 30 : 8257
Over 30, Under 100 : 6473
Over 100, Under 150 : 866
Over 150, Under 200 : 416
Over 200, Under 400 : 238
Over 400 : 0

282
hbase-AST
After set document size of train data, the number of zero and one label data :  44 56
After set document size of test data, the number of zero and one label data :  10005 10223
After balance out data.
hbase-AST

Sentence length Average : 30

Under 10 : 7492
Over 10, Under 30 : 6294
Over 30, Under 100 : 5232
Over 100, Under 150 : 774
Over 150, Under 200 : 347
Over 200, Under 400 : 186
Over 400 : 3

621
hbase-CAST
After set document size of train data, the number of zero and one label data :  44 56
After set document size of test data, the number of zero and one label data :  10005 10223
After balance out data.
hbase-CAST

Sentence length Average : 58

Under 10 : 2623
Over 10, Under 30 : 6973
Over 30, Under 100 : 7189
Over 100, Under 150 : 1638
Over 150, Under 200 : 765
Over 200, Under 400 : 1052
Over 400 : 88

680
hbase-depth_num
After set document size of train data, the number of zero and one label data :  44 56
After set document size of test data, the number of zero and one label data :  10005 10223
After balance out data.
hbase-depth_num

Sentence length Average : 30

Under 10 : 7492
Over 10, Under 30 : 6294
Over 30, Under 100 : 5234
Over 100, Under 150 : 773
Over 150, Under 200 : 346
Over 200, Under 400 : 186
Over 400 : 3

621
Count model parameter.
Get a short summary of each layer dimensions and parameters.
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
input_1 (InputLayer)            (None, 282, 200)     0                                            
__________________________________________________________________________________________________
input_2 (InputLayer)            (None, 621, 200)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, 282, 200)     0           input_1[0][0]                    
__________________________________________________________________________________________________
masking_2 (Masking)             (None, 621, 200)     0           input_2[0][0]                    
__________________________________________________________________________________________________
input_3 (InputLayer)            (None, 680, 200)     0                                            
__________________________________________________________________________________________________
forwards_1 (LSTM)               (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
backwords_1 (LSTM)              (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
forwards_2 (LSTM)               (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
backwards_2 (LSTM)              (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
masking_3 (Masking)             (None, 680, 200)     0           input_3[0][0]                    
__________________________________________________________________________________________________
input_4 (InputLayer)            (None, 621, 200)     0                                            
__________________________________________________________________________________________________
after_dp_forward_1 (Dropout)    (None, 64)           0           forwards_1[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_1 (Dropout)   (None, 64)           0           backwords_1[0][0]                
__________________________________________________________________________________________________
after_dp_forward_2 (Dropout)    (None, 64)           0           forwards_2[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_2 (Dropout)   (None, 64)           0           backwards_2[0][0]                
__________________________________________________________________________________________________
forwards_3 (LSTM)               (None, 64)           67840       masking_3[0][0]                  
__________________________________________________________________________________________________
backwards_3 (LSTM)              (None, 64)           67840       masking_3[0][0]                  
__________________________________________________________________________________________________
masking_4 (Masking)             (None, 621, 200)     0           input_4[0][0]                    
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, 128)          0           after_dp_forward_1[0][0]         
                                                                 after_dp_backward_1[0][0]        
__________________________________________________________________________________________________
concatenate_2 (Concatenate)     (None, 128)          0           after_dp_forward_2[0][0]         
                                                                 after_dp_backward_2[0][0]        
__________________________________________________________________________________________________
after_dp_forward_3 (Dropout)    (None, 64)           0           forwards_3[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_3 (Dropout)   (None, 64)           0           backwards_3[0][0]                
__________________________________________________________________________________________________
forwards_4 (LSTM)               (None, 64)           67840       masking_4[0][0]                  
__________________________________________________________________________________________________
backwards_4 (LSTM)              (None, 64)           67840       masking_4[0][0]                  
__________________________________________________________________________________________________
after_dp_1 (Dropout)            (None, 128)          0           concatenate_1[0][0]              
__________________________________________________________________________________________________
after_dp_2 (Dropout)            (None, 128)          0           concatenate_2[0][0]              
__________________________________________________________________________________________________
concatenate_3 (Concatenate)     (None, 128)          0           after_dp_forward_3[0][0]         
                                                                 after_dp_backward_3[0][0]        
__________________________________________________________________________________________________
after_dp_forward_4 (Dropout)    (None, 64)           0           forwards_4[0][0]                 
__________________________________________________________________________________________________/home/2014313303/taeha/JavaAutoException/model.py:139: UserWarning: Update your `Model` call to the Keras 2 API: `Model(inputs=[<tf.Tenso..., outputs=Tensor("ou...)`
  model = Model(input=[input1, input2, input3, input4], output=output)
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/ops/math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.cast instead.
2019-10-10 15:11:57.086421: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-10-10 15:11:57.130679: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100005000 Hz
2019-10-10 15:11:57.133406: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0xc7808d0 executing computations on platform Host. Devices:
2019-10-10 15:11:57.133459: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>

after_dp_backward_4 (Dropout)   (None, 64)           0           backwards_4[0][0]                
__________________________________________________________________________________________________
concatenate_5 (Concatenate)     (None, 256)          0           after_dp_1[0][0]                 
                                                                 after_dp_2[0][0]                 
__________________________________________________________________________________________________
after_dp_3 (Dropout)            (None, 128)          0           concatenate_3[0][0]              
__________________________________________________________________________________________________
concatenate_4 (Concatenate)     (None, 128)          0           after_dp_forward_4[0][0]         
                                                                 after_dp_backward_4[0][0]        
__________________________________________________________________________________________________
concatenate_6 (Concatenate)     (None, 384)          0           concatenate_5[0][0]              
                                                                 after_dp_3[0][0]                 
__________________________________________________________________________________________________
after_dp_4 (Dropout)            (None, 128)          0           concatenate_4[0][0]              
__________________________________________________________________________________________________
concatenate_7 (Concatenate)     (None, 512)          0           concatenate_6[0][0]              
                                                                 after_dp_4[0][0]                 
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 384)          196992      concatenate_7[0][0]              
__________________________________________________________________________________________________
dense_2 (Dense)                 (None, 512)          197120      dense_1[0][0]                    
__________________________________________________________________________________________________
dense_3 (Dense)                 (None, 256)          131328      dense_2[0][0]                    
__________________________________________________________________________________________________
output (Dense)                  (None, 2)            514         dense_3[0][0]                    
==================================================================================================
Total params: 1,068,674
Trainable params: 1,068,674
Non-trainable params: 0
__________________________________________________________________________________________________
1

Epoch 1/1

 64/100 [==================>...........] - ETA: 6s - loss: 0.7038 - acc: 0.5000
100/100 [==============================] - 12s 123ms/step - loss: 0.7350 - acc: 0.5200

Test accuracy: 64.4502669566937

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  6764

choose_one :  13464

F1score :  0.6964157554776881

AUC :  0.7186795626934649

Confusion Matrix
[[4789 5216]
 [1975 8248]]
True label 0
0.4786606696651674  
0.5213393303348326  
True label 1
0.19319182236134208  
0.806808177638658  

Train_result {'loss': [0.734970965385437], 'acc': [0.5200000095367432]}
Saved model to disk


2

Epoch 1/1

 64/100 [==================>...........] - ETA: 1s - loss: 0.6461 - acc: 0.5938
100/100 [==============================] - 3s 29ms/step - loss: 0.6322 - acc: 0.6500

Test accuracy: 68.87977061498913

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  11310

choose_one :  8918

F1score :  0.6711248106159553

AUC :  0.7471021654388496

Confusion Matrix
[[7510 2495]
 [3800 6423]]
True label 0
0.750624687656172  
0.2493753123438281  
True label 1
0.3717108480876455  
0.6282891519123545  

Train_result {'loss': [0.6322110843658447], 'acc': [0.65]}
Saved model to disk


3

Epoch 1/1

 64/100 [==================>...........] - ETA: 1s - loss: 0.6211 - acc: 0.7188
100/100 [==============================] - 3s 31ms/step - loss: 0.6341 - acc: 0.6600

Test accuracy: 57.41052007118845

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  1944

choose_one :  18284

F1score :  0.6977935243975164

AUC :  0.7643956315884902

Confusion Matrix
[[1667 8338]
 [ 277 9946]]
True label 0
0.16661669165417292  
0.8333833083458271  
True label 1
0.027095764452704684  
0.9729042355472953  

Train_result {'loss': [0.6340612983703613], 'acc': [0.6600000095367432]}
Saved model to disk


4

Epoch 1/1

 64/100 [==================>...........] - ETA: 1s - loss: 0.5819 - acc: 0.6562
100/100 [==============================] - 3s 29ms/step - loss: 0.5778 - acc: 0.6900

Test accuracy: 69.13189638125371

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  11733

choose_one :  8495

F1score :  0.6664173522812266

AUC :  0.7608901701941753

Confusion Matrix
[[7747 2258]
 [3986 6237]]
True label 0
0.7743128435782108  
0.2256871564217891  
True label 1
0.3899051159150934  
0.6100948840849065  

Train_result {'loss': [0.5778363728523255], 'acc': [0.69]}
Saved model to disk


5

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5596 - acc: 0.7031
100/100 [==============================] - 3s 27ms/step - loss: 0.5563 - acc: 0.7200

Test accuracy: 67.77733834289104

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  7075

choose_one :  13153

F1score :  0.7211670088980151

AUC :  0.7655304060774073

Confusion Matrix
[[5281 4724]
 [1794 8429]]
True label 0
0.5278360819590205  
0.4721639180409795  
True label 1
0.17548664775506212  
0.8245133522449379  

Train_result {'loss': [0.5562664580345154], 'acc': [0.72]}
Saved model to disk


6

Epoch 1/1

 64/100 [==================>...........] - ETA: 1s - loss: 0.4488 - acc: 0.8281
100/100 [==============================] - 3s 29ms/step - loss: 0.4789 - acc: 0.8000

Test accuracy: 67.9503658295432

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  7196

choose_one :  13032

F1score :  0.721221242743496

AUC :  0.7663633359882712

Confusion Matrix
[[5359 4646]
 [1837 8386]]
True label 0
0.535632183908046  
0.46436781609195404  
True label 1
0.17969284945710653  
0.8203071505428935  

Train_result {'loss': [0.47885541200637816], 'acc': [0.8]}
Saved model to disk


7

Epoch 1/1

 64/100 [==================>...........] - ETA: 1s - loss: 0.4167 - acc: 0.7969
100/100 [==============================] - 3s 31ms/step - loss: 0.3903 - acc: 0.8300

Test accuracy: 70.10085030650583

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  10535

choose_one :  9693

F1score :  0.6963245631652942

AUC :  0.7659551179120409

Confusion Matrix
[[7246 2759]
 [3289 6934]]
True label 0
0.7242378810594703  
0.2757621189405297  
True label 1
0.3217255208842805  
0.6782744791157195  

Train_result {'loss': [0.39034221053123475], 'acc': [0.8300000023841858]}
Saved model to disk


8

Epoch 1/1

 64/100 [==================>...........] - ETA: 1s - loss: 0.4122 - acc: 0.8438
100/100 [==============================] - 3s 26ms/step - loss: 0.4273 - acc: 0.8000

Test accuracy: 67.4955507217718

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  7140

choose_one :  13088

F1score :  0.7179443181330702

AUC :  0.763789004451115

Confusion Matrix
[[5285 4720]
 [1855 8368]]
True label 0
0.5282358820589705  
0.47176411794102946  
True label 1
0.18145358505331116  
0.8185464149466889  

Train_result {'loss': [0.427268203496933], 'acc': [0.7999999952316285]}
Saved model to disk


9

Epoch 1/1

 64/100 [==================>...........] - ETA: 1s - loss: 0.3250 - acc: 0.8750
100/100 [==============================] - 3s 28ms/step - loss: 0.3545 - acc: 0.8500

Test accuracy: 69.05279810164129

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  11027

choose_one :  9201

F1score :  0.6777182866556838

AUC :  0.7584877961097706

Confusion Matrix
[[7386 2619]
 [3641 6582]]
True label 0
0.7382308845577211  
0.2617691154422789  
True label 1
0.35615768365450456  
0.6438423163454955  

Train_result {'loss': [0.3545016574859619], 'acc': [0.8500000095367432]}
Saved model to disk


10

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2969 - acc: 0.8750
100/100 [==============================] - 3s 26ms/step - loss: 0.2848 - acc: 0.8600

Test accuracy: 69.10223452639906

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  9871

choose_one :  10357

F1score :  0.6963070942662779

AUC :  0.7558313086438294

Confusion Matrix
[[6813 3192]
 [3058 7165]]
True label 0
0.68095952023988  
0.31904047976011995  
True label 1
0.29912941406632104  
0.700870585933679  

Train_result {'loss': [0.28482551097869874], 'acc': [0.8599999928474427]}
Saved model to disk


11

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2760 - acc: 0.8594
100/100 [==============================] - 3s 27ms/step - loss: 0.3212 - acc: 0.8500

Test accuracy: 68.43484279216926

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  10906

choose_one :  9322

F1score :  0.673317984139166

AUC :  0.7552518761650184

Confusion Matrix
[[7263 2742]
 [3643 6580]]
True label 0
0.7259370314842579  
0.27406296851574213  
True label 1
0.35635332094297173  
0.6436466790570282  

Train_result {'loss': [0.3211572253704071], 'acc': [0.8499999928474427]}
Saved model to disk


12

Epoch 1/1

 64/100 [==================>...........] - ETA: 1s - loss: 0.1361 - acc: 0.9375
100/100 [==============================] - 3s 29ms/step - loss: 0.2550 - acc: 0.8800

Test accuracy: 68.62764484872454

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  10753

choose_one :  9475

F1score :  0.6778353132297695

AUC :  0.7556265592137903

Confusion Matrix
[[7206 2799]
 [3547 6676]]
True label 0
0.72023988005997  
0.27976011994002997  
True label 1
0.346962731096547  
0.653037268903453  

Train_result {'loss': [0.25500688552856443], 'acc': [0.8800000047683716]}
Saved model to disk


13

Epoch 1/1

 64/100 [==================>...........] - ETA: 1s - loss: 0.2496 - acc: 0.9062
100/100 [==============================] - 3s 27ms/step - loss: 0.2500 - acc: 0.9000

Test accuracy: 69.44828949970339

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  8729

choose_one :  11499

F1score :  0.7154958106988306

AUC :  0.7569501808813875

Confusion Matrix
[[6277 3728]
 [2452 7771]]
True label 0
0.6273863068465767  
0.3726136931534233  
True label 1
0.23985131566076495  
0.7601486843392351  

Train_result {'loss': [0.24998351573944091], 'acc': [0.9000000023841858]}
Saved model to disk


14

Epoch 1/1

 64/100 [==================>...........] - ETA: 1s - loss: 0.1729 - acc: 0.9375
100/100 [==============================] - 3s 28ms/step - loss: 0.2107 - acc: 0.9300

Test accuracy: 67.18904488827367

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  11962

choose_one :  8266

F1score :  0.6410298015035968

AUC :  0.7543510207138434

Confusion Matrix
[[7665 2340]
 [4297 5926]]
True label 0
0.7661169415292354  
0.23388305847076463  
True label 1
0.4203267142717402  
0.5796732857282598  

Train_result {'loss': [0.2107144296169281], 'acc': [0.9300000071525574]}
Saved model to disk


15

Epoch 1/1

 64/100 [==================>...........] - ETA: 1s - loss: 0.2007 - acc: 0.9219
100/100 [==============================] - 3s 30ms/step - loss: 0.1721 - acc: 0.9400

Test accuracy: 68.9687561795531

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  10558

choose_one :  9670

F1score :  0.6844618710099029

AUC :  0.7576319343018504

Confusion Matrix
[[7143 2862]
 [3415 6808]]
True label 0
0.7139430284857571  
0.28605697151424286  
True label 1
0.334050670057713  
0.665949329942287  

Train_result {'loss': [0.1721189486980438], 'acc': [0.9399999952316285]}
Saved model to disk


[[64.4502669566937, 1], [68.87977061498913, 2], [57.41052007118845, 3], [69.13189638125371, 4], [67.77733834289104, 5], [67.9503658295432, 6], [70.10085030650583, 7], [67.4955507217718, 8], [69.05279810164129, 9], [69.10223452639906, 10], [68.43484279216926, 11], [68.62764484872454, 12], [69.44828949970339, 13], [67.18904488827367, 14], [68.9687561795531, 15]]
max accuracy :  [70.10085030650583, 7]
