Using TensorFlow backend.
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.
Instructions for updating:
Colocations handled automatically by placer.
WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/keras/backend/tensorflow_backend.py:3445: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.
Instructions for updating:
Please use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.
2019-09-18 15:19:24.331292: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-09-18 15:19:24.374481: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100005000 Hz
2019-09-18 15:19:24.381646: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0xa27c4c0 executing computations on platform Host. Devices:
2019-09-18 15:19:24.381716: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>
Standard data
zero :  7797
one :  7830

First data
zero :  7797
one :  7830

hbase-code
After set document size of train data, the number of zero and one label data :  7011 7054
After set document size of test data, the number of zero and one label data :  785 776

Sentence length Average : 87

Under 10 : 845
Over 10, Under 30 : 2490
Over 30, Under 100 : 7205
Over 100, Under 150 : 2501
Over 150, Under 200 : 1246
Over 200, Under 400 : 1336
Over 400 : 3

After balance out data.
hbase-code

Sentence length Average : 87

Under 10 : 845
Over 10, Under 30 : 2490
Over 30, Under 100 : 7205
Over 100, Under 150 : 2501
Over 150, Under 200 : 1246
Over 200, Under 400 : 1336
Over 400 : 3

Loaded model from disk
Count model parameter.
Get a short summary of each layer dimensions and parameters.
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
input_1 (InputLayer)            (None, 354, 200)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, 354, 200)     0           input_1[0][0]                    
__________________________________________________________________________________________________
lstm_1 (LSTM)                   (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
lstm_2 (LSTM)                   (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
dropout_1 (Dropout)             (None, 64)           0           lstm_1[0][0]                     
__________________________________________________________________________________________________
dropout_2 (Dropout)             (None, 64)           0           lstm_2[0][0]                     
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, 128)          0           dropout_1[0][0]                  
                                                                 dropout_2[0][0]                  
__________________________________________________________________________________________________
dropout_3 (Dropout)             (None, 128)          0           concatenate_1[0][0]              
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 2)            258         dropout_3[0][0]                  
==================================================================================================
Total params: 135,938
Trainable params: 135,938
Non-trainable params: 0
__________________________________________________________________________________________________
(1561, 354, 200)

0~10

Test accuracy: 87.0

data size :  14165

test data size :  100

zero :  7059

one :  7106

train_zero :  7011

train_one :  7054

test_zero :  48

test_one :  52

choose_zero :  39

choose_one :  61

F1score :  0.8849557522123893

AUC :  0.9146634615384616

Confusion Matrix
[[37 11]
 [ 2 50]]
True label 0
0.7708333333333334  
0.22916666666666666  
True label 1
0.038461538461538464  
0.9615384615384616  

10~20

Test accuracy: 71.12676056338029

data size :  14207

test data size :  142

zero :  7088

one :  7119

train_zero :  7011

train_one :  7054

test_zero :  77

test_one :  65

choose_zero :  64

choose_one :  78

F1score :  0.7132867132867133

AUC :  0.7834165834165835

Confusion Matrix
[[50 27]
 [14 51]]
True label 0
0.6493506493506493  
0.35064935064935066  
True label 1
0.2153846153846154  
0.7846153846153846  

20~30

Test accuracy: 71.42857142857143

data size :  14296

test data size :  231

zero :  7132

one :  7164

train_zero :  7011

train_one :  7054

test_zero :  121

test_one :  110

choose_zero :  99

choose_one :  132

F1score :  0.7272727272727272

AUC :  0.7996243425995493

Confusion Matrix
[[77 44]
 [22 88]]
True label 0
0.6363636363636364  
0.36363636363636365  
True label 1
0.2  
0.8  

30~40

Test accuracy: 81.28654970760235

data size :  14236

test data size :  171

zero :  7093

one :  7143

train_zero :  7011

train_one :  7054

test_zero :  82

test_one :  89

choose_zero :  80

choose_one :  91

F1score :  0.8222222222222223

AUC :  0.8853110441216772

Confusion Matrix
[[65 17]
 [15 74]]
True label 0
0.7926829268292683  
0.2073170731707317  
True label 1
0.16853932584269662  
0.8314606741573034  

40~50

Test accuracy: 73.17073170731707

data size :  14188

test data size :  123

zero :  7076

one :  7112

train_zero :  7011

train_one :  7054

test_zero :  65

test_one :  58

choose_zero :  70

choose_one :  53

F1score :  0.7027027027027026

AUC :  0.8278514588859417

Confusion Matrix
[[51 14]
 [19 39]]
True label 0
0.7846153846153846  
0.2153846153846154  
True label 1
0.3275862068965517  
0.6724137931034483  

50~60

Test accuracy: 67.15328467153284

data size :  14202

test data size :  137

zero :  7076

one :  7126

train_zero :  7011

train_one :  7054

test_zero :  65

test_one :  72

choose_zero :  74

choose_one :  63

F1score :  0.6666666666666666

AUC :  0.7705128205128204

Confusion Matrix
[[47 18]
 [27 45]]
True label 0
0.7230769230769231  
0.27692307692307694  
True label 1
0.375  
0.625  

60~70

Test accuracy: 73.50427350427351

data size :  14182

test data size :  117

zero :  7067

one :  7115

train_zero :  7011

train_one :  7054

test_zero :  56

test_one :  61

choose_zero :  65

choose_one :  52

F1score :  0.7256637168141593

AUC :  0.7912763466042154

Confusion Matrix
[[45 11]
 [20 41]]
True label 0
0.8035714285714286  
0.19642857142857142  
True label 1
0.32786885245901637  
0.6721311475409836  

70~80

Test accuracy: 74.44444444444444

data size :  14155

test data size :  90

zero :  7053

one :  7102

train_zero :  7011

train_one :  7054

test_zero :  42

test_one :  48

choose_zero :  49

choose_one :  41

F1score :  0.7415730337078651

AUC :  0.7867063492063492

Confusion Matrix
[[34  8]
 [15 33]]
True label 0
0.8095238095238095  
0.19047619047619047  
True label 1
0.3125  
0.6875  

80~90

Test accuracy: 77.33333333333333

data size :  14140

test data size :  75

zero :  7053

one :  7087

train_zero :  7011

train_one :  7054

test_zero :  42

test_one :  33

choose_zero :  47

choose_one :  28

F1score :  0.721311475409836

AUC :  0.8275613275613276

Confusion Matrix
[[36  6]
 [11 22]]
True label 0
0.8571428571428571  
0.14285714285714285  
True label 1
0.3333333333333333  
0.6666666666666666  

90~100

Test accuracy: 82.6086956521739

data size :  14134

test data size :  69

zero :  7044

one :  7090

train_zero :  7011

train_one :  7054

test_zero :  33

test_one :  36

choose_zero :  37

choose_one :  32

F1score :  0.823529411764706

AUC :  0.8661616161616161

Confusion Matrix
[[29  4]
 [ 8 28]]
True label 0
0.8787878787878788  
0.12121212121212122  
True label 1
0.2222222222222222  
0.7777777777777778  

100~110

Test accuracy: 76.0

data size :  14115

test data size :  50

zero :  7039

one :  7076

train_zero :  7011

train_one :  7054

test_zero :  28

test_one :  22

choose_zero :  26

choose_one :  24

F1score :  0.7391304347826088

AUC :  0.8425324675324675

Confusion Matrix
[[21  7]
 [ 5 17]]
True label 0
0.75  
0.25  
True label 1
0.22727272727272727  
0.7727272727272727  

110~120

Test accuracy: 66.66666666666666

data size :  14113

test data size :  48

zero :  7036

one :  7077

train_zero :  7011

train_one :  7054

test_zero :  25

test_one :  23

choose_zero :  29

choose_one :  19

F1score :  0.6190476190476191

AUC :  0.7165217391304347

Confusion Matrix
[[19  6]
 [10 13]]
True label 0
0.76  
0.24  
True label 1
0.43478260869565216  
0.5652173913043478  

120~130

Test accuracy: 71.42857142857143

data size :  14100

test data size :  35
/home/2014313303/.local/lib/python3.5/site-packages/sklearn/metrics/ranking.py:643: UndefinedMetricWarning: No negative samples in y_true, false positive value should be meaningless
  UndefinedMetricWarning)
/home/2014313303/.local/lib/python3.5/site-packages/sklearn/metrics/ranking.py:114: RuntimeWarning: invalid value encountered in less
  if np.any(dx < 0):
/home/2014313303/taeha/JavaAutoLogging/evaluation.py:50: RuntimeWarning: invalid value encountered in true_divide
  cm = cm.astype('float') / cm.sum(axis=1)[:, np.newaxis]
/home/2014313303/.local/lib/python3.5/site-packages/sklearn/metrics/classification.py:1145: UndefinedMetricWarning: F-score is ill-defined and being set to 0.0 due to no true samples.
  'recall', 'true', average, warn_for)
/home/2014313303/.local/lib/python3.5/site-packages/sklearn/metrics/ranking.py:651: UndefinedMetricWarning: No positive samples in y_true, true positive value should be meaningless
  UndefinedMetricWarning)
/home/2014313303/.local/lib/python3.5/site-packages/sklearn/metrics/classification.py:1143: UndefinedMetricWarning: F-score is ill-defined and being set to 0.0 due to no predicted samples.
  'precision', 'predicted', average, warn_for)

zero :  7032

one :  7068

train_zero :  7011

train_one :  7054

test_zero :  21

test_one :  14

choose_zero :  17

choose_one :  18

F1score :  0.6875000000000001

AUC :  0.836734693877551

Confusion Matrix
[[14  7]
 [ 3 11]]
True label 0
0.6666666666666666  
0.3333333333333333  
True label 1
0.21428571428571427  
0.7857142857142857  

130~140

Test accuracy: 86.36363636363636

data size :  14087

test data size :  22

zero :  7021

one :  7066

train_zero :  7011

train_one :  7054

test_zero :  10

test_one :  12

choose_zero :  11

choose_one :  11

F1score :  0.8695652173913043

AUC :  0.9333333333333333

Confusion Matrix
[[ 9  1]
 [ 2 10]]
True label 0
0.9  
0.1  
True label 1
0.16666666666666666  
0.8333333333333334  

140~150

Test accuracy: 78.94736842105263

data size :  14084

test data size :  19

zero :  7016

one :  7068

train_zero :  7011

train_one :  7054

test_zero :  5

test_one :  14

choose_zero :  5

choose_one :  14

F1score :  0.8571428571428571

AUC :  0.7714285714285715

Confusion Matrix
[[ 3  2]
 [ 2 12]]
True label 0
0.6  
0.4  
True label 1
0.14285714285714285  
0.8571428571428571  

150~160

Test accuracy: 77.77777777777779

data size :  14083

test data size :  18

zero :  7020

one :  7063

train_zero :  7011

train_one :  7054

test_zero :  9

test_one :  9

choose_zero :  9

choose_one :  9

F1score :  0.7777777777777778

AUC :  0.8518518518518519

Confusion Matrix
[[7 2]
 [2 7]]
True label 0
0.7777777777777778  
0.2222222222222222  
True label 1
0.2222222222222222  
0.7777777777777778  

160~170

Test accuracy: 78.26086956521739

data size :  14088

test data size :  23

zero :  7020

one :  7068

train_zero :  7011

train_one :  7054

test_zero :  9

test_one :  14

choose_zero :  8

choose_one :  15

F1score :  0.8275862068965518

AUC :  0.8412698412698413

Confusion Matrix
[[ 6  3]
 [ 2 12]]
True label 0
0.6666666666666666  
0.3333333333333333  
True label 1
0.14285714285714285  
0.8571428571428571  

170~180

Test accuracy: 55.55555555555556

data size :  14074

test data size :  9

zero :  7015

one :  7059

train_zero :  7011

train_one :  7054

test_zero :  4

test_one :  5

choose_zero :  4

choose_one :  5

F1score :  0.6

AUC :  0.75

Confusion Matrix
[[2 2]
 [2 3]]
True label 0
0.5  
0.5  
True label 1
0.4  
0.6  

180~190

Test accuracy: 64.28571428571429

data size :  14079

test data size :  14

zero :  7020

one :  7059

train_zero :  7011

train_one :  7054

test_zero :  9

test_one :  5

choose_zero :  8

choose_one :  6

F1score :  0.5454545454545454

AUC :  0.6444444444444445

Confusion Matrix
[[6 3]
 [2 3]]
True label 0
0.6666666666666666  
0.3333333333333333  
True label 1
0.4  
0.6  

190~200

Test accuracy: 77.77777777777779

data size :  14074

test data size :  9

zero :  7015

one :  7059

train_zero :  7011

train_one :  7054

test_zero :  4

test_one :  5

choose_zero :  4

choose_one :  5

F1score :  0.8000000000000002

AUC :  0.85

Confusion Matrix
[[3 1]
 [1 4]]
True label 0
0.75  
0.25  
True label 1
0.2  
0.8  

200~210

Test accuracy: 71.42857142857143

data size :  14072

test data size :  7

zero :  7015

one :  7057

train_zero :  7011

train_one :  7054

test_zero :  4

test_one :  3

choose_zero :  2

choose_one :  5

F1score :  0.7499999999999999

AUC :  0.5

Confusion Matrix
[[2 2]
 [0 3]]
True label 0
0.5  
0.5  
True label 1
0.0  
1.0  

210~220

Test accuracy: 60.0

data size :  14070

test data size :  5

zero :  7015

one :  7055

train_zero :  7011

train_one :  7054

test_zero :  4

test_one :  1

choose_zero :  2

choose_one :  3

F1score :  0.5

AUC :  0.75

Confusion Matrix
[[2 2]
 [0 1]]
True label 0
0.5  
0.5  
True label 1
0.0  
1.0  

220~230

Test accuracy: 42.857142857142854

data size :  14072

test data size :  7

zero :  7015

one :  7057

train_zero :  7011

train_one :  7054

test_zero :  4

test_one :  3

choose_zero :  6

choose_one :  1

F1score :  0.0

AUC :  0.75

Confusion Matrix
[[3 1]
 [3 0]]
True label 0
0.75  
0.25  
True label 1
1.0  
0.0  

230~240

Test accuracy: 87.5

data size :  14073

test data size :  8

zero :  7015

one :  7058

train_zero :  7011

train_one :  7054

test_zero :  4

test_one :  4

choose_zero :  3

choose_one :  5

F1score :  0.888888888888889

AUC :  0.9375

Confusion Matrix
[[3 1]
 [0 4]]
True label 0
0.75  
0.25  
True label 1
0.0  
1.0  

240~250

Test accuracy: 83.33333333333334

data size :  14071

test data size :  6

zero :  7013

one :  7058

train_zero :  7011

train_one :  7054

test_zero :  2

test_one :  4

choose_zero :  1

choose_one :  5

F1score :  0.888888888888889

AUC :  0.875

Confusion Matrix
[[1 1]
 [0 4]]
True label 0
0.5  
0.5  
True label 1
0.0  
1.0  

250~260

Test accuracy: 75.0

data size :  14073

test data size :  8

zero :  7014

one :  7059

train_zero :  7011

train_one :  7054

test_zero :  3

test_one :  5

choose_zero :  3

choose_one :  5

F1score :  0.8000000000000002

AUC :  0.8

Confusion Matrix
[[2 1]
 [1 4]]
True label 0
0.6666666666666666  
0.3333333333333333  
True label 1
0.2  
0.8  

260~270

Test accuracy: 80.0

data size :  14070

test data size :  5

zero :  7014

one :  7056

train_zero :  7011

train_one :  7054

test_zero :  3

test_one :  2

choose_zero :  4

choose_one :  1

F1score :  0.6666666666666666

AUC :  0.8333333333333334

Confusion Matrix
[[3 0]
 [1 1]]
True label 0
1.0  
0.0  
True label 1
0.5  
0.5  

270~280

Test accuracy: 33.33333333333333

data size :  14068

test data size :  3

zero :  7011

one :  7057

train_zero :  7011

train_one :  7054

test_zero :  0

test_one :  3

choose_zero :  2

choose_one :  1

F1score :  0.5

AUC :  nan

Confusion Matrix
[[0 0]
 [2 1]]
True label 0
nan  
nan  
True label 1
0.6666666666666666  
0.3333333333333333  

280~290

Test accuracy: 66.66666666666666

data size :  14068

test data size :  3

zero :  7013

one :  7055

train_zero :  7011

train_one :  7054

test_zero :  2

test_one :  1

choose_zero :  1

choose_one :  2

F1score :  0.6666666666666666

AUC :  0.5

Confusion Matrix
[[1 1]
 [0 1]]
True label 0
0.5  
0.5  
True label 1
0.0  
1.0  

290~300

300~310

Test accuracy: 50.0

data size :  14067

test data size :  2

zero :  7013

one :  7054

train_zero :  7011

train_one :  7054

test_zero :  2

test_one :  0

choose_zero :  1

choose_one :  1

F1score :  0.0

AUC :  nan

Confusion Matrix
[[1 1]
 [0 0]]
True label 0
0.5  
0.5  
True label 1
nan  
nan  

310~320

Test accuracy: 100.0

data size :  14066

test data size :  1

zero :  7011

one :  7055

train_zero :  7011

train_one :  7054

test_zero :  0

test_one :  1

choose_zero :  0

choose_one :  1

F1score :  1.0

AUC :  nan

Confusion Matrix
[[1]]
True label 0
1.0  
 

320~330

Test accuracy: 100.0

data size :  14066

test data size :  1

zero :  7012

one :  7054

train_zero :  7011

train_one :  7054

test_zero :  1

test_one :  0

choose_zero :  1

choose_one :  0

F1score :  0.0

AUC :  nan

Confusion Matrix
[[1]]
True label 0
1.0  
 

330~340

Test accuracy: 50.0

data size :  14067

test data size :  2

zero :  7012

one :  7055

train_zero :  7011

train_one :  7054

test_zero :  1

test_one :  1

choose_zero :  0

choose_one :  2

F1score :  0.6666666666666666

AUC :  1.0

Confusion Matrix
[[0 1]
 [0 1]]
True label 0
0.0  
1.0  
True label 1
0.0  
1.0  

340~350

Test accuracy: 0.0

data size :  14066

test data size :  1

zero :  7011

one :  7055

train_zero :  7011

train_one :  7054

test_zero :  0

test_one :  1

choose_zero :  1

choose_one :  0

F1score :  0.0

AUC :  nan

Confusion Matrix
[[0 0]
 [1 0]]
True label 0
nan  
nan  
True label 1
1.0  
0.0  

350~360

360~370

370~380

380~390

390~400

400~410
