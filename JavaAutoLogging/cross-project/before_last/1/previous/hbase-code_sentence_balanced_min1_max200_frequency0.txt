Using TensorFlow backend.
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.
Instructions for updating:
Colocations handled automatically by placer.
WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/keras/backend/tensorflow_backend.py:3445: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.
Instructions for updating:
Please use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.
2019-09-18 14:26:36.755334: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-09-18 14:26:36.764614: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100005000 Hz
2019-09-18 14:26:36.766608: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x949a340 executing computations on platform Host. Devices:
2019-09-18 14:26:36.766646: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>
Standard data
zero :  7189
one :  7122

First data
zero :  7189
one :  7122

hbase-code
After set document size of train data, the number of zero and one label data :  6474 6406
After set document size of test data, the number of zero and one label data :  714 716

Sentence length Average : 71

Under 10 : 845
Over 10, Under 30 : 2491
Over 30, Under 100 : 7205
Over 100, Under 150 : 2500
Over 150, Under 200 : 1246
Over 200, Under 400 : 23
Over 400 : 0

After balance out data.
hbase-code

Sentence length Average : 71

Under 10 : 845
Over 10, Under 30 : 2491
Over 30, Under 100 : 7205
Over 100, Under 150 : 2500
Over 150, Under 200 : 1246
Over 200, Under 400 : 23
Over 400 : 0

Loaded model from disk
Count model parameter.
Get a short summary of each layer dimensions and parameters.
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
input_1 (InputLayer)            (None, 185, 200)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, 185, 200)     0           input_1[0][0]                    
__________________________________________________________________________________________________
lstm_1 (LSTM)                   (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
lstm_2 (LSTM)                   (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
dropout_1 (Dropout)             (None, 64)           0           lstm_1[0][0]                     
__________________________________________________________________________________________________
dropout_2 (Dropout)             (None, 64)           0           lstm_2[0][0]                     
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, 128)          0           dropout_1[0][0]                  
                                                                 dropout_2[0][0]                  
__________________________________________________________________________________________________
dropout_3 (Dropout)             (None, 128)          0           concatenate_1[0][0]              
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 2)            258         dropout_3[0][0]                  
==================================================================================================
Total params: 135,938
Trainable params: 135,938
Non-trainable params: 0
__________________________________________________________________________________________________
(1430, 185, 200)

0~10

Test accuracy: 90.0

data size :  12980

test data size :  100

zero :  6527

one :  6453

train_zero :  6474

train_one :  6406

test_zero :  53

test_one :  47

choose_zero :  45

choose_one :  55

F1score :  0.9019607843137255

AUC :  0.9056603773584906

Confusion Matrix
[[44  9]
 [ 1 46]]
True label 0
0.8301886792452831  
0.16981132075471697  
True label 1
0.02127659574468085  
0.9787234042553191  

10~20

Test accuracy: 69.29133858267717

data size :  13007

test data size :  127

zero :  6539

one :  6468

train_zero :  6474

train_one :  6406

test_zero :  65

test_one :  62

choose_zero :  56

choose_one :  71

F1score :  0.706766917293233

AUC :  0.7665012406947891

Confusion Matrix
[[41 24]
 [15 47]]
True label 0
0.6307692307692307  
0.36923076923076925  
True label 1
0.24193548387096775  
0.7580645161290323  

20~30

Test accuracy: 71.91489361702128

data size :  13115

test data size :  235

zero :  6600

one :  6515

train_zero :  6474

train_one :  6406

test_zero :  126

test_one :  109

choose_zero :  112

choose_one :  123

F1score :  0.7155172413793104

AUC :  0.7812727537498181

Confusion Matrix
[[86 40]
 [26 83]]
True label 0
0.6825396825396826  
0.31746031746031744  
True label 1
0.23853211009174313  
0.7614678899082569  

30~40

Test accuracy: 71.9298245614035

data size :  13051

test data size :  171

zero :  6552

one :  6499

train_zero :  6474

train_one :  6406

test_zero :  78

test_one :  93

choose_zero :  80

choose_one :  91

F1score :  0.7391304347826086

AUC :  0.8015577612351806

Confusion Matrix
[[55 23]
 [25 68]]
True label 0
0.7051282051282052  
0.2948717948717949  
True label 1
0.26881720430107525  
0.7311827956989247  

40~50

Test accuracy: 80.50847457627118

data size :  12998

test data size :  118

zero :  6535

one :  6463

train_zero :  6474

train_one :  6406

test_zero :  61

test_one :  57

choose_zero :  68

choose_one :  50

F1score :  0.7850467289719626

AUC :  0.8150704630428531

Confusion Matrix
[[53  8]
 [15 42]]
True label 0
0.8688524590163934  
0.13114754098360656  
True label 1
0.2631578947368421  
0.7368421052631579  

50~60

Test accuracy: 72.48322147651007

data size :  13029

test data size :  149

zero :  6549

one :  6480

train_zero :  6474

train_one :  6406

test_zero :  75

test_one :  74

choose_zero :  70

choose_one :  79

F1score :  0.7320261437908496

AUC :  0.7618018018018018

Confusion Matrix
[[52 23]
 [18 56]]
True label 0
0.6933333333333334  
0.30666666666666664  
True label 1
0.24324324324324326  
0.7567567567567568  

60~70

Test accuracy: 71.15384615384616

data size :  12984

test data size :  104

zero :  6514

one :  6470

train_zero :  6474

train_one :  6406

test_zero :  40

test_one :  64

choose_zero :  54

choose_one :  50

F1score :  0.736842105263158

AUC :  0.7656250000000001

Confusion Matrix
[[32  8]
 [22 42]]
True label 0
0.8  
0.2  
True label 1
0.34375  
0.65625  

70~80

Test accuracy: 73.19587628865979

data size :  12977

test data size :  97

zero :  6523

one :  6454

train_zero :  6474

train_one :  6406

test_zero :  49

test_one :  48

choose_zero :  47

choose_one :  50

F1score :  0.7346938775510204

AUC :  0.7899659863945578

Confusion Matrix
[[35 14]
 [12 36]]
True label 0
0.7142857142857143  
0.2857142857142857  
True label 1
0.25  
0.75  

80~90

Test accuracy: 69.35483870967742

data size :  12942

test data size :  62

zero :  6504

one :  6438

train_zero :  6474

train_one :  6406

test_zero :  30

test_one :  32

choose_zero :  43

choose_one :  19

F1score :  0.6274509803921569

AUC :  0.8031250000000001

Confusion Matrix
[[27  3]
 [16 16]]
True label 0
0.9  
0.1  
True label 1
0.5  
0.5  

90~100

Test accuracy: 76.19047619047619

data size :  12943

test data size :  63

zero :  6506

one :  6437

train_zero :  6474

train_one :  6406

test_zero :  32

test_one :  31

choose_zero :  39

choose_one :  24

F1score :  0.7272727272727272

AUC :  0.878024193548387

Confusion Matrix
[[28  4]
 [11 20]]
True label 0
0.875  
0.125  
True label 1
0.3548387096774194  
0.6451612903225806  

100~110

Test accuracy: 72.0

data size :  12930

test data size :  50

zero :  6503

one :  6427

train_zero :  6474

train_one :  6406

test_zero :  29

test_one :  21

choose_zero :  31

choose_one :  19

F1score :  0.6500000000000001

AUC :  0.8637110016420361

Confusion Matrix
[[23  6]
 [ 8 13]]
True label 0
0.7931034482758621  
0.20689655172413793  
True label 1
0.38095238095238093  
0.6190476190476191  

110~120

Test accuracy: 67.44186046511628

data size :  12923

test data size :  43

zero :  6496

one :  6427

train_zero :  6474

train_one :  6406

test_zero :  22

test_one :  21

choose_zero :  24

choose_one :  19

F1score :  0.6500000000000001

AUC :  0.751082251082251

Confusion Matrix
[[16  6]
 [ 8 13]]
True label 0
0.7272727272727273  
0.2727272727272727  
True label 1
0.38095238095238093  
0.6190476190476191  

120~130

Test accuracy: 84.84848484848484

data size :  12913

test data size :  33

zero :  6495

one :  6418

train_zero :  6474

train_one :  6406

test_zero :  21

test_one :  12

choose_zero :  20

choose_one :  13

F1score :  0.8

AUC :  0.8928571428571428

Confusion Matrix
[[18  3]
 [ 2 10]]
True label 0
0.8571428571428571  
0.14285714285714285  
True label 1
0.16666666666666666  
0.8333333333333334  

130~140

Test accuracy: 70.37037037037037

data size :  12907

test data size :  27

zero :  6487

one :  6420

train_zero :  6474

train_one :  6406

test_zero :  13

test_one :  14

choose_zero :  11

choose_one :  16

F1score :  0.7333333333333334

AUC :  0.7417582417582418

Confusion Matrix
[[ 8  5]
 [ 3 11]]
True label 0
0.6153846153846154  
0.38461538461538464  
True label 1
0.21428571428571427  
0.7857142857142857  

140~150

Test accuracy: 85.71428571428571

data size :  12894

test data size :  14

zero :  6479

one :  6415

train_zero :  6474

train_one :  6406

test_zero :  5

test_one :  9

choose_zero :  7

choose_one :  7

F1score :  0.8750000000000001

AUC :  0.9555555555555555

Confusion Matrix
[[5 0]
 [2 7]]
True label 0
1.0  
0.0  
True label 1
0.2222222222222222  
0.7777777777777778  

150~160

Test accuracy: 83.33333333333334

data size :  12904

test data size :  24

zero :  6484

one :  6420

train_zero :  6474

train_one :  6406

test_zero :  10

test_one :  14

choose_zero :  12

choose_one :  12

F1score :  0.8461538461538461

AUC :  0.9071428571428571

Confusion Matrix
[[ 9  1]
 [ 3 11]]
True label 0
0.9  
0.1  
True label 1
0.21428571428571427  
0.7857142857142857  

160~170

Test accuracy: 50.0

data size :  12888

test data size :  8

zero :  6477

one :  6411

train_zero :  6474

train_one :  6406

test_zero :  3

test_one :  5

choose_zero :  3

choose_one :  5

F1score :  0.6

AUC :  0.6666666666666667

Confusion Matrix
[[1 2]
 [2 3]]
True label 0
0.3333333333333333  
0.6666666666666666  
True label 1
0.4  
0.6  

170~180

Test accuracy: 80.0

data size :  12885

test data size :  5

zero :  6476

one :  6409

train_zero :  6474

train_one :  6406

test_zero :  2

test_one :  3

choose_zero :  1

choose_one :  4

F1score :  0.8571428571428571

AUC :  0.8333333333333333

Confusion Matrix
[[1 1]
 [0 3]]
True label 0
0.5  
0.5  
True label 1
0.0  
1.0  

180~190

190~200

200~210

210~220

220~230

230~240

240~250

250~260

260~270

270~280

280~290

290~300

300~310

310~320

320~330

330~340

340~350

350~360

360~370

370~380

380~390

390~400

400~410
