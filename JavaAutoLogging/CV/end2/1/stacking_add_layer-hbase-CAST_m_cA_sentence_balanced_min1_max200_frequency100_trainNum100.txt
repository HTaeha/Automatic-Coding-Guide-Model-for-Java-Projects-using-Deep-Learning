Using TensorFlow backend.
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.
Instructions for updating:
Colocations handled automatically by placer.
WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/keras/backend/tensorflow_backend.py:3445: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.
Instructions for updating:
Please use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.
2019-10-17 04:53:41.818605: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-10-17 04:53:41.826617: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100005000 Hz
2019-10-17 04:53:41.829170: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x8801270 executing computations on platform Host. Devices:
2019-10-17 04:53:41.829198: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>
/home/2014313303/taeha/JavaAutoLogging/model.py:48: UserWarning: Update your `Model` call to the Keras 2 API: `Model(outputs=Tensor("ou..., inputs=[<tf.Tenso...)`
  model = Model(input=[input1, input2], output=output)
/usr/local/lib/python3.5/dist-packages/keras/engine/training.py:490: UserWarning: Discrepancy between trainable weights and collected trainable weights, did you set `model.trainable` without calling `model.compile` after ?
  'Discrepancy between trainable weights and collected trainable'
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/ops/math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.cast instead.
First data
zero :  9858
one :  9997

Second data
zero :  9858
one :  9997

hbase-code
After set document size of train data, the number of zero and one label data :  42 58
After set document size of test data, the number of zero and one label data :  9816 9939

Sentence length Average : 32

Under 10 : 4078
Over 10, Under 30 : 8257
Over 30, Under 100 : 6473
Over 100, Under 150 : 856
Over 150, Under 200 : 191
Over 200, Under 400 : 0
Over 400 : 0

After balance out data.
hbase-code

Sentence length Average : 32

Under 10 : 4078
Over 10, Under 30 : 8257
Over 30, Under 100 : 6473
Over 100, Under 150 : 856
Over 150, Under 200 : 191
Over 200, Under 400 : 0
Over 400 : 0

184
hbase-AST
After set document size of train data, the number of zero and one label data :  42 58
After set document size of test data, the number of zero and one label data :  9816 9939
After balance out data.
hbase-AST

Sentence length Average : 27

Under 10 : 7489
Over 10, Under 30 : 6290
Over 30, Under 100 : 5216
Over 100, Under 150 : 729
Over 150, Under 200 : 126
Over 200, Under 400 : 4
Over 400 : 1

431
Count model parameter.
Get a short summary of each layer dimensions and parameters.
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
input_1 (InputLayer)            (None, 184, 200)     0                                            
__________________________________________________________________________________________________
input_2 (InputLayer)            (None, 431, 200)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, 184, 200)     0           input_1[0][0]                    
__________________________________________________________________________________________________
masking_2 (Masking)             (None, 431, 200)     0           input_2[0][0]                    
__________________________________________________________________________________________________
forwards_1 (LSTM)               (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
backwords_1 (LSTM)              (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
forwards_2 (LSTM)               (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
backwards_2 (LSTM)              (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
after_dp_forward_1 (Dropout)    (None, 64)           0           forwards_1[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_1 (Dropout)   (None, 64)           0           backwords_1[0][0]                
__________________________________________________________________________________________________
after_dp_forward_2 (Dropout)    (None, 64)           0           forwards_2[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_2 (Dropout)   (None, 64)           0           backwards_2[0][0]                
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, 128)          0           after_dp_forward_1[0][0]         
                                                                 after_dp_backward_1[0][0]        
__________________________________________________________________________________________________
concatenate_2 (Concatenate)     (None, 128)          0           after_dp_forward_2[0][0]         
                                                                 after_dp_backward_2[0][0]        
__________________________________________________________________________________________________
after_dp_1 (Dropout)            (None, 128)          0           concatenate_1[0][0]              
__________________________________________________________________________________________________
after_dp_2 (Dropout)            (None, 128)          0           concatenate_2[0][0]              
__________________________________________________________________________________________________
concatenate_3 (Concatenate)     (None, 256)          0           after_dp_1[0][0]                 
                                                                 after_dp_2[0][0]                 
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 256)          65792       concatenate_3[0][0]              
__________________________________________________________________________________________________
dense_2 (Dense)                 (None, 128)          32896       dense_1[0][0]                    
__________________________________________________________________________________________________
dense_3 (Dense)                 (None, 64)           8256        dense_2[0][0]                    
__________________________________________________________________________________________________
dense_4_task_layer (Dense)      (None, 128)          8320        dense_3[0][0]                    
__________________________________________________________________________________________________
dense_5_task_layer (Dense)      (None, 64)           8256        dense_4_task_layer[0][0]         
__________________________________________________________________________________________________
output_task_layer (Dense)       (None, 2)            130         dense_5_task_layer[0][0]         
==================================================================================================
Total params: 773,314
Trainable params: 395,010
Non-trainable params: 378,304
__________________________________________________________________________________________________
1

Epoch 1/1

 64/100 [==================>...........] - ETA: 2s - loss: 0.8443 - acc: 0.2812
100/100 [==============================] - 4s 42ms/step - loss: 0.8526 - acc: 0.3300

Test accuracy: 61.89319159706403

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  13336

choose_one :  6419

F1score :  0.539797041203081

AUC :  0.6539277325999928

Confusion Matrix
[[7812 2004]
 [5524 4415]]
True label 0
0.7958435207823961  
0.2041564792176039  
True label 1
0.5557903209578429  
0.44420967904215714  

Train_result {'acc': [0.3299999964237213], 'loss': [0.8526202821731568]}
Saved model to disk


2

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.6814 - acc: 0.6406
100/100 [==============================] - 1s 10ms/step - loss: 0.6673 - acc: 0.6700

Test accuracy: 67.63857251328777

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  10433

choose_one :  9322

F1score :  0.6680857691708635

AUC :  0.7131327913639132

Confusion Matrix
[[6928 2888]
 [3505 6434]]
True label 0
0.7057864710676447  
0.29421352893235536  
True label 1
0.3526511721501157  
0.6473488278498843  

Train_result {'acc': [0.6699999952316285], 'loss': [0.6672926187515259]}
Saved model to disk


3

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5989 - acc: 0.7500
100/100 [==============================] - 1s 9ms/step - loss: 0.5939 - acc: 0.7100

Test accuracy: 68.1447734750696

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8309

choose_one :  11446

F1score :  0.7057283142389525

AUC :  0.7251348804315944

Confusion Matrix
[[5916 3900]
 [2393 7546]]
True label 0
0.6026894865525673  
0.3973105134474328  
True label 1
0.24076868900291779  
0.7592313109970822  

Train_result {'acc': [0.7100000023841858], 'loss': [0.5938596177101135]}
Saved model to disk


4

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5791 - acc: 0.7656
100/100 [==============================] - 1s 10ms/step - loss: 0.5461 - acc: 0.7600

Test accuracy: 68.52442419640597

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8044

choose_one :  11711

F1score :  0.7127944572748268

AUC :  0.7389785771855425

Confusion Matrix
[[5821 3995]
 [2223 7716]]
True label 0
0.5930114099429503  
0.40698859005704974  
True label 1
0.22366435255055842  
0.7763356474494416  

Train_result {'acc': [0.76], 'loss': [0.5460942840576172]}
Saved model to disk


5

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5202 - acc: 0.7188
100/100 [==============================] - 1s 10ms/step - loss: 0.4994 - acc: 0.7500

Test accuracy: 70.027841052898

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8833

choose_one :  10922

F1score :  0.7161689276640621

AUC :  0.7503946598701959

Confusion Matrix
[[6364 3452]
 [2469 7470]]
True label 0
0.6483292583537082  
0.35167074164629175  
True label 1
0.24841533353456083  
0.7515846664654392  

Train_result {'acc': [0.7500000095367432], 'loss': [0.49937925815582274]}
Saved model to disk


6

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4404 - acc: 0.7344
100/100 [==============================] - 1s 10ms/step - loss: 0.4022 - acc: 0.8100

Test accuracy: 70.37205770690964

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9587

choose_one :  10168

F1score :  0.7089073457005024

AUC :  0.7564550799403664

Confusion Matrix
[[6775 3041]
 [2812 7127]]
True label 0
0.69019967400163  
0.30980032599837  
True label 1
0.2829258476707918  
0.7170741523292081  

Train_result {'acc': [0.8099999904632569], 'loss': [0.4021912205219269]}
Saved model to disk


7

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4321 - acc: 0.8125
100/100 [==============================] - 1s 10ms/step - loss: 0.3946 - acc: 0.8400

Test accuracy: 70.54416603391547

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9913

choose_one :  9842

F1score :  0.7058288256407663

AUC :  0.7601433229250998

Confusion Matrix
[[6955 2861]
 [2958 6981]]
True label 0
0.7085370823145885  
0.29146291768541155  
True label 1
0.2976154542710534  
0.7023845457289466  

Train_result {'acc': [0.8400000023841858], 'loss': [0.3945944893360138]}
Saved model to disk


8

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2141 - acc: 0.9375
100/100 [==============================] - 1s 10ms/step - loss: 0.3450 - acc: 0.8700

Test accuracy: 70.5542900531511

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  10099

choose_one :  9656

F1score :  0.7031385557540188

AUC :  0.7626250107317227

Confusion Matrix
[[7049 2767]
 [3050 6889]]
True label 0
0.7181132844335778  
0.28188671556642214  
True label 1
0.30687191870409497  
0.693128081295905  

Train_result {'acc': [0.87], 'loss': [0.344959933757782]}
Saved model to disk


9

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1990 - acc: 0.9531
100/100 [==============================] - 1s 10ms/step - loss: 0.3212 - acc: 0.8800

Test accuracy: 70.42773981270565

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9896

choose_one :  9859

F1score :  0.7049196888574603

AUC :  0.7638590973397382

Confusion Matrix
[[6935 2881]
 [2961 6978]]
True label 0
0.7064995925020375  
0.2935004074979625  
True label 1
0.2979172955025656  
0.7020827044974344  

Train_result {'acc': [0.88], 'loss': [0.32123756647109986]}
Saved model to disk


10

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2165 - acc: 0.9062
100/100 [==============================] - 1s 10ms/step - loss: 0.2636 - acc: 0.8900

Test accuracy: 70.01771703366236

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9731

choose_one :  10024

F1score :  0.7033011070480389

AUC :  0.7626665436259799

Confusion Matrix
[[6812 3004]
 [2919 7020]]
True label 0
0.6939690301548492  
0.30603096984515077  
True label 1
0.2936915182613945  
0.7063084817386055  

Train_result {'acc': [0.8899999976158142], 'loss': [0.26358995914459227]}
Saved model to disk


11

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2877 - acc: 0.8906
100/100 [==============================] - 1s 10ms/step - loss: 0.2608 - acc: 0.8900

Test accuracy: 69.29891166793217

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9657

choose_one :  10098

F1score :  0.6973099765433947

AUC :  0.7589189327923971

Confusion Matrix
[[6704 3112]
 [2953 6986]]
True label 0
0.6829665851670742  
0.31703341483292585  
True label 1
0.29711238555186636  
0.7028876144481336  

Train_result {'acc': [0.8900000023841858], 'loss': [0.2607906895875931]}
Saved model to disk


12

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1879 - acc: 0.9219
100/100 [==============================] - 1s 10ms/step - loss: 0.1989 - acc: 0.9200

Test accuracy: 68.72184257150089

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9917

choose_one :  9838

F1score :  0.6875663649694089

AUC :  0.7548477046577439

Confusion Matrix
[[6777 3039]
 [3140 6799]]
True label 0
0.690403422982885  
0.3095965770171149  
True label 1
0.3159271556494617  
0.6840728443505383  

Train_result {'acc': [0.9200000071525574], 'loss': [0.19888897001743316]}
Saved model to disk


13

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1822 - acc: 0.9375
100/100 [==============================] - 1s 11ms/step - loss: 0.1831 - acc: 0.9200

Test accuracy: 68.41812199443179

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  10023

choose_one :  9732

F1score :  0.6828325962076153

AUC :  0.7499038296198498

Confusion Matrix
[[6800 3016]
 [3223 6716]]
True label 0
0.6927465362673186  
0.3072534637326813  
True label 1
0.3242780963879666  
0.6757219036120334  

Train_result {'acc': [0.9200000023841858], 'loss': [0.18305966794490813]}
Saved model to disk


14

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1713 - acc: 0.9062
100/100 [==============================] - 1s 9ms/step - loss: 0.1601 - acc: 0.9100

Test accuracy: 68.77246266767906

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9873

choose_one :  9882

F1score :  0.6887644417536956

AUC :  0.7488290839811522

Confusion Matrix
[[6760 3056]
 [3113 6826]]
True label 0
0.6886715566422168  
0.3113284433577832  
True label 1
0.3132105845658517  
0.6867894154341483  

Train_result {'acc': [0.9100000071525574], 'loss': [0.16013303577899932]}
Saved model to disk


15

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.0909 - acc: 0.9844
100/100 [==============================] - 1s 11ms/step - loss: 0.1815 - acc: 0.9400

Test accuracy: 68.87876486965325

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  10072

choose_one :  9683

F1score :  0.6866782183263683

AUC :  0.7494735869652475

Confusion Matrix
[[6870 2946]
 [3202 6737]]
True label 0
0.6998777506112469  
0.30012224938875304  
True label 1
0.322165207767381  
0.677834792232619  

Train_result {'acc': [0.9399999976158142], 'loss': [0.18148159027099608]}
Saved model to disk


[[61.89319159706403, 1], [67.63857251328777, 2], [68.1447734750696, 3], [68.52442419640597, 4], [70.027841052898, 5], [70.37205770690964, 6], [70.54416603391547, 7], [70.5542900531511, 8], [70.42773981270565, 9], [70.01771703366236, 10], [69.29891166793217, 11], [68.72184257150089, 12], [68.41812199443179, 13], [68.77246266767906, 14], [68.87876486965325, 15]]
max accuracy :  [70.5542900531511, 8]
