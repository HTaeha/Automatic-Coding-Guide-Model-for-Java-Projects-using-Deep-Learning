Using TensorFlow backend.
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.
Instructions for updating:
Colocations handled automatically by placer.
WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/keras/backend/tensorflow_backend.py:3445: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.
Instructions for updating:
Please use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.
2019-10-16 08:28:43.471018: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-10-16 08:28:43.483632: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100005000 Hz
2019-10-16 08:28:43.486131: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x755e870 executing computations on platform Host. Devices:
2019-10-16 08:28:43.486170: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>
/home/2014313303/taeha/JavaAutoLogging/model.py:47: UserWarning: Update your `Model` call to the Keras 2 API: `Model(outputs=Tensor("ou..., inputs=[<tf.Tenso...)`
  model = Model(input=[input1, input2], output=output)
/usr/local/lib/python3.5/dist-packages/keras/engine/training.py:490: UserWarning: Discrepancy between trainable weights and collected trainable weights, did you set `model.trainable` without calling `model.compile` after ?
  'Discrepancy between trainable weights and collected trainable'
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/ops/math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.cast instead.
First data
zero :  10792
one :  10820

Second data
zero :  10792
one :  10820

glassfish-code
After set document size of train data, the number of zero and one label data :  53 47
After set document size of test data, the number of zero and one label data :  10739 10773

Sentence length Average : 31

Under 10 : 5630
Over 10, Under 30 : 8221
Over 30, Under 100 : 6586
Over 100, Under 150 : 962
Over 150, Under 200 : 213
Over 200, Under 400 : 0
Over 400 : 0

After balance out data.
glassfish-code

Sentence length Average : 31

Under 10 : 5630
Over 10, Under 30 : 8221
Over 30, Under 100 : 6586
Over 100, Under 150 : 962
Over 150, Under 200 : 213
Over 200, Under 400 : 0
Over 400 : 0

174
glassfish-AST
After set document size of train data, the number of zero and one label data :  53 47
After set document size of test data, the number of zero and one label data :  10739 10773
After balance out data.
glassfish-AST

Sentence length Average : 27

Under 10 : 9172
Over 10, Under 30 : 5625
Over 30, Under 100 : 5826
Over 100, Under 150 : 821
Over 150, Under 200 : 164
Over 200, Under 400 : 4
Over 400 : 0

253
Count model parameter.
Get a short summary of each layer dimensions and parameters.
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
input_1 (InputLayer)            (None, 174, 200)     0                                            
__________________________________________________________________________________________________
input_2 (InputLayer)            (None, 253, 200)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, 174, 200)     0           input_1[0][0]                    
__________________________________________________________________________________________________
masking_2 (Masking)             (None, 253, 200)     0           input_2[0][0]                    
__________________________________________________________________________________________________
forwards_1 (LSTM)               (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
backwords_1 (LSTM)              (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
forwards_2 (LSTM)               (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
backwards_2 (LSTM)              (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
after_dp_forward_1 (Dropout)    (None, 64)           0           forwards_1[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_1 (Dropout)   (None, 64)           0           backwords_1[0][0]                
__________________________________________________________________________________________________
after_dp_forward_2 (Dropout)    (None, 64)           0           forwards_2[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_2 (Dropout)   (None, 64)           0           backwards_2[0][0]                
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, 128)          0           after_dp_forward_1[0][0]         
                                                                 after_dp_backward_1[0][0]        
__________________________________________________________________________________________________
concatenate_2 (Concatenate)     (None, 128)          0           after_dp_forward_2[0][0]         
                                                                 after_dp_backward_2[0][0]        
__________________________________________________________________________________________________
after_dp_1 (Dropout)            (None, 128)          0           concatenate_1[0][0]              
__________________________________________________________________________________________________
after_dp_2 (Dropout)            (None, 128)          0           concatenate_2[0][0]              
__________________________________________________________________________________________________
concatenate_3 (Concatenate)     (None, 256)          0           after_dp_1[0][0]                 
                                                                 after_dp_2[0][0]                 
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 256)          65792       concatenate_3[0][0]              
__________________________________________________________________________________________________
dense_2 (Dense)                 (None, 128)          32896       dense_1[0][0]                    
__________________________________________________________________________________________________
dense_3 (Dense)                 (None, 64)           8256        dense_2[0][0]                    
__________________________________________________________________________________________________
dense_4_task_layer (Dense)      (None, 32)           2080        dense_3[0][0]                    
__________________________________________________________________________________________________
output_task_layer (Dense)       (None, 2)            66          dense_4_task_layer[0][0]         
==================================================================================================
Total params: 758,754
Trainable params: 380,450
Non-trainable params: 378,304
__________________________________________________________________________________________________
1

Epoch 1/1

 64/100 [==================>...........] - ETA: 2s - loss: 0.6852 - acc: 0.5938
100/100 [==============================] - 4s 40ms/step - loss: 0.7027 - acc: 0.5500

Test accuracy: 53.825771662328

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  16272

choose_one :  5240

F1score :  0.37969150065571716

AUC :  0.5681714365132566

Confusion Matrix
[[8539 2200]
 [7733 3040]]
True label 0
0.7951392122171524  
0.20486078778284755  
True label 1
0.7178130511463845  
0.2821869488536155  

Train_result {'acc': [0.5499999952316285], 'loss': [0.7026554989814758]}
Saved model to disk


2

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.6433 - acc: 0.6250
100/100 [==============================] - 1s 7ms/step - loss: 0.6414 - acc: 0.6300

Test accuracy: 56.921718110821864

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  16004

choose_one :  5508

F1score :  0.4308089183711074

AUC :  0.6056457883974576

Confusion Matrix
[[8738 2001]
 [7266 3507]]
True label 0
0.81366980165751  
0.18633019834248998  
True label 1
0.6744639376218323  
0.3255360623781676  

Train_result {'acc': [0.6300000023841857], 'loss': [0.6413562107086181]}
Saved model to disk


3

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5579 - acc: 0.7656
100/100 [==============================] - 1s 6ms/step - loss: 0.6039 - acc: 0.7000

Test accuracy: 59.315730754927486

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  14509

choose_one :  7003

F1score :  0.5076507650765076

AUC :  0.6291630083302672

Confusion Matrix
[[8248 2491]
 [6261 4512]]
True label 0
0.7680417171058758  
0.2319582828941242  
True label 1
0.5811751601225286  
0.41882483987747143  

Train_result {'acc': [0.6999999928474426], 'loss': [0.6039000296592713]}
Saved model to disk


4

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5688 - acc: 0.7500
100/100 [==============================] - 1s 6ms/step - loss: 0.5525 - acc: 0.7700

Test accuracy: 60.13387876534028

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  13211

choose_one :  8301

F1score :  0.550382719932893

AUC :  0.6415412827212417

Confusion Matrix
[[7687 3052]
 [5524 5249]]
True label 0
0.7158022162212496  
0.2841977837787503  
True label 1
0.5127633899563724  
0.48723661004362756  

Train_result {'acc': [0.7700000095367432], 'loss': [0.5524754405021668]}
Saved model to disk


5

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5854 - acc: 0.7344
100/100 [==============================] - 1s 7ms/step - loss: 0.5193 - acc: 0.7900

Test accuracy: 61.063592413536625

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  11931

choose_one :  9581

F1score :  0.5884838361010122

AUC :  0.6514173021231242

Confusion Matrix
[[7147 3592]
 [4784 5989]]
True label 0
0.6655182046745507  
0.3344817953254493  
True label 1
0.44407314582753177  
0.5559268541724682  

Train_result {'acc': [0.7900000023841858], 'loss': [0.5192853116989136]}
Saved model to disk


6

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5039 - acc: 0.8125
100/100 [==============================] - 1s 6ms/step - loss: 0.4514 - acc: 0.8400

Test accuracy: 62.33265154332466

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  11388

choose_one :  10124

F1score :  0.6122409915298848

AUC :  0.6627030089839034

Confusion Matrix
[[7012 3727]
 [4376 6397]]
True label 0
0.652947201787876  
0.34705279821212404  
True label 1
0.40620068690244127  
0.5937993130975587  

Train_result {'acc': [0.8400000023841858], 'loss': [0.4513962483406067]}
Saved model to disk


7

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4117 - acc: 0.8281
100/100 [==============================] - 1s 7ms/step - loss: 0.4213 - acc: 0.8300

Test accuracy: 62.4256229081443

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  10862

choose_one :  10650

F1score :  0.6226952340941977

AUC :  0.6728148932477147

Confusion Matrix
[[6759 3980]
 [4103 6670]]
True label 0
0.6293882111928485  
0.3706117888071515  
True label 1
0.38085955629815277  
0.6191404437018472  

Train_result {'acc': [0.8299999928474426], 'loss': [0.42127389192581177]}
Saved model to disk


8

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3303 - acc: 0.9219
100/100 [==============================] - 1s 6ms/step - loss: 0.3714 - acc: 0.8700

Test accuracy: 63.42041651171439

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  10738

choose_one :  10774

F1score :  0.6347983477978373

AUC :  0.6814790577890477

Confusion Matrix
[[6804 3935]
 [3934 6839]]
True label 0
0.6335785454884068  
0.36642145451159325  
True label 1
0.3651721897335932  
0.6348278102664068  

Train_result {'acc': [0.8700000047683716], 'loss': [0.3713744759559631]}
Saved model to disk


9

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3854 - acc: 0.8750
100/100 [==============================] - 1s 7ms/step - loss: 0.3354 - acc: 0.9000

Test accuracy: 64.32688731870584

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  10511

choose_one :  11001

F1score :  0.6475613116561035

AUC :  0.6894403342372133

Confusion Matrix
[[6788 3951]
 [3723 7050]]
True label 0
0.6320886488499861  
0.36791135115001394  
True label 1
0.34558618769145083  
0.6544138123085491  

Train_result {'acc': [0.8999999904632568], 'loss': [0.3353560334444046]}
Saved model to disk


10

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2719 - acc: 0.8906
100/100 [==============================] - 1s 7ms/step - loss: 0.2706 - acc: 0.8900

Test accuracy: 65.17757530680551

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  10872

choose_one :  10640

F1score :  0.6501657871386541

AUC :  0.6939776437883843

Confusion Matrix
[[7060 3679]
 [3812 6961]]
True label 0
0.6574168917031381  
0.3425831082968619  
True label 1
0.35384758191775734  
0.6461524180822427  

Train_result {'acc': [0.8900000023841858], 'loss': [0.2705793988704681]}
Saved model to disk


11

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3130 - acc: 0.8750
100/100 [==============================] - 1s 6ms/step - loss: 0.2831 - acc: 0.8900

Test accuracy: 65.3821123094087

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  10512

choose_one :  11000

F1score :  0.6579708813668305

AUC :  0.6982542205634623

Confusion Matrix
[[6902 3837]
 [3610 7163]]
True label 0
0.6427041623987336  
0.35729583760126643  
True label 1
0.3350970017636684  
0.6649029982363316  

Train_result {'acc': [0.8900000071525573], 'loss': [0.28314787030220034]}
Saved model to disk


12

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2115 - acc: 0.9219
100/100 [==============================] - 1s 7ms/step - loss: 0.2304 - acc: 0.9200

Test accuracy: 65.40535515061362

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  10155

choose_one :  11357

F1score :  0.6637144148215093

AUC :  0.7027152970353928

Confusion Matrix
[[6726 4013]
 [3429 7344]]
True label 0
0.6263152993761057  
0.3736847006238942  
True label 1
0.3182957393483709  
0.681704260651629  

Train_result {'acc': [0.9200000071525574], 'loss': [0.23039571523666383]}
Saved model to disk


13

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1795 - acc: 0.9219
100/100 [==============================] - 1s 6ms/step - loss: 0.2192 - acc: 0.9200

Test accuracy: 64.5965042766828

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  9009

choose_one :  12503

F1score :  0.6727960130606634

AUC :  0.7059169480643597

Confusion Matrix
[[6066 4673]
 [2943 7830]]
True label 0
0.5648570630412515  
0.4351429369587485  
True label 1
0.2731829573934837  
0.7268170426065163  

Train_result {'acc': [0.9200000071525574], 'loss': [0.2192326021194458]}
Saved model to disk


14

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1933 - acc: 0.9375
100/100 [==============================] - 1s 7ms/step - loss: 0.1913 - acc: 0.9400

Test accuracy: 64.69877277798439

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  8831

choose_one :  12681

F1score :  0.6762172763707683

AUC :  0.7070586766170824

Confusion Matrix
[[5988 4751]
 [2843 7930]]
True label 0
0.5575938169289506  
0.44240618307104945  
True label 1
0.2639004919706674  
0.7360995080293325  

Train_result {'acc': [0.9399999904632569], 'loss': [0.1912803852558136]}
Saved model to disk


15

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1352 - acc: 0.9688
100/100 [==============================] - 1s 6ms/step - loss: 0.1526 - acc: 0.9600

Test accuracy: 65.46113796950539

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  9519

choose_one :  11993

F1score :  0.6736361240446279

AUC :  0.7073229230557088

Confusion Matrix
[[6414 4325]
 [3105 7668]]
True label 0
0.597262314926902  
0.40273768507309804  
True label 1
0.2882205513784461  
0.7117794486215538  

Train_result {'acc': [0.9599999904632568], 'loss': [0.15256784439086915]}
Saved model to disk


[[53.825771662328, 1], [56.921718110821864, 2], [59.315730754927486, 3], [60.13387876534028, 4], [61.063592413536625, 5], [62.33265154332466, 6], [62.4256229081443, 7], [63.42041651171439, 8], [64.32688731870584, 9], [65.17757530680551, 10], [65.3821123094087, 11], [65.40535515061362, 12], [64.5965042766828, 13], [64.69877277798439, 14], [65.46113796950539, 15]]
max accuracy :  [65.46113796950539, 15]
