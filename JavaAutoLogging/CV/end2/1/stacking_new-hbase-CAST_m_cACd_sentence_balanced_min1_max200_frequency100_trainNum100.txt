Using TensorFlow backend.
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.
Instructions for updating:
Colocations handled automatically by placer.
WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/keras/backend/tensorflow_backend.py:3445: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.
Instructions for updating:
Please use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.
2019-10-16 05:57:34.443286: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-10-16 05:57:34.457831: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100005000 Hz
2019-10-16 05:57:34.474739: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0xa620b50 executing computations on platform Host. Devices:
2019-10-16 05:57:34.474768: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>
First data
zero :  9858
one :  9997

Second data
zero :  9858
one :  9997

Third data
zero :  9858
one :  9997

4th data
zero :  9858
one :  9997

hbase-code
After set document size of train data, the number of zero and one label data :  42 58
After set document size of test data, the number of zero and one label data :  9816 9939

Sentence length Average : 32

Under 10 : 4078
Over 10, Under 30 : 8257
Over 30, Under 100 : 6473
Over 100, Under 150 : 856
Over 150, Under 200 : 191
Over 200, Under 400 : 0
Over 400 : 0

After balance out data.
hbase-code

Sentence length Average : 32

Under 10 : 4078
Over 10, Under 30 : 8257
Over 30, Under 100 : 6473
Over 100, Under 150 : 856
Over 150, Under 200 : 191
Over 200, Under 400 : 0
Over 400 : 0

188
hbase-AST
After set document size of train data, the number of zero and one label data :  42 58
After set document size of test data, the number of zero and one label data :  9816 9939
After balance out data.
hbase-AST

Sentence length Average : 27

Under 10 : 7489
Over 10, Under 30 : 6290
Over 30, Under 100 : 5216
Over 100, Under 150 : 729
Over 150, Under 200 : 126
Over 200, Under 400 : 4
Over 400 : 1

431
hbase-CAST
After set document size of train data, the number of zero and one label data :  42 58
After set document size of test data, the number of zero and one label data :  9816 9939
After balance out data.
hbase-CAST

Sentence length Average : 52

Under 10 : 2622
Over 10, Under 30 : 6971
Over 30, Under 100 : 7184
Over 100, Under 150 : 1632
Over 150, Under 200 : 757
Over 200, Under 400 : 688
Over 400 : 1

631
hbase-depth_num
After set document size of train data, the number of zero and one label data :  42 58
After set document size of test data, the number of zero and one label data :  9816 9939
After balance out data.
hbase-depth_num

Sentence length Average : 27

Under 10 : 7489
Over 10, Under 30 : 6290
Over 30, Under 100 : 5218
Over 100, Under 150 : 727
Over 150, Under 200 : 126
Over 200, Under 400 : 4
Over 400 : 1

431
Count model parameter.
Get a short summary of each layer dimensions and parameters.
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
input_1 (InputLayer)            (None, 188, 200)     0                                            
__________________________________________________________________________________________________
input_2 (InputLayer)            (None, 431, 200)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, 188, 200)     0           input_1[0][0]                    
__________________________________________________________________________________________________
masking_2 (Masking)             (None, 431, 200)     0           input_2[0][0]                    
__________________________________________________________________________________________________
input_3 (InputLayer)            (None, 631, 200)     0                                            
__________________________________________________________________________________________________
forwards_1 (LSTM)               (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
backwords_1 (LSTM)              (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
forwards_2 (LSTM)               (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
backwards_2 (LSTM)              (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
masking_3 (Masking)             (None, 631, 200)     0           input_3[0][0]                    
__________________________________________________________________________________________________
input_4 (InputLayer)            (None, 431, 200)     0                                            
__________________________________________________________________________________________________
after_dp_forward_1 (Dropout)    (None, 64)           0           forwards_1[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_1 (Dropout)   (None, 64)           0           backwords_1[0][0]                
__________________________________________________________________________________________________
after_dp_forward_2 (Dropout)    (None, 64)           0           forwards_2[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_2 (Dropout)   (None, 64)           0           backwards_2[0][0]                
__________________________________________________________________________________________________
forwards_3 (LSTM)               (None, 64)           67840       masking_3[0][0]                  
__________________________________________________________________________________________________
backwards_3 (LSTM)              (None, 64)           67840       masking_3[0][0]                  
__________________________________________________________________________________________________
masking_4 (Masking)             (None, 431, 200)     0           input_4[0][0]                    
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, 128)          0           after_dp_forward_1[0][0]         
                                                                 after_dp_backward_1[0][0]        
__________________________________________________________________________________________________
concatenate_2 (Concatenate)     (None, 128)          0           after_dp_forward_2[0][0]         
                                                                 after_dp_backward_2[0][0]        
__________________________________________________________________________________________________
after_dp_forward_3 (Dropout)    (None, 64)           0           forwards_3[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_3 (Dropout)   (None, 64)           0           backwards_3[0][0]                
__________________________________________________________________________________________________
forwards_4 (LSTM)               (None, 64)           67840       masking_4[0][0]                  
__________________________________________________________________________________________________
backwards_4 (LSTM)              (None, 64)           67840       masking_4[0][0]                  
__________________________________________________________________________________________________
after_dp_1 (Dropout)            (None, 128)          0           concatenate_1[0][0]              
__________________________________________________________________________________________________
after_dp_2 (Dropout)            (None, 128)          0           concatenate_2[0][0]              
__________________________________________________________________________________________________
concatenate_3 (Concatenate)     (None, 128)          0           after_dp_forward_3[0][0]         
                                                                 after_dp_backward_3[0][0]        
__________________________________________________________________________________________________
after_dp_forward_4 (Dropout)    (None, 64)           0           forwards_4[0][0]                 
__________________________________________________________________________________________________/home/2014313303/taeha/JavaAutoLogging/model.py:149: UserWarning: Update your `Model` call to the Keras 2 API: `Model(inputs=[<tf.Tenso..., outputs=Tensor("ou...)`
  model = Model(input=[input1, input2, input3, input4], output=output)
/usr/local/lib/python3.5/dist-packages/keras/engine/training.py:490: UserWarning: Discrepancy between trainable weights and collected trainable weights, did you set `model.trainable` without calling `model.compile` after ?
  'Discrepancy between trainable weights and collected trainable'
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/ops/math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.cast instead.

after_dp_backward_4 (Dropout)   (None, 64)           0           backwards_4[0][0]                
__________________________________________________________________________________________________
concatenate_5 (Concatenate)     (None, 256)          0           after_dp_1[0][0]                 
                                                                 after_dp_2[0][0]                 
__________________________________________________________________________________________________
after_dp_3 (Dropout)            (None, 128)          0           concatenate_3[0][0]              
__________________________________________________________________________________________________
concatenate_4 (Concatenate)     (None, 128)          0           after_dp_forward_4[0][0]         
                                                                 after_dp_backward_4[0][0]        
__________________________________________________________________________________________________
concatenate_6 (Concatenate)     (None, 384)          0           concatenate_5[0][0]              
                                                                 after_dp_3[0][0]                 
__________________________________________________________________________________________________
after_dp_4 (Dropout)            (None, 128)          0           concatenate_4[0][0]              
__________________________________________________________________________________________________
concatenate_7 (Concatenate)     (None, 512)          0           concatenate_6[0][0]              
                                                                 after_dp_4[0][0]                 
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 512)          262656      concatenate_7[0][0]              
__________________________________________________________________________________________________
dense_2 (Dense)                 (None, 768)          393984      dense_1[0][0]                    
__________________________________________________________________________________________________
dense_3 (Dense)                 (None, 512)          393728      dense_2[0][0]                    
__________________________________________________________________________________________________
dense_4 (Dense)                 (None, 256)          131328      dense_3[0][0]                    
__________________________________________________________________________________________________
dense_5 (Dense)                 (None, 128)          32896       dense_4[0][0]                    
__________________________________________________________________________________________________
dense_6_task_layer (Dense)      (None, 64)           8256        dense_5[0][0]                    
__________________________________________________________________________________________________
output_task_layer (Dense)       (None, 2)            130         dense_6_task_layer[0][0]         
==================================================================================================
Total params: 3,523,010
Trainable params: 1,765,698
Non-trainable params: 1,757,312
__________________________________________________________________________________________________
1

Epoch 1/1

 64/100 [==================>...........] - ETA: 5s - loss: 1.3394 - acc: 0.5312
100/100 [==============================] - 11s 107ms/step - loss: 1.1379 - acc: 0.5800

Test accuracy: 50.31131359149582

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  0

choose_one :  19755

F1score :  0.6694281673065265

AUC :  0.6190770064549416

Confusion Matrix
[[   0 9816]
 [   0 9939]]
True label 0
0.0  
1.0  
True label 1
0.0  
1.0  

Train_result {'loss': [1.1379144859313965], 'acc': [0.5800000071525574]}
Saved model to disk


2

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.6967 - acc: 0.5156
100/100 [==============================] - 2s 25ms/step - loss: 0.6859 - acc: 0.5800

Test accuracy: 50.33662363958491

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  1153

choose_one :  18602

F1score :  0.6562489050839144

AUC :  0.6803087310589707

Confusion Matrix
[[ 579 9237]
 [ 574 9365]]
True label 0
0.058985330073349634  
0.9410146699266504  
True label 1
0.0577522889626723  
0.9422477110373277  

Train_result {'loss': [0.6859189033508301], 'acc': [0.5799999904632568]}
Saved model to disk


3

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.6313 - acc: 0.5156
100/100 [==============================] - 2s 25ms/step - loss: 0.6120 - acc: 0.5700

Test accuracy: 61.3009364717793

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  5703

choose_one :  14052

F1score :  0.6813388353966071

AUC :  0.6961805440243348

Confusion Matrix
[[3937 5879]
 [1766 8173]]
True label 0
0.401079869600652  
0.598920130399348  
True label 1
0.17768387161686286  
0.8223161283831372  

Train_result {'loss': [0.6119998168945312], 'acc': [0.5700000071525574]}
Saved model to disk


4

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.6099 - acc: 0.6719
100/100 [==============================] - 2s 24ms/step - loss: 0.5788 - acc: 0.6600

Test accuracy: 65.3454821564161

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8294

choose_one :  11461

F1score :  0.6800934579439252

AUC :  0.6962196220498422

Confusion Matrix
[[5632 4184]
 [2662 7277]]
True label 0
0.5737571312143439  
0.4262428687856561  
True label 1
0.2678337860951806  
0.7321662139048194  

Train_result {'loss': [0.5787587761878967], 'acc': [0.6600000023841858]}
Saved model to disk


5

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5498 - acc: 0.6406
100/100 [==============================] - 2s 23ms/step - loss: 0.5677 - acc: 0.6600

Test accuracy: 67.33485193621867

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8577

choose_one :  11178

F1score :  0.6944168205711039

AUC :  0.7158470357034471

Confusion Matrix
[[5970 3846]
 [2607 7332]]
True label 0
0.6081907090464548  
0.3918092909535452  
True label 1
0.2623000301841232  
0.7376999698158768  

Train_result {'loss': [0.5677485299110413], 'acc': [0.6599999904632569]}
Saved model to disk


6

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5308 - acc: 0.7188
100/100 [==============================] - 2s 22ms/step - loss: 0.5441 - acc: 0.7000

Test accuracy: 68.22070361933687

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  7784

choose_one :  11971

F1score :  0.7134641716111365

AUC :  0.7372613785575303

Confusion Matrix
[[5661 4155]
 [2123 7816]]
True label 0
0.5767114914425427  
0.4232885085574572  
True label 1
0.2136029781668176  
0.7863970218331824  

Train_result {'loss': [0.5440501475334167], 'acc': [0.7000000071525574]}
Saved model to disk


7

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5132 - acc: 0.8125
100/100 [==============================] - 2s 24ms/step - loss: 0.5091 - acc: 0.7600

Test accuracy: 69.1419893697798

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8076

choose_one :  11679

F1score :  0.7180127671384957

AUC :  0.7466044860199785

Confusion Matrix
[[5898 3918]
 [2178 7761]]
True label 0
0.6008557457212714  
0.3991442542787286  
True label 1
0.21913673407787504  
0.780863265922125  

Train_result {'loss': [0.5090606260299683], 'acc': [0.7600000071525573]}
Saved model to disk


8

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3982 - acc: 0.8438
100/100 [==============================] - 2s 24ms/step - loss: 0.4521 - acc: 0.8300

Test accuracy: 69.72918248544671

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8586

choose_one :  11169

F1score :  0.7166950919082812

AUC :  0.7514459023187328

Confusion Matrix
[[6211 3605]
 [2375 7564]]
True label 0
0.6327424612876935  
0.36725753871230643  
True label 1
0.23895764161384445  
0.7610423583861555  

Train_result {'loss': [0.4521388268470764], 'acc': [0.8300000095367431]}
Saved model to disk


9

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4578 - acc: 0.7969
100/100 [==============================] - 2s 23ms/step - loss: 0.4614 - acc: 0.8200

Test accuracy: 69.972158947102

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8906

choose_one :  10849

F1score :  0.7146430633057533

AUC :  0.7533427368643919

Confusion Matrix
[[6395 3421]
 [2511 7428]]
True label 0
0.6514873675631622  
0.34851263243683783  
True label 1
0.252641110775732  
0.7473588892242681  

Train_result {'loss': [0.46141006708145144], 'acc': [0.8199999976158142]}
Saved model to disk


10

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5087 - acc: 0.7812
100/100 [==============================] - 2s 22ms/step - loss: 0.4288 - acc: 0.8400

Test accuracy: 70.16451531257908

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9278

choose_one :  10477

F1score :  0.7113048589341693

AUC :  0.7585064123426742

Confusion Matrix
[[6600 3216]
 [2678 7261]]
True label 0
0.6723716381418093  
0.3276283618581907  
True label 1
0.2694436059965791  
0.7305563940034209  

Train_result {'loss': [0.42881430506706236], 'acc': [0.8399999904632568]}
Saved model to disk


11

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4366 - acc: 0.8281
100/100 [==============================] - 2s 22ms/step - loss: 0.4148 - acc: 0.8800

Test accuracy: 70.38218172614528

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9389

choose_one :  10366

F1score :  0.7118443733070671

AUC :  0.7630591945012909

Confusion Matrix
[[6677 3139]
 [2712 7227]]
True label 0
0.6802159739201304  
0.3197840260798696  
True label 1
0.272864473287051  
0.727135526712949  

Train_result {'loss': [0.4147594630718231], 'acc': [0.8799999952316284]}
Saved model to disk


12

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3702 - acc: 0.8750
100/100 [==============================] - 2s 23ms/step - loss: 0.3712 - acc: 0.8900

Test accuracy: 70.49354593773728

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9485

choose_one :  10270

F1score :  0.711564154584591

AUC :  0.7658158942327333

Confusion Matrix
[[6736 3080]
 [2749 7190]]
True label 0
0.6862265688671557  
0.31377343113284434  
True label 1
0.27658718180903513  
0.7234128181909649  

Train_result {'loss': [0.3712045681476593], 'acc': [0.8900000071525573]}
Saved model to disk


13

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3616 - acc: 0.8906
100/100 [==============================] - 2s 22ms/step - loss: 0.3587 - acc: 0.9100

Test accuracy: 70.7466464186282

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9835

choose_one :  9920

F1score :  0.7089984389949141

AUC :  0.7675471660749151

Confusion Matrix
[[6936 2880]
 [2899 7040]]
True label 0
0.706601466992665  
0.293398533007335  
True label 1
0.29167924338464635  
0.7083207566153537  

Train_result {'loss': [0.3586814439296722], 'acc': [0.9099999904632569]}
Saved model to disk


14

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3300 - acc: 0.8906
100/100 [==============================] - 2s 21ms/step - loss: 0.3119 - acc: 0.9100

Test accuracy: 70.44798785117692

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9984

choose_one :  9771

F1score :  0.7038051750380518

AUC :  0.7708281519715251

Confusion Matrix
[[6981 2835]
 [3003 6936]]
True label 0
0.7111858190709046  
0.28881418092909533  
True label 1
0.3021430727437368  
0.6978569272562632  

Train_result {'loss': [0.31193549036979673], 'acc': [0.9099999904632569]}
Saved model to disk


15

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2707 - acc: 0.9219
100/100 [==============================] - 2s 24ms/step - loss: 0.2957 - acc: 0.9100

Test accuracy: 70.46317388003037

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  10011

choose_one :  9744

F1score :  0.7035512879134279

AUC :  0.7733955295599818

Confusion Matrix
[[6996 2820]
 [3015 6924]]
True label 0
0.7127139364303179  
0.28728606356968217  
True label 1
0.3033504376697857  
0.6966495623302144  

Train_result {'loss': [0.29570122122764586], 'acc': [0.9100000023841858]}
Saved model to disk


[[50.31131359149582, 1], [50.33662363958491, 2], [61.3009364717793, 3], [65.3454821564161, 4], [67.33485193621867, 5], [68.22070361933687, 6], [69.1419893697798, 7], [69.72918248544671, 8], [69.972158947102, 9], [70.16451531257908, 10], [70.38218172614528, 11], [70.49354593773728, 12], [70.7466464186282, 13], [70.44798785117692, 14], [70.46317388003037, 15]]
max accuracy :  [70.7466464186282, 13]
