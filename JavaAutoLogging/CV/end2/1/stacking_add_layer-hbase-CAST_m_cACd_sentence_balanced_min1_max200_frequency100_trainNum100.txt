Using TensorFlow backend.
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.
Instructions for updating:
Colocations handled automatically by placer.
WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/keras/backend/tensorflow_backend.py:3445: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.
Instructions for updating:
Please use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.
2019-10-17 03:40:48.792737: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-10-17 03:40:48.952236: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100005000 Hz
2019-10-17 03:40:48.964527: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0xb2db820 executing computations on platform Host. Devices:
2019-10-17 03:40:48.964562: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>
First data
zero :  9858
one :  9997

Second data
zero :  9858
one :  9997

Third data
zero :  9858
one :  9997

4th data
zero :  9858
one :  9997

hbase-code
After set document size of train data, the number of zero and one label data :  42 58
After set document size of test data, the number of zero and one label data :  9816 9939

Sentence length Average : 32

Under 10 : 4078
Over 10, Under 30 : 8257
Over 30, Under 100 : 6473
Over 100, Under 150 : 856
Over 150, Under 200 : 191
Over 200, Under 400 : 0
Over 400 : 0

After balance out data.
hbase-code

Sentence length Average : 32

Under 10 : 4078
Over 10, Under 30 : 8257
Over 30, Under 100 : 6473
Over 100, Under 150 : 856
Over 150, Under 200 : 191
Over 200, Under 400 : 0
Over 400 : 0

188
hbase-AST
After set document size of train data, the number of zero and one label data :  42 58
After set document size of test data, the number of zero and one label data :  9816 9939
After balance out data.
hbase-AST

Sentence length Average : 27

Under 10 : 7489
Over 10, Under 30 : 6290
Over 30, Under 100 : 5216
Over 100, Under 150 : 729
Over 150, Under 200 : 126
Over 200, Under 400 : 4
Over 400 : 1

431
hbase-CAST
After set document size of train data, the number of zero and one label data :  42 58
After set document size of test data, the number of zero and one label data :  9816 9939
After balance out data.
hbase-CAST

Sentence length Average : 52

Under 10 : 2622
Over 10, Under 30 : 6971
Over 30, Under 100 : 7184
Over 100, Under 150 : 1632
Over 150, Under 200 : 757
Over 200, Under 400 : 688
Over 400 : 1

631
hbase-depth_num
After set document size of train data, the number of zero and one label data :  42 58
After set document size of test data, the number of zero and one label data :  9816 9939
After balance out data.
hbase-depth_num

Sentence length Average : 27

Under 10 : 7489
Over 10, Under 30 : 6290
Over 30, Under 100 : 5218
Over 100, Under 150 : 727
Over 150, Under 200 : 126
Over 200, Under 400 : 4
Over 400 : 1

431
Count model parameter.
Get a short summary of each layer dimensions and parameters.
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
input_1 (InputLayer)            (None, 188, 200)     0                                            
__________________________________________________________________________________________________
input_2 (InputLayer)            (None, 431, 200)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, 188, 200)     0           input_1[0][0]                    
__________________________________________________________________________________________________
masking_2 (Masking)             (None, 431, 200)     0           input_2[0][0]                    
__________________________________________________________________________________________________
input_3 (InputLayer)            (None, 631, 200)     0                                            
__________________________________________________________________________________________________
forwards_1 (LSTM)               (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
backwords_1 (LSTM)              (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
forwards_2 (LSTM)               (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
backwards_2 (LSTM)              (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
masking_3 (Masking)             (None, 631, 200)     0           input_3[0][0]                    
__________________________________________________________________________________________________
input_4 (InputLayer)            (None, 431, 200)     0                                            
__________________________________________________________________________________________________
after_dp_forward_1 (Dropout)    (None, 64)           0           forwards_1[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_1 (Dropout)   (None, 64)           0           backwords_1[0][0]                
__________________________________________________________________________________________________
after_dp_forward_2 (Dropout)    (None, 64)           0           forwards_2[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_2 (Dropout)   (None, 64)           0           backwards_2[0][0]                
__________________________________________________________________________________________________
forwards_3 (LSTM)               (None, 64)           67840       masking_3[0][0]                  
__________________________________________________________________________________________________
backwards_3 (LSTM)              (None, 64)           67840       masking_3[0][0]                  
__________________________________________________________________________________________________
masking_4 (Masking)             (None, 431, 200)     0           input_4[0][0]                    
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, 128)          0           after_dp_forward_1[0][0]         
                                                                 after_dp_backward_1[0][0]        
__________________________________________________________________________________________________
concatenate_2 (Concatenate)     (None, 128)          0           after_dp_forward_2[0][0]         
                                                                 after_dp_backward_2[0][0]        
__________________________________________________________________________________________________
after_dp_forward_3 (Dropout)    (None, 64)           0           forwards_3[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_3 (Dropout)   (None, 64)           0           backwards_3[0][0]                
__________________________________________________________________________________________________
forwards_4 (LSTM)               (None, 64)           67840       masking_4[0][0]                  
__________________________________________________________________________________________________
backwards_4 (LSTM)              (None, 64)           67840       masking_4[0][0]                  
__________________________________________________________________________________________________
after_dp_1 (Dropout)            (None, 128)          0           concatenate_1[0][0]              
__________________________________________________________________________________________________
after_dp_2 (Dropout)            (None, 128)          0           concatenate_2[0][0]              
__________________________________________________________________________________________________
concatenate_3 (Concatenate)     (None, 128)          0           after_dp_forward_3[0][0]         
                                                                 after_dp_backward_3[0][0]        
__________________________________________________________________________________________________
after_dp_forward_4 (Dropout)    (None, 64)           0           forwards_4[0][0]                 
__________________________________________________________________________________________________/home/2014313303/taeha/JavaAutoLogging/model.py:152: UserWarning: Update your `Model` call to the Keras 2 API: `Model(inputs=[<tf.Tenso..., outputs=Tensor("ou...)`
  model = Model(input=[input1, input2, input3, input4], output=output)
/usr/local/lib/python3.5/dist-packages/keras/engine/training.py:490: UserWarning: Discrepancy between trainable weights and collected trainable weights, did you set `model.trainable` without calling `model.compile` after ?
  'Discrepancy between trainable weights and collected trainable'
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/ops/math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.cast instead.

after_dp_backward_4 (Dropout)   (None, 64)           0           backwards_4[0][0]                
__________________________________________________________________________________________________
concatenate_5 (Concatenate)     (None, 256)          0           after_dp_1[0][0]                 
                                                                 after_dp_2[0][0]                 
__________________________________________________________________________________________________
after_dp_3 (Dropout)            (None, 128)          0           concatenate_3[0][0]              
__________________________________________________________________________________________________
concatenate_4 (Concatenate)     (None, 128)          0           after_dp_forward_4[0][0]         
                                                                 after_dp_backward_4[0][0]        
__________________________________________________________________________________________________
concatenate_6 (Concatenate)     (None, 384)          0           concatenate_5[0][0]              
                                                                 after_dp_3[0][0]                 
__________________________________________________________________________________________________
after_dp_4 (Dropout)            (None, 128)          0           concatenate_4[0][0]              
__________________________________________________________________________________________________
concatenate_7 (Concatenate)     (None, 512)          0           concatenate_6[0][0]              
                                                                 after_dp_4[0][0]                 
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 512)          262656      concatenate_7[0][0]              
__________________________________________________________________________________________________
dense_2 (Dense)                 (None, 768)          393984      dense_1[0][0]                    
__________________________________________________________________________________________________
dense_3 (Dense)                 (None, 512)          393728      dense_2[0][0]                    
__________________________________________________________________________________________________
dense_4 (Dense)                 (None, 256)          131328      dense_3[0][0]                    
__________________________________________________________________________________________________
dense_5 (Dense)                 (None, 128)          32896       dense_4[0][0]                    
__________________________________________________________________________________________________
dense_6_task_layer (Dense)      (None, 256)          33024       dense_5[0][0]                    
__________________________________________________________________________________________________
dense_7_task_layer (Dense)      (None, 128)          32896       dense_6_task_layer[0][0]         
__________________________________________________________________________________________________
output_task_layer (Dense)       (None, 2)            258         dense_7_task_layer[0][0]         
==================================================================================================
Total params: 3,580,802
Trainable params: 1,823,490
Non-trainable params: 1,757,312
__________________________________________________________________________________________________
1

Epoch 1/1

 64/100 [==================>...........] - ETA: 5s - loss: 0.7174 - acc: 0.5781
100/100 [==============================] - 11s 106ms/step - loss: 0.6748 - acc: 0.6500

Test accuracy: 65.7858769931663

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  11571

choose_one :  8184

F1score :  0.6270485019036584

AUC :  0.6796597129613708

Confusion Matrix
[[7314 2502]
 [4257 5682]]
True label 0
0.7451100244498777  
0.25488997555012227  
True label 1
0.42831270751584666  
0.5716872924841533  

Train_result {'loss': [0.6748076200485229], 'acc': [0.6500000047683716]}
Saved model to disk


2

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5959 - acc: 0.7031
100/100 [==============================] - 2s 22ms/step - loss: 0.6786 - acc: 0.6400

Test accuracy: 67.07668944570995

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  10574

choose_one :  9181

F1score :  0.6598326359832636

AUC :  0.6976513230297315

Confusion Matrix
[[6943 2873]
 [3631 6308]]
True label 0
0.7073145884270579  
0.29268541157294214  
True label 1
0.36532850387362914  
0.6346714961263709  

Train_result {'loss': [0.6786422562599183], 'acc': [0.6400000047683716]}
Saved model to disk


3

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5140 - acc: 0.7500
100/100 [==============================] - 2s 22ms/step - loss: 0.5218 - acc: 0.7300

Test accuracy: 50.31131359149582

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  0

choose_one :  19755

F1score :  0.6694281673065265

AUC :  0.7394982406124794

Confusion Matrix
[[   0 9816]
 [   0 9939]]
True label 0
0.0  
1.0  
True label 1
0.0  
1.0  

Train_result {'loss': [0.5217585754394531], 'acc': [0.7299999904632568]}
Saved model to disk


4

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5512 - acc: 0.5625
100/100 [==============================] - 2s 23ms/step - loss: 0.5114 - acc: 0.5800

Test accuracy: 50.31131359149582

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  0

choose_one :  19755

F1score :  0.6694281673065265

AUC :  0.7321556410567378

Confusion Matrix
[[   0 9816]
 [   0 9939]]
True label 0
0.0  
1.0  
True label 1
0.0  
1.0  

Train_result {'loss': [0.5114184522628784], 'acc': [0.5799999976158142]}
Saved model to disk


5

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4770 - acc: 0.6094
100/100 [==============================] - 2s 23ms/step - loss: 0.4706 - acc: 0.5800

Test accuracy: 70.48848392811946

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8180

choose_one :  11575

F1score :  0.7290136655201264

AUC :  0.7613137520701871

Confusion Matrix
[[6083 3733]
 [2097 7842]]
True label 0
0.6197025264873676  
0.38029747351263243  
True label 1
0.21098702082704499  
0.789012979172955  

Train_result {'loss': [0.47056305408477783], 'acc': [0.5800000047683715]}
Saved model to disk


6

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4006 - acc: 0.8438
100/100 [==============================] - 2s 22ms/step - loss: 0.4347 - acc: 0.8200

Test accuracy: 69.70387243735763

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9377

choose_one :  10378

F1score :  0.7054191071516464

AUC :  0.7506844061325019

Confusion Matrix
[[6604 3212]
 [2773 7166]]
True label 0
0.6727791361043195  
0.3272208638956805  
True label 1
0.2790019116611329  
0.7209980883388671  

Train_result {'loss': [0.4347346341609955], 'acc': [0.8200000047683715]}
Saved model to disk


7

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4288 - acc: 0.8438
100/100 [==============================] - 2s 22ms/step - loss: 0.3990 - acc: 0.8400

Test accuracy: 70.18476335105038

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  10178

choose_one :  9577

F1score :  0.6981963517114163

AUC :  0.7535263907718092

Confusion Matrix
[[7052 2764]
 [3126 6813]]
True label 0
0.7184189079054605  
0.2815810920945395  
True label 1
0.314518563235738  
0.685481436764262  

Train_result {'loss': [0.3990228116512299], 'acc': [0.8399999928474426]}
Saved model to disk


8

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2576 - acc: 0.9062
100/100 [==============================] - 2s 21ms/step - loss: 0.3105 - acc: 0.8800

Test accuracy: 70.64540622627183

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  11043

choose_one :  8712

F1score :  0.6890783336014155

AUC :  0.7589366191223678

Confusion Matrix
[[7530 2286]
 [3513 6426]]
True label 0
0.7671149144254279  
0.23288508557457213  
True label 1
0.353456082100815  
0.6465439178991851  

Train_result {'loss': [0.3105274283885956], 'acc': [0.8799999928474427]}
Saved model to disk


9

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2981 - acc: 0.8906
100/100 [==============================] - 2s 23ms/step - loss: 0.3182 - acc: 0.8700

Test accuracy: 70.43280182232347

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  11919

choose_one :  7836

F1score :  0.6713924050632911

AUC :  0.7638136694553975

Confusion Matrix
[[7947 1869]
 [3972 5967]]
True label 0
0.809596577017115  
0.1904034229828851  
True label 1
0.39963779052218534  
0.6003622094778147  

Train_result {'loss': [0.31817566871643066], 'acc': [0.8699999928474427]}
Saved model to disk


10

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3560 - acc: 0.8125
100/100 [==============================] - 2s 23ms/step - loss: 0.2873 - acc: 0.8600

Test accuracy: 70.35180966843836

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  12145

choose_one :  7610

F1score :  0.6662487891047923

AUC :  0.7667997892277365

Confusion Matrix
[[8052 1764]
 [4093 5846]]
True label 0
0.8202933985330073  
0.17970660146699266  
True label 1
0.41181205352651173  
0.5881879464734883  

Train_result {'loss': [0.2872503525018692], 'acc': [0.8599999904632568]}
Saved model to disk


11

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2977 - acc: 0.8594
100/100 [==============================] - 2s 23ms/step - loss: 0.2604 - acc: 0.8600

Test accuracy: 70.54416603391547

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  12091

choose_one :  7664

F1score :  0.6694313469295007

AUC :  0.7683317298274159

Confusion Matrix
[[8044 1772]
 [4047 5892]]
True label 0
0.819478402607987  
0.18052159739201304  
True label 1
0.4071838213099909  
0.592816178690009  

Train_result {'loss': [0.2604252707958221], 'acc': [0.8599999976158142]}
Saved model to disk


12

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2579 - acc: 0.8594
100/100 [==============================] - 2s 22ms/step - loss: 0.2049 - acc: 0.8900

Test accuracy: 70.57960010124019

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  11804

choose_one :  7951

F1score :  0.6751257685858021

AUC :  0.7690518212440631

Confusion Matrix
[[7904 1912]
 [3900 6039]]
True label 0
0.8052159739201304  
0.1947840260798696  
True label 1
0.39239360096589193  
0.6076063990341081  

Train_result {'loss': [0.20492224037647247], 'acc': [0.8899999904632568]}
Saved model to disk


13

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1368 - acc: 0.9219
100/100 [==============================] - 2s 22ms/step - loss: 0.1695 - acc: 0.9200

Test accuracy: 70.5542900531511

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  11735

choose_one :  8020

F1score :  0.6760955509772258

AUC :  0.769107314602777

Confusion Matrix
[[7867 1949]
 [3868 6071]]
True label 0
0.8014466177669112  
0.19855338223308883  
True label 1
0.3891739611630949  
0.6108260388369051  

Train_result {'loss': [0.16953981637954713], 'acc': [0.9200000071525574]}
Saved model to disk


14

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1646 - acc: 0.9219
100/100 [==============================] - 2s 22ms/step - loss: 0.1497 - acc: 0.9300

Test accuracy: 70.3872437357631

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  11596

choose_one :  8159

F1score :  0.6767598629682837

AUC :  0.7687440965275303

Confusion Matrix
[[7781 2035]
 [3815 6124]]
True label 0
0.7926854115729421  
0.20731458842705786  
True label 1
0.3838414327397122  
0.6161585672602877  

Train_result {'loss': [0.14971077859401702], 'acc': [0.9299999904632569]}
Saved model to disk


15

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1127 - acc: 0.9531
100/100 [==============================] - 2s 21ms/step - loss: 0.1362 - acc: 0.9300

Test accuracy: 70.1898253606682

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  11543

choose_one :  8212

F1score :  0.6755550658365931

AUC :  0.7677081316650969

Confusion Matrix
[[7735 2081]
 [3808 6131]]
True label 0
0.787999185004075  
0.21200081499592502  
True label 1
0.38313713653285036  
0.6168628634671496  

Train_result {'loss': [0.13615893423557282], 'acc': [0.9300000023841858]}
Saved model to disk


[[65.7858769931663, 1], [67.07668944570995, 2], [50.31131359149582, 3], [50.31131359149582, 4], [70.48848392811946, 5], [69.70387243735763, 6], [70.18476335105038, 7], [70.64540622627183, 8], [70.43280182232347, 9], [70.35180966843836, 10], [70.54416603391547, 11], [70.57960010124019, 12], [70.5542900531511, 13], [70.3872437357631, 14], [70.1898253606682, 15]]
max accuracy :  [70.64540622627183, 8]
