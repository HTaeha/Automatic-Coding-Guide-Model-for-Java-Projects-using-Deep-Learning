Using TensorFlow backend.
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.
Instructions for updating:
Colocations handled automatically by placer.
WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/keras/backend/tensorflow_backend.py:3445: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.
Instructions for updating:
Please use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.
2019-10-17 06:02:27.855985: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-10-17 06:02:27.865881: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100005000 Hz
2019-10-17 06:02:27.868877: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x774f0c0 executing computations on platform Host. Devices:
2019-10-17 06:02:27.868922: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>
/home/2014313303/taeha/JavaAutoLogging/model.py:48: UserWarning: Update your `Model` call to the Keras 2 API: `Model(inputs=[<tf.Tenso..., outputs=Tensor("ou...)`
  model = Model(input=[input1, input2], output=output)
/usr/local/lib/python3.5/dist-packages/keras/engine/training.py:490: UserWarning: Discrepancy between trainable weights and collected trainable weights, did you set `model.trainable` without calling `model.compile` after ?
  'Discrepancy between trainable weights and collected trainable'
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/ops/math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.cast instead.
First data
zero :  10792
one :  10820

Second data
zero :  10792
one :  10820

glassfish-code
After set document size of train data, the number of zero and one label data :  53 47
After set document size of test data, the number of zero and one label data :  10739 10773

Sentence length Average : 31

Under 10 : 5630
Over 10, Under 30 : 8221
Over 30, Under 100 : 6586
Over 100, Under 150 : 962
Over 150, Under 200 : 213
Over 200, Under 400 : 0
Over 400 : 0

After balance out data.
glassfish-code

Sentence length Average : 31

Under 10 : 5630
Over 10, Under 30 : 8221
Over 30, Under 100 : 6586
Over 100, Under 150 : 962
Over 150, Under 200 : 213
Over 200, Under 400 : 0
Over 400 : 0

174
glassfish-AST
After set document size of train data, the number of zero and one label data :  53 47
After set document size of test data, the number of zero and one label data :  10739 10773
After balance out data.
glassfish-AST

Sentence length Average : 27

Under 10 : 9172
Over 10, Under 30 : 5625
Over 30, Under 100 : 5826
Over 100, Under 150 : 821
Over 150, Under 200 : 164
Over 200, Under 400 : 4
Over 400 : 0

253
Count model parameter.
Get a short summary of each layer dimensions and parameters.
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
input_1 (InputLayer)            (None, 174, 200)     0                                            
__________________________________________________________________________________________________
input_2 (InputLayer)            (None, 253, 200)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, 174, 200)     0           input_1[0][0]                    
__________________________________________________________________________________________________
masking_2 (Masking)             (None, 253, 200)     0           input_2[0][0]                    
__________________________________________________________________________________________________
forwards_1 (LSTM)               (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
backwords_1 (LSTM)              (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
forwards_2 (LSTM)               (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
backwards_2 (LSTM)              (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
after_dp_forward_1 (Dropout)    (None, 64)           0           forwards_1[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_1 (Dropout)   (None, 64)           0           backwords_1[0][0]                
__________________________________________________________________________________________________
after_dp_forward_2 (Dropout)    (None, 64)           0           forwards_2[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_2 (Dropout)   (None, 64)           0           backwards_2[0][0]                
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, 128)          0           after_dp_forward_1[0][0]         
                                                                 after_dp_backward_1[0][0]        
__________________________________________________________________________________________________
concatenate_2 (Concatenate)     (None, 128)          0           after_dp_forward_2[0][0]         
                                                                 after_dp_backward_2[0][0]        
__________________________________________________________________________________________________
after_dp_1 (Dropout)            (None, 128)          0           concatenate_1[0][0]              
__________________________________________________________________________________________________
after_dp_2 (Dropout)            (None, 128)          0           concatenate_2[0][0]              
__________________________________________________________________________________________________
concatenate_3 (Concatenate)     (None, 256)          0           after_dp_1[0][0]                 
                                                                 after_dp_2[0][0]                 
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 256)          65792       concatenate_3[0][0]              
__________________________________________________________________________________________________
dense_2 (Dense)                 (None, 128)          32896       dense_1[0][0]                    
__________________________________________________________________________________________________
dense_3 (Dense)                 (None, 64)           8256        dense_2[0][0]                    
__________________________________________________________________________________________________
dense_4_task_layer (Dense)      (None, 128)          8320        dense_3[0][0]                    
__________________________________________________________________________________________________
dense_5_task_layer (Dense)      (None, 64)           8256        dense_4_task_layer[0][0]         
__________________________________________________________________________________________________
output_task_layer (Dense)       (None, 2)            130         dense_5_task_layer[0][0]         
==================================================================================================
Total params: 773,314
Trainable params: 395,010
Non-trainable params: 378,304
__________________________________________________________________________________________________
1

Epoch 1/1

 64/100 [==================>...........] - ETA: 1s - loss: 0.7097 - acc: 0.5469
100/100 [==============================] - 4s 38ms/step - loss: 0.6986 - acc: 0.5600

Test accuracy: 58.34882856080327

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  15251

choose_one :  6261

F1score :  0.4739931900904074

AUC :  0.621605945694405

Confusion Matrix
[[8515 2224]
 [6736 4037]]
True label 0
0.7929043672595214  
0.20709563274047862  
True label 1
0.6252668708809059  
0.374733129119094  

Train_result {'loss': [0.6985544800758362], 'acc': [0.5599999928474426]}
Saved model to disk


2

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.6558 - acc: 0.6094
100/100 [==============================] - 1s 6ms/step - loss: 0.6426 - acc: 0.6600

Test accuracy: 59.520267757530675

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  13289

choose_one :  8223

F1score :  0.5415877026742472

AUC :  0.6292362766216877

Confusion Matrix
[[7660 3079]
 [5629 5144]]
True label 0
0.7132880156439148  
0.2867119843560853  
True label 1
0.5225099786503296  
0.47749002134967045  

Train_result {'loss': [0.6426347112655639], 'acc': [0.66]}
Saved model to disk


3

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5979 - acc: 0.7031
100/100 [==============================] - 1s 6ms/step - loss: 0.6135 - acc: 0.6800

Test accuracy: 60.12458162885831

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  13327

choose_one :  8185

F1score :  0.547526110349193

AUC :  0.6347870249855635

Confusion Matrix
[[7744 2995]
 [5583 5190]]
True label 0
0.7211099729956234  
0.2788900270043766  
True label 1
0.5182400445558341  
0.48175995544416594  

Train_result {'loss': [0.6135043716430664], 'acc': [0.6800000023841858]}
Saved model to disk


4

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5760 - acc: 0.7500
100/100 [==============================] - 1s 6ms/step - loss: 0.5666 - acc: 0.7500

Test accuracy: 60.91018966158423

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  12790

choose_one :  8722

F1score :  0.568658630418056

AUC :  0.6425843780558438

Confusion Matrix
[[7560 3179]
 [5230 5543]]
True label 0
0.7039761616537853  
0.2960238383462147  
True label 1
0.48547294161329246  
0.5145270583867075  

Train_result {'loss': [0.5665938901901245], 'acc': [0.75]}
Saved model to disk


5

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5238 - acc: 0.7500
100/100 [==============================] - 1s 6ms/step - loss: 0.4934 - acc: 0.7900

Test accuracy: 61.8352547415396

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  12385

choose_one :  9127

F1score :  0.5874371859296482

AUC :  0.6469478844842946

Confusion Matrix
[[7457 3282]
 [4928 5845]]
True label 0
0.6943849520439519  
0.30561504795604805  
True label 1
0.45743989603638724  
0.5425601039636128  

Train_result {'loss': [0.4933685898780823], 'acc': [0.7899999976158142]}
Saved model to disk


6

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4607 - acc: 0.8438
100/100 [==============================] - 1s 6ms/step - loss: 0.4789 - acc: 0.8100

Test accuracy: 61.54704351059873

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  11887

choose_one :  9625

F1score :  0.5944700460829493

AUC :  0.6470832404460123

Confusion Matrix
[[7177 3562]
 [4710 6063]]
True label 0
0.6683117608715895  
0.33168823912841044  
True label 1
0.4372041214146477  
0.5627958785853523  

Train_result {'loss': [0.4788957953453064], 'acc': [0.81]}
Saved model to disk


7

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4172 - acc: 0.8750
100/100 [==============================] - 1s 10ms/step - loss: 0.4033 - acc: 0.8600

Test accuracy: 62.02119747117888

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  11171

choose_one :  10341

F1score :  0.6130529506488586

AUC :  0.6490482940338607

Confusion Matrix
[[6870 3869]
 [4301 6472]]
True label 0
0.6397243691218921  
0.3602756308781078  
True label 1
0.39923883783532904  
0.6007611621646709  

Train_result {'loss': [0.4033481204509735], 'acc': [0.8599999928474427]}
Saved model to disk


8

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3752 - acc: 0.8906
100/100 [==============================] - 1s 6ms/step - loss: 0.3616 - acc: 0.8800

Test accuracy: 62.26757158795091

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  10956

choose_one :  10556

F1score :  0.6194383234094426

AUC :  0.6662895810951022

Confusion Matrix
[[6789 3950]
 [4167 6606]]
True label 0
0.6321817673898873  
0.36781823261011265  
True label 1
0.3868003341687552  
0.6131996658312447  

Train_result {'loss': [0.3615553879737854], 'acc': [0.8799999976158142]}
Saved model to disk


9

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3158 - acc: 0.9062
100/100 [==============================] - 1s 6ms/step - loss: 0.2770 - acc: 0.9100

Test accuracy: 62.755671253254

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  10951

choose_one :  10561

F1score :  0.6244492359613762

AUC :  0.6745261895223585

Confusion Matrix
[[6839 3900]
 [4112 6661]]
True label 0
0.6368376943849521  
0.363162305615048  
True label 1
0.38169497818620624  
0.6183050218137938  

Train_result {'loss': [0.27704314291477206], 'acc': [0.9100000071525574]}
Saved model to disk


10

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2955 - acc: 0.9219
100/100 [==============================] - 1s 7ms/step - loss: 0.2577 - acc: 0.9200

Test accuracy: 63.048531052435855

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  11344

choose_one :  10168

F1score :  0.6204097225538417

AUC :  0.6783218440025977

Confusion Matrix
[[7067 3672]
 [4277 6496]]
True label 0
0.6580687214824471  
0.34193127851755284  
True label 1
0.39701104613385313  
0.6029889538661468  

Train_result {'loss': [0.25772996485233307], 'acc': [0.9200000071525574]}
Saved model to disk


11

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2538 - acc: 0.9375
100/100 [==============================] - 1s 6ms/step - loss: 0.2952 - acc: 0.9100

Test accuracy: 63.16939382670138

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  10388

choose_one :  11124

F1score :  0.6381696122756543

AUC :  0.6774476940334129

Confusion Matrix
[[6602 4137]
 [3786 6987]]
True label 0
0.6147686004283452  
0.3852313995716547  
True label 1
0.3514341409078251  
0.6485658590921749  

Train_result {'loss': [0.2951735281944275], 'acc': [0.9099999976158142]}
Saved model to disk


12

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2579 - acc: 0.9062
100/100 [==============================] - 1s 6ms/step - loss: 0.2701 - acc: 0.9100

Test accuracy: 61.95611751580513

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  9475

choose_one :  12037

F1score :  0.6412099956159579

AUC :  0.6691647208193718

Confusion Matrix
[[6015 4724]
 [3460 7313]]
True label 0
0.5601080175062855  
0.4398919824937145  
True label 1
0.32117330362944396  
0.678826696370556  

Train_result {'loss': [0.2700986301898956], 'acc': [0.9100000071525574]}
Saved model to disk


13

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1625 - acc: 0.9219
100/100 [==============================] - 1s 6ms/step - loss: 0.2687 - acc: 0.9000

Test accuracy: 62.23503161026404

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  9511

choose_one :  12001

F1score :  0.643277421621147

AUC :  0.6668839130068327

Confusion Matrix
[[6063 4676]
 [3448 7325]]
True label 0
0.5645777074215477  
0.4354222925784524  
True label 1
0.320059407778706  
0.679940592221294  

Train_result {'loss': [0.2687492334842682], 'acc': [0.8999999976158142]}
Saved model to disk


14

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2305 - acc: 0.9375
100/100 [==============================] - 1s 6ms/step - loss: 0.2197 - acc: 0.9400

Test accuracy: 62.67199702491632

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  10079

choose_one :  11433

F1score :  0.638386021795911

AUC :  0.6718336867783956

Confusion Matrix
[[6394 4345]
 [3685 7088]]
True label 0
0.5953999441288761  
0.40460005587112396  
True label 1
0.34205885083078064  
0.6579411491692193  

Train_result {'loss': [0.2197435235977173], 'acc': [0.9399999904632569]}
Saved model to disk


15

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1154 - acc: 0.9688
100/100 [==============================] - 1s 6ms/step - loss: 0.1425 - acc: 0.9600

Test accuracy: 63.45760505764224

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  10970

choose_one :  10542

F1score :  0.6311986863711002

AUC :  0.6784197208972949

Confusion Matrix
[[6924 3815]
 [4046 6727]]
True label 0
0.6447527702765621  
0.3552472297234379  
True label 1
0.3755685510071475  
0.6244314489928525  

Train_result {'loss': [0.14253297567367554], 'acc': [0.9599999904632568]}
Saved model to disk


[[58.34882856080327, 1], [59.520267757530675, 2], [60.12458162885831, 3], [60.91018966158423, 4], [61.8352547415396, 5], [61.54704351059873, 6], [62.02119747117888, 7], [62.26757158795091, 8], [62.755671253254, 9], [63.048531052435855, 10], [63.16939382670138, 11], [61.95611751580513, 12], [62.23503161026404, 13], [62.67199702491632, 14], [63.45760505764224, 15]]
max accuracy :  [63.45760505764224, 15]
