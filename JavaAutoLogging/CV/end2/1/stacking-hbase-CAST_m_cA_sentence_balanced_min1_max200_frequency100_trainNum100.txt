Using TensorFlow backend.
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.
Instructions for updating:
Colocations handled automatically by placer.
WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/keras/backend/tensorflow_backend.py:3445: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.
Instructions for updating:
Please use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.
2019-10-12 07:36:03.154900: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-10-12 07:36:03.162770: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100005000 Hz
2019-10-12 07:36:03.164442: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x72893e0 executing computations on platform Host. Devices:
2019-10-12 07:36:03.164476: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>
/home/2014313303/taeha/JavaAutoLogging/model.py:44: UserWarning: Update your `Model` call to the Keras 2 API: `Model(inputs=[<tf.Tenso..., outputs=Tensor("ou...)`
  model = Model(input=[input1, input2], output=output)
/usr/local/lib/python3.5/dist-packages/keras/engine/training.py:490: UserWarning: Discrepancy between trainable weights and collected trainable weights, did you set `model.trainable` without calling `model.compile` after ?
  'Discrepancy between trainable weights and collected trainable'
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/ops/math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.cast instead.
First data
zero :  9858
one :  9997

Second data
zero :  9858
one :  9997

hbase-code
After set document size of train data, the number of zero and one label data :  42 58
After set document size of test data, the number of zero and one label data :  9816 9939

Sentence length Average : 32

Under 10 : 4078
Over 10, Under 30 : 8257
Over 30, Under 100 : 6473
Over 100, Under 150 : 856
Over 150, Under 200 : 191
Over 200, Under 400 : 0
Over 400 : 0

After balance out data.
hbase-code

Sentence length Average : 32

Under 10 : 4078
Over 10, Under 30 : 8257
Over 30, Under 100 : 6473
Over 100, Under 150 : 856
Over 150, Under 200 : 191
Over 200, Under 400 : 0
Over 400 : 0

184
hbase-AST
After set document size of train data, the number of zero and one label data :  42 58
After set document size of test data, the number of zero and one label data :  9816 9939
After balance out data.
hbase-AST

Sentence length Average : 27

Under 10 : 7489
Over 10, Under 30 : 6290
Over 30, Under 100 : 5216
Over 100, Under 150 : 729
Over 150, Under 200 : 126
Over 200, Under 400 : 4
Over 400 : 1

431
Count model parameter.
Get a short summary of each layer dimensions and parameters.
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
input_1 (InputLayer)            (None, 184, 200)     0                                            
__________________________________________________________________________________________________
input_2 (InputLayer)            (None, 431, 200)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, 184, 200)     0           input_1[0][0]                    
__________________________________________________________________________________________________
masking_2 (Masking)             (None, 431, 200)     0           input_2[0][0]                    
__________________________________________________________________________________________________
forwards_1 (LSTM)               (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
backwords_1 (LSTM)              (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
forwards_2 (LSTM)               (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
backwards_2 (LSTM)              (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
after_dp_forward_1 (Dropout)    (None, 64)           0           forwards_1[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_1 (Dropout)   (None, 64)           0           backwords_1[0][0]                
__________________________________________________________________________________________________
after_dp_forward_2 (Dropout)    (None, 64)           0           forwards_2[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_2 (Dropout)   (None, 64)           0           backwards_2[0][0]                
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, 128)          0           after_dp_forward_1[0][0]         
                                                                 after_dp_backward_1[0][0]        
__________________________________________________________________________________________________
concatenate_2 (Concatenate)     (None, 128)          0           after_dp_forward_2[0][0]         
                                                                 after_dp_backward_2[0][0]        
__________________________________________________________________________________________________
after_dp_1 (Dropout)            (None, 128)          0           concatenate_1[0][0]              
__________________________________________________________________________________________________
after_dp_2 (Dropout)            (None, 128)          0           concatenate_2[0][0]              
__________________________________________________________________________________________________
concatenate_3 (Concatenate)     (None, 256)          0           after_dp_1[0][0]                 
                                                                 after_dp_2[0][0]                 
__________________________________________________________________________________________________
dense_1_task_layer (Dense)      (None, 128)          32896       concatenate_3[0][0]              
__________________________________________________________________________________________________
output_task_layer (Dense)       (None, 2)            258         dense_1_task_layer[0][0]         
==================================================================================================
Total params: 575,874
Trainable params: 304,514
Non-trainable params: 271,360
__________________________________________________________________________________________________
1

Epoch 1/1

 64/100 [==================>...........] - ETA: 2s - loss: 0.8399 - acc: 0.5000
100/100 [==============================] - 4s 42ms/step - loss: 0.7527 - acc: 0.5700

Test accuracy: 60.54163502910656

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  7223

choose_one :  12532

F1score :  0.6531084508922611

AUC :  0.6585397698577459

Confusion Matrix
[[4622 5194]
 [2601 7338]]
True label 0
0.4708638956805216  
0.5291361043194784  
True label 1
0.2616963477210987  
0.7383036522789013  

Train_result {'loss': [0.7527313280105591], 'acc': [0.5699999904632569]}
Saved model to disk


2

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.6656 - acc: 0.6094
100/100 [==============================] - 1s 11ms/step - loss: 0.6534 - acc: 0.6500

Test accuracy: 63.4624145785877

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  6564

choose_one :  13191

F1score :  0.6879377431906615

AUC :  0.7054220434954772

Confusion Matrix
[[4581 5235]
 [1983 7956]]
True label 0
0.4666870415647922  
0.5333129584352079  
True label 1
0.19951705402958045  
0.8004829459704196  

Train_result {'loss': [0.6534476995468139], 'acc': [0.6499999952316284]}
Saved model to disk


3

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.6249 - acc: 0.5938
100/100 [==============================] - 1s 10ms/step - loss: 0.5873 - acc: 0.6600

Test accuracy: 66.60086054163503

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  7510

choose_one :  12245

F1score :  0.7025784349080418

AUC :  0.7305843610572167

Confusion Matrix
[[5364 4452]
 [2146 7793]]
True label 0
0.5464547677261614  
0.45354523227383864  
True label 1
0.21591709427507796  
0.784082905724922  

Train_result {'loss': [0.587281436920166], 'acc': [0.6600000047683716]}
Saved model to disk


4

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5613 - acc: 0.7031
100/100 [==============================] - 1s 11ms/step - loss: 0.5184 - acc: 0.7300

Test accuracy: 68.24095165780815

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8460

choose_one :  11295

F1score :  0.7045304700009418

AUC :  0.7431385239693178

Confusion Matrix
[[6001 3815]
 [2459 7480]]
True label 0
0.6113488182559087  
0.3886511817440913  
True label 1
0.24740919609618675  
0.7525908039038133  

Train_result {'loss': [0.5183742308616638], 'acc': [0.7300000047683716]}
Saved model to disk


5

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4852 - acc: 0.7969
100/100 [==============================] - 1s 10ms/step - loss: 0.4684 - acc: 0.8400

Test accuracy: 68.88382687927107

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8977

choose_one :  10778

F1score :  0.703287155476179

AUC :  0.750520181050619

Confusion Matrix
[[6323 3493]
 [2654 7285]]
True label 0
0.6441524042379788  
0.3558475957620212  
True label 1
0.26702887614448134  
0.7329711238555187  

Train_result {'loss': [0.46843270063400266], 'acc': [0.8400000071525574]}
Saved model to disk


6

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4463 - acc: 0.8125
100/100 [==============================] - 1s 10ms/step - loss: 0.4413 - acc: 0.8000

Test accuracy: 69.30397367754999

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9362

choose_one :  10393

F1score :  0.7017509344875074

AUC :  0.7550107356176671

Confusion Matrix
[[6557 3259]
 [2805 7134]]
True label 0
0.6679910350448248  
0.33200896495517523  
True label 1
0.28222155146392996  
0.71777844853607  

Train_result {'loss': [0.441302193403244], 'acc': [0.8000000047683716]}
Saved model to disk


7

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4008 - acc: 0.8594
100/100 [==============================] - 1s 10ms/step - loss: 0.3912 - acc: 0.8500

Test accuracy: 69.30397367754999

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9326

choose_one :  10429

F1score :  0.7022780832678711

AUC :  0.7583352275285106

Confusion Matrix
[[6539 3277]
 [2787 7152]]
True label 0
0.666157294213529  
0.3338427057864711  
True label 1
0.2804105040748566  
0.7195894959251434  

Train_result {'loss': [0.3911758553981781], 'acc': [0.8499999928474427]}
Saved model to disk


8

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2843 - acc: 0.9531
100/100 [==============================] - 1s 11ms/step - loss: 0.3609 - acc: 0.8700

Test accuracy: 69.29891166793217

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9109

choose_one :  10646

F1score :  0.7053679863978625

AUC :  0.7608192318292357

Confusion Matrix
[[6430 3386]
 [2679 7260]]
True label 0
0.6550529747351264  
0.3449470252648737  
True label 1
0.26954421974041654  
0.7304557802595835  

Train_result {'loss': [0.36093831539154053], 'acc': [0.8699999952316284]}
Saved model to disk


9

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3610 - acc: 0.8438
100/100 [==============================] - 1s 10ms/step - loss: 0.3872 - acc: 0.8200

Test accuracy: 69.14705137939762

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8653

choose_one :  11102

F1score :  0.7103274559193956

AUC :  0.7618452490919958

Confusion Matrix
[[6187 3629]
 [2466 7473]]
True label 0
0.6302974735126324  
0.36970252648736757  
True label 1
0.2481134923030486  
0.7518865076969514  

Train_result {'loss': [0.38719594717025757], 'acc': [0.8200000047683715]}
Saved model to disk


10

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2774 - acc: 0.8906
100/100 [==============================] - 1s 10ms/step - loss: 0.3469 - acc: 0.8600

Test accuracy: 68.68134649455834

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8241

choose_one :  11514

F1score :  0.7116021069314313

AUC :  0.76134322074516

Confusion Matrix
[[5935 3881]
 [2306 7633]]
True label 0
0.6046251018744906  
0.39537489812550936  
True label 1
0.23201529328906328  
0.7679847067109367  

Train_result {'loss': [0.34690868377685546], 'acc': [0.8600000095367432]}
Saved model to disk


11

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3026 - acc: 0.9219
100/100 [==============================] - 1s 10ms/step - loss: 0.2878 - acc: 0.9000

Test accuracy: 68.2814477347507

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8100

choose_one :  11655

F1score :  0.7098268037417802

AUC :  0.760776904562001

Confusion Matrix
[[5825 3991]
 [2275 7664]]
True label 0
0.5934189079054605  
0.4065810920945395  
True label 1
0.22889626723010364  
0.7711037327698964  

Train_result {'loss': [0.28781516551971437], 'acc': [0.8999999976158142]}
Saved model to disk


12

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3105 - acc: 0.8906
100/100 [==============================] - 1s 10ms/step - loss: 0.3142 - acc: 0.8900

Test accuracy: 68.43837003290307

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  8507

choose_one :  11248

F1score :  0.7057157691036957

AUC :  0.7612250641709866

Confusion Matrix
[[6044 3772]
 [2463 7476]]
True label 0
0.6157294213528932  
0.3842705786471068  
True label 1
0.24781165107153638  
0.7521883489284636  

Train_result {'loss': [0.31418718814849855], 'acc': [0.8900000023841858]}
Saved model to disk


13

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2480 - acc: 0.9375
100/100 [==============================] - 1s 11ms/step - loss: 0.2855 - acc: 0.9000

Test accuracy: 68.69147051379397

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9023

choose_one :  10732

F1score :  0.7007885443374776

AUC :  0.7613573400842121

Confusion Matrix
[[6327 3489]
 [2696 7243]]
True label 0
0.644559902200489  
0.355440097799511  
True label 1
0.27125465338565247  
0.7287453466143475  

Train_result {'loss': [0.28545499563217164], 'acc': [0.8999999928474426]}
Saved model to disk


14

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2563 - acc: 0.9062
100/100 [==============================] - 1s 10ms/step - loss: 0.3034 - acc: 0.8700

Test accuracy: 68.63072639838016

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9301

choose_one :  10454

F1score :  0.6961212180650223

AUC :  0.761030724665775

Confusion Matrix
[[6460 3356]
 [2841 7098]]
True label 0
0.6581092094539527  
0.34189079054604726  
True label 1
0.28584364624207664  
0.7141563537579233  

Train_result {'loss': [0.30339783787727354], 'acc': [0.8700000095367432]}
Saved model to disk


15

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2614 - acc: 0.9062
100/100 [==============================] - 1s 10ms/step - loss: 0.2446 - acc: 0.9100

Test accuracy: 68.44343204252088

data size :  19855

zero :  9858

one :  9997

train_zero :  42

train_one :  58

test_zero :  9816

test_one :  9939

choose_zero :  9150

choose_one :  10605

F1score :  0.696553738317757

AUC :  0.758944460352404

Confusion Matrix
[[6366 3450]
 [2784 7155]]
True label 0
0.6485330073349633  
0.35146699266503667  
True label 1
0.2801086628433444  
0.7198913371566557  

Train_result {'loss': [0.24458771467208862], 'acc': [0.9100000071525574]}
Saved model to disk


[[60.54163502910656, 1], [63.4624145785877, 2], [66.60086054163503, 3], [68.24095165780815, 4], [68.88382687927107, 5], [69.30397367754999, 6], [69.30397367754999, 7], [69.29891166793217, 8], [69.14705137939762, 9], [68.68134649455834, 10], [68.2814477347507, 11], [68.43837003290307, 12], [68.69147051379397, 13], [68.63072639838016, 14], [68.44343204252088, 15]]
max accuracy :  [69.30397367754999, 7]
