Using TensorFlow backend.
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.
Instructions for updating:
Colocations handled automatically by placer.
WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/keras/backend/tensorflow_backend.py:3368: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.
Instructions for updating:
Please use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.
2019-10-14 23:42:26.863007: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-10-14 23:42:26.873798: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100085000 Hz
2019-10-14 23:42:26.876144: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0xb2158a0 executing computations on platform Host. Devices:
2019-10-14 23:42:26.876193: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>
/home/2014313303/taeha/JavaAutoLogging/model.py:139: UserWarning: Update your `Model` call to the Keras 2 API: `Model(outputs=Tensor("ou..., inputs=[<tf.Tenso...)`
  model = Model(input=[input1, input2, input3, input4], output=output)
/usr/local/lib/python3.5/dist-packages/keras/engine/training.py:479: UserWarning: Discrepancy between trainable weights and collected trainable weights, did you set `model.trainable` without calling `model.compile` after ?
  'Discrepancy between trainable weights and collected trainable'
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/ops/math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.cast instead.
First data
zero :  10792
one :  10820

Second data
zero :  10792
one :  10820

Third data
zero :  10792
one :  10820

4th data
zero :  10792
one :  10820

glassfish-code
After set document size of train data, the number of zero and one label data :  53 47
After set document size of test data, the number of zero and one label data :  10739 10773

Sentence length Average : 31

Under 10 : 5630
Over 10, Under 30 : 8221
Over 30, Under 100 : 6586
Over 100, Under 150 : 962
Over 150, Under 200 : 213
Over 200, Under 400 : 0
Over 400 : 0

After balance out data.
glassfish-code

Sentence length Average : 31

Under 10 : 5630
Over 10, Under 30 : 8221
Over 30, Under 100 : 6586
Over 100, Under 150 : 962
Over 150, Under 200 : 213
Over 200, Under 400 : 0
Over 400 : 0

179
glassfish-AST
After set document size of train data, the number of zero and one label data :  53 47
After set document size of test data, the number of zero and one label data :  10739 10773
After balance out data.
glassfish-AST

Sentence length Average : 27

Under 10 : 9172
Over 10, Under 30 : 5625
Over 30, Under 100 : 5826
Over 100, Under 150 : 821
Over 150, Under 200 : 164
Over 200, Under 400 : 4
Over 400 : 0

253
glassfish-CAST
After set document size of train data, the number of zero and one label data :  53 47
After set document size of test data, the number of zero and one label data :  10739 10773
After balance out data.
glassfish-CAST

Sentence length Average : 50

Under 10 : 4320
Over 10, Under 30 : 6874
Over 30, Under 100 : 7059
Over 100, Under 150 : 1787
Over 150, Under 200 : 894
Over 200, Under 400 : 678
Over 400 : 0

342
glassfish-depth_num
After set document size of train data, the number of zero and one label data :  53 47
After set document size of test data, the number of zero and one label data :  10739 10773
After balance out data.
glassfish-depth_num

Sentence length Average : 27

Under 10 : 9172
Over 10, Under 30 : 5625
Over 30, Under 100 : 5826
Over 100, Under 150 : 822
Over 150, Under 200 : 163
Over 200, Under 400 : 4
Over 400 : 0

253
Count model parameter.
Get a short summary of each layer dimensions and parameters.
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
input_1 (InputLayer)            (None, 179, 200)     0                                            
__________________________________________________________________________________________________
input_2 (InputLayer)            (None, 253, 200)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, 179, 200)     0           input_1[0][0]                    
__________________________________________________________________________________________________
masking_2 (Masking)             (None, 253, 200)     0           input_2[0][0]                    
__________________________________________________________________________________________________
input_3 (InputLayer)            (None, 342, 200)     0                                            
__________________________________________________________________________________________________
forwards_1 (LSTM)               (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
backwords_1 (LSTM)              (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
forwards_2 (LSTM)               (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
backwards_2 (LSTM)              (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
masking_3 (Masking)             (None, 342, 200)     0           input_3[0][0]                    
__________________________________________________________________________________________________
input_4 (InputLayer)            (None, 253, 200)     0                                            
__________________________________________________________________________________________________
after_dp_forward_1 (Dropout)    (None, 64)           0           forwards_1[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_1 (Dropout)   (None, 64)           0           backwords_1[0][0]                
__________________________________________________________________________________________________
after_dp_forward_2 (Dropout)    (None, 64)           0           forwards_2[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_2 (Dropout)   (None, 64)           0           backwards_2[0][0]                
__________________________________________________________________________________________________
forwards_3 (LSTM)               (None, 64)           67840       masking_3[0][0]                  
__________________________________________________________________________________________________
backwards_3 (LSTM)              (None, 64)           67840       masking_3[0][0]                  
__________________________________________________________________________________________________
masking_4 (Masking)             (None, 253, 200)     0           input_4[0][0]                    
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, 128)          0           after_dp_forward_1[0][0]         
                                                                 after_dp_backward_1[0][0]        
__________________________________________________________________________________________________
concatenate_2 (Concatenate)     (None, 128)          0           after_dp_forward_2[0][0]         
                                                                 after_dp_backward_2[0][0]        
__________________________________________________________________________________________________
after_dp_forward_3 (Dropout)    (None, 64)           0           forwards_3[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_3 (Dropout)   (None, 64)           0           backwards_3[0][0]                
__________________________________________________________________________________________________
forwards_4 (LSTM)               (None, 64)           67840       masking_4[0][0]                  
__________________________________________________________________________________________________
backwards_4 (LSTM)              (None, 64)           67840       masking_4[0][0]                  
__________________________________________________________________________________________________
after_dp_1 (Dropout)            (None, 128)          0           concatenate_1[0][0]              
__________________________________________________________________________________________________
after_dp_2 (Dropout)            (None, 128)          0           concatenate_2[0][0]              
__________________________________________________________________________________________________
concatenate_3 (Concatenate)     (None, 128)          0           after_dp_forward_3[0][0]         
                                                                 after_dp_backward_3[0][0]        
__________________________________________________________________________________________________
after_dp_forward_4 (Dropout)    (None, 64)           0           forwards_4[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_4 (Dropout)   (None, 64)           0           backwards_4[0][0]                
__________________________________________________________________________________________________
concatenate_5 (Concatenate)     (None, 256)          0           after_dp_1[0][0]                 
                                                                 after_dp_2[0][0]                 
__________________________________________________________________________________________________
after_dp_3 (Dropout)            (None, 128)          0           concatenate_3[0][0]              
__________________________________________________________________________________________________
concatenate_4 (Concatenate)     (None, 128)          0           after_dp_forward_4[0][0]         
                                                                 after_dp_backward_4[0][0]        
__________________________________________________________________________________________________
concatenate_6 (Concatenate)     (None, 384)          0           concatenate_5[0][0]              
                                                                 after_dp_3[0][0]                 
__________________________________________________________________________________________________
after_dp_4 (Dropout)            (None, 128)          0           concatenate_4[0][0]              
__________________________________________________________________________________________________
concatenate_7 (Concatenate)     (None, 512)          0           concatenate_6[0][0]              
                                                                 after_dp_4[0][0]                 
__________________________________________________________________________________________________
dense_1_task_layer (Dense)      (None, 384)          196992      concatenate_7[0][0]              
__________________________________________________________________________________________________
dense_2_task_layer (Dense)      (None, 512)          197120      dense_1_task_layer[0][0]         
__________________________________________________________________________________________________
dense_3_task_layer (Dense)      (None, 256)          131328      dense_2_task_layer[0][0]         
__________________________________________________________________________________________________
output_task_layer (Dense)       (None, 2)            514         dense_3_task_layer[0][0]         
==================================================================================================
Total params: 1,611,394
Trainable params: 1,068,674
Non-trainable params: 542,720
__________________________________________________________________________________________________
1

Epoch 1/1

 64/100 [==================>...........] - ETA: 4s - loss: 0.6962 - acc: 0.5781
100/100 [==============================] - 8s 78ms/step - loss: 0.6750 - acc: 0.5900

Test accuracy: 51.06452212718483

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  21110

choose_one :  402

F1score :  0.05798657718120805

AUC :  0.6188754063650121

Confusion Matrix
[[10661    78]
 [10449   324]]
True label 0
0.992736753887699  
0.0072632461123009594  
True label 1
0.9699248120300752  
0.03007518796992481  

Train_result {'acc': [0.5899999976158142], 'loss': [0.6749720025062561]}
Saved model to disk


2

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.6948 - acc: 0.5781
100/100 [==============================] - 1s 12ms/step - loss: 0.7055 - acc: 0.5900

Test accuracy: 58.88806247675716

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  10105

choose_one :  11407

F1score :  0.6012623985572588

AUC :  0.6306981633623501

Confusion Matrix
[[6000 4739]
 [4105 6668]]
True label 0
0.5587112394077661  
0.44128876059223393  
True label 1
0.3810452056066091  
0.6189547943933909  

Train_result {'acc': [0.5899999976158142], 'loss': [0.7054994964599609]}
Saved model to disk


3

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5412 - acc: 0.7344
100/100 [==============================] - 1s 11ms/step - loss: 0.6103 - acc: 0.6800

Test accuracy: 59.27854220899963

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  8319

choose_one :  13193

F1score :  0.6344821830927146

AUC :  0.639637340066012

Confusion Matrix
[[5149 5590]
 [3170 7603]]
True label 0
0.4794673619517646  
0.5205326380482354  
True label 1
0.2942541539032767  
0.7057458460967233  

Train_result {'acc': [0.6799999928474426], 'loss': [0.6103170490264893]}
Saved model to disk


4

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5066 - acc: 0.7344
100/100 [==============================] - 1s 11ms/step - loss: 0.4887 - acc: 0.7500

Test accuracy: 59.58534771290442

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  15439

choose_one :  6073

F1score :  0.4839130950967589

AUC :  0.6456273610742566

Confusion Matrix
[[8742 1997]
 [6697 4076]]
True label 0
0.8140422758171152  
0.1859577241828848  
True label 1
0.6216467093660076  
0.37835329063399237  

Train_result {'acc': [0.7500000047683716], 'loss': [0.4886558341979981]}
Saved model to disk


5

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4528 - acc: 0.7656
100/100 [==============================] - 1s 11ms/step - loss: 0.4471 - acc: 0.7600

Test accuracy: 59.524916325771656

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  16088

choose_one :  5424

F1score :  0.4624313144409459

AUC :  0.6536526397714427

Confusion Matrix
[[9060 1679]
 [7028 3745]]
True label 0
0.8436539715057267  
0.1563460284942732  
True label 1
0.6523716699155295  
0.3476283300844704  

Train_result {'acc': [0.76], 'loss': [0.447137748003006]}
Saved model to disk


6

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4616 - acc: 0.7969
100/100 [==============================] - 1s 12ms/step - loss: 0.4477 - acc: 0.8000

Test accuracy: 61.68185198958721

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  12600

choose_one :  8912

F1score :  0.5812547625095249

AUC :  0.6630506325167366

Confusion Matrix
[[7548 3191]
 [5052 5721]]
True label 0
0.7028587391749698  
0.2971412608250303  
True label 1
0.46895015316067945  
0.5310498468393205  

Train_result {'acc': [0.8000000095367432], 'loss': [0.44765336394309996]}
Saved model to disk


7

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3719 - acc: 0.9062
100/100 [==============================] - 1s 11ms/step - loss: 0.3320 - acc: 0.9100

Test accuracy: 60.96132391223503

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  9369

choose_one :  12143

F1score :  0.6335311572700296

AUC :  0.6706056033781017

Confusion Matrix
[[5855 4884]
 [3514 7259]]
True label 0
0.5452090511220784  
0.4547909488779216  
True label 1
0.32618583495776476  
0.6738141650422352  

Train_result {'acc': [0.9100000071525574], 'loss': [0.33204981207847595]}
Saved model to disk


8

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3894 - acc: 0.8438
100/100 [==============================] - 1s 11ms/step - loss: 0.3575 - acc: 0.8600

Test accuracy: 61.57493492004462

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  9973

choose_one :  11539

F1score :  0.629526712083184

AUC :  0.6764371811118951

Confusion Matrix
[[6223 4516]
 [3750 7023]]
True label 0
0.5794766738057547  
0.42052332619424526  
True label 1
0.34809245335561123  
0.6519075466443888  

Train_result {'acc': [0.8600000023841858], 'loss': [0.3575204634666443]}
Saved model to disk


9

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3332 - acc: 0.8594
100/100 [==============================] - 1s 12ms/step - loss: 0.3316 - acc: 0.8400

Test accuracy: 63.587764968389735

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  12724

choose_one :  8788

F1score :  0.5995603496753745

AUC :  0.6833889559510063

Confusion Matrix
[[7815 2924]
 [4909 5864]]
True label 0
0.7277213893286153  
0.27227861067138465  
True label 1
0.45567622760605214  
0.5443237723939478  

Train_result {'acc': [0.8400000095367431], 'loss': [0.3315526592731476]}
Saved model to disk


10

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2526 - acc: 0.8906
100/100 [==============================] - 1s 11ms/step - loss: 0.2786 - acc: 0.9000

Test accuracy: 63.34139085161771

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  14281

choose_one :  7231

F1score :  0.5619862252832704

AUC :  0.6887163209503655

Confusion Matrix
[[8567 2172]
 [5714 5059]]
True label 0
0.7977465313343887  
0.20225346866561134  
True label 1
0.5304000742597234  
0.4695999257402766  

Train_result {'acc': [0.9000000071525573], 'loss': [0.27859142661094666]}
Saved model to disk


11

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1783 - acc: 0.9375
100/100 [==============================] - 1s 11ms/step - loss: 0.2028 - acc: 0.9300

Test accuracy: 64.2618073633321

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  12137

choose_one :  9375

F1score :  0.6184236648798888

AUC :  0.6918451142634844

Confusion Matrix
[[7594 3145]
 [4543 6230]]
True label 0
0.7071421920104293  
0.29285780798957073  
True label 1
0.4217024041585445  
0.5782975958414555  

Train_result {'acc': [0.9300000071525574], 'loss': [0.20278198182582854]}
Saved model to disk


12

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1680 - acc: 0.9531
100/100 [==============================] - 1s 11ms/step - loss: 0.1674 - acc: 0.9500

Test accuracy: 63.88062476757159

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  9513

choose_one :  11999

F1score :  0.658791498331284

AUC :  0.6950007765064543

Confusion Matrix
[[6241 4498]
 [3272 7501]]
True label 0
0.581152807523978  
0.418847192476022  
True label 1
0.3037222686345493  
0.6962777313654507  

Train_result {'acc': [0.9499999904632568], 'loss': [0.16743867039680482]}
Saved model to disk


13

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1766 - acc: 0.9688
100/100 [==============================] - 1s 11ms/step - loss: 0.1347 - acc: 0.9700

Test accuracy: 63.73651915210116

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  9484

choose_one :  12028

F1score :  0.6578658830753037

AUC :  0.6980230794815445

Confusion Matrix
[[6211 4528]
 [3273 7500]]
True label 0
0.5783592513269392  
0.4216407486730608  
True label 1
0.3038150932887775  
0.6961849067112225  

Train_result {'acc': [0.9699999952316284], 'loss': [0.13468731433153153]}
Saved model to disk


14

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.1974 - acc: 0.9375
100/100 [==============================] - 1s 11ms/step - loss: 0.1634 - acc: 0.9500

Test accuracy: 64.66158423205653

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  11611

choose_one :  9901

F1score :  0.6322917674373609

AUC :  0.6987639868727493

Confusion Matrix
[[7374 3365]
 [4237 6536]]
True label 0
0.6866561132321445  
0.31334388676785546  
True label 1
0.3932980599647266  
0.6067019400352733  

Train_result {'acc': [0.9499999952316284], 'loss': [0.16342734128236772]}
Saved model to disk


15

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.0845 - acc: 0.9688
100/100 [==============================] - 1s 12ms/step - loss: 0.1055 - acc: 0.9600

Test accuracy: 63.86667906284864

data size :  21612

zero :  10792

one :  10820

train_zero :  53

train_one :  47

test_zero :  10739

test_one :  10773

choose_zero :  13424

choose_one :  8088

F1score :  0.5878797518689359

AUC :  0.6988478912324283

Confusion Matrix
[[8195 2544]
 [5229 5544]]
True label 0
0.7631064344911072  
0.23689356550889282  
True label 1
0.4853801169590643  
0.5146198830409356  

Train_result {'acc': [0.9599999904632568], 'loss': [0.10547310650348664]}
Saved model to disk


[[51.06452212718483, 1], [58.88806247675716, 2], [59.27854220899963, 3], [59.58534771290442, 4], [59.524916325771656, 5], [61.68185198958721, 6], [60.96132391223503, 7], [61.57493492004462, 8], [63.587764968389735, 9], [63.34139085161771, 10], [64.2618073633321, 11], [63.88062476757159, 12], [63.73651915210116, 13], [64.66158423205653, 14], [63.86667906284864, 15]]
max accuracy :  [64.66158423205653, 14]
