Compiled from "TestHeapMemoryManager.java"
public class org.apache.hadoop.hbase.regionserver.TestHeapMemoryManager {
  public static final org.apache.hadoop.hbase.HBaseClassTestRule CLASS_RULE;

  public org.apache.hadoop.hbase.regionserver.TestHeapMemoryManager();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: invokestatic  #2                  // Method java/lang/management/ManagementFactory.getMemoryMXBean:()Ljava/lang/management/MemoryMXBean;
       8: invokeinterface #3,  1            // InterfaceMethod java/lang/management/MemoryMXBean.getHeapMemoryUsage:()Ljava/lang/management/MemoryUsage;
      13: invokevirtual #4                  // Method java/lang/management/MemoryUsage.getMax:()J
      16: putfield      #5                  // Field maxHeapSize:J
      19: return

  public void testAutoTunerShouldBeOffWhenMaxMinRangesForMemstoreIsNotGiven() throws java.lang.Exception;
    Code:
       0: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
       3: astore_1
       4: aload_1
       5: ldc           #8                  // String hbase.regionserver.global.memstore.size
       7: ldc           #9                  // float 0.02f
       9: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      12: aload_1
      13: ldc           #12                 // String hfile.block.cache.size.max.range
      15: ldc           #13                 // float 0.75f
      17: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      20: aload_1
      21: ldc           #14                 // String hfile.block.cache.size.min.range
      23: ldc           #15                 // float 0.03f
      25: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      28: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
      31: dup
      32: aload_1
      33: invokespecial #17                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
      36: astore_2
      37: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
      40: dup
      41: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
      44: dup
      45: lconst_0
      46: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
      49: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      52: dup
      53: lconst_0
      54: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
      57: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
      60: dup
      61: aload_1
      62: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
      65: aload_2
      66: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
      69: astore_3
      70: aload_3
      71: invokevirtual #25                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager.isTunerOn:()Z
      74: invokestatic  #26                 // Method org/junit/Assert.assertFalse:(Z)V
      77: return

  public void testAutoTunerShouldBeOffWhenMaxMinRangesForBlockCacheIsNotGiven() throws java.lang.Exception;
    Code:
       0: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
       3: astore_1
       4: aload_1
       5: ldc           #28                 // String hfile.block.cache.size
       7: ldc           #9                  // float 0.02f
       9: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      12: aload_1
      13: ldc           #29                 // String hbase.regionserver.global.memstore.size.max.range
      15: ldc           #13                 // float 0.75f
      17: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      20: aload_1
      21: ldc           #30                 // String hbase.regionserver.global.memstore.size.min.range
      23: ldc           #15                 // float 0.03f
      25: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      28: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
      31: dup
      32: aload_1
      33: invokespecial #17                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
      36: astore_2
      37: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
      40: dup
      41: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
      44: dup
      45: lconst_0
      46: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
      49: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      52: dup
      53: lconst_0
      54: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
      57: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
      60: dup
      61: aload_1
      62: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
      65: aload_2
      66: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
      69: astore_3
      70: aload_3
      71: invokevirtual #25                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager.isTunerOn:()Z
      74: invokestatic  #26                 // Method org/junit/Assert.assertFalse:(Z)V
      77: return

  public void testWhenMemstoreAndBlockCacheMaxMinChecksFails() throws java.lang.Exception;
    Code:
       0: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
       3: dup
       4: lconst_0
       5: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
       8: astore_1
       9: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
      12: astore_2
      13: aload_2
      14: ldc           #29                 // String hbase.regionserver.global.memstore.size.max.range
      16: ldc           #13                 // float 0.75f
      18: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      21: aload_2
      22: ldc           #14                 // String hfile.block.cache.size.min.range
      24: ldc           #31                 // float 0.06f
      26: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      29: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
      32: dup
      33: aload_2
      34: invokespecial #17                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
      37: astore_3
      38: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      41: dup
      42: lconst_0
      43: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
      46: astore        4
      48: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
      51: dup
      52: aload_1
      53: aload         4
      55: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
      58: dup
      59: aload_2
      60: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
      63: aload_3
      64: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
      67: pop
      68: invokestatic  #32                 // Method org/junit/Assert.fail:()V
      71: goto          76
      74: astore        5
      76: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
      79: astore_2
      80: aload_2
      81: ldc           #30                 // String hbase.regionserver.global.memstore.size.min.range
      83: ldc           #34                 // float 0.2f
      85: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      88: aload_2
      89: ldc           #12                 // String hfile.block.cache.size.max.range
      91: ldc           #35                 // float 0.7f
      93: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      96: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
      99: dup
     100: aload_1
     101: aload         4
     103: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
     106: dup
     107: aload_2
     108: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     111: aload_3
     112: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
     115: pop
     116: invokestatic  #32                 // Method org/junit/Assert.fail:()V
     119: goto          124
     122: astore        5
     124: return
    Exception table:
       from    to  target type
          48    71    74   Class java/lang/RuntimeException
          96   119   122   Class java/lang/RuntimeException

  public void testWhenClusterIsWriteHeavyWithEmptyMemstore() throws java.lang.Exception;
    Code:
       0: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
       3: astore_1
       4: aload_1
       5: ldc           #29                 // String hbase.regionserver.global.memstore.size.max.range
       7: ldc           #13                 // float 0.75f
       9: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      12: aload_1
      13: ldc           #30                 // String hbase.regionserver.global.memstore.size.min.range
      15: ldc           #36                 // float 0.1f
      17: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      20: aload_1
      21: ldc           #12                 // String hfile.block.cache.size.max.range
      23: ldc           #35                 // float 0.7f
      25: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      28: aload_1
      29: ldc           #14                 // String hfile.block.cache.size.min.range
      31: ldc           #37                 // float 0.05f
      33: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      36: aload_1
      37: ldc           #38                 // String hbase.regionserver.heapmemory.tuner.period
      39: ldc2_w        #39                 // long 1000l
      42: invokevirtual #41                 // Method org/apache/hadoop/conf/Configuration.setLong:(Ljava/lang/String;J)V
      45: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
      48: dup
      49: aload_0
      50: getfield      #5                  // Field maxHeapSize:J
      53: l2d
      54: ldc2_w        #42                 // double 0.4d
      57: dmul
      58: d2l
      59: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
      62: astore_2
      63: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
      66: dup
      67: aload_1
      68: invokespecial #17                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
      71: astore_3
      72: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      75: dup
      76: aload_0
      77: getfield      #5                  // Field maxHeapSize:J
      80: l2d
      81: ldc2_w        #42                 // double 0.4d
      84: dmul
      85: d2l
      86: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
      89: astore        4
      91: aload_2
      92: lconst_0
      93: invokevirtual #44                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.setTestBlockSize:(J)V
      96: aload_3
      97: lconst_0
      98: invokevirtual #45                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub.setTestMemstoreSize:(J)V
     101: aload_1
     102: ldc           #47                 // String hbase.regionserver.heapmemory.autotuner.ignored.periods
     104: iconst_0
     105: invokevirtual #48                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
     108: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
     111: dup
     112: aload_2
     113: aload         4
     115: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
     118: dup
     119: aload_1
     120: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     123: aload_3
     124: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
     127: astore        5
     129: aload         4
     131: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     134: lstore        6
     136: aload_2
     137: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     140: lstore        8
     142: new           #51                 // class org/apache/hadoop/hbase/ChoreService
     145: dup
     146: ldc           #52                 // String TEST_SERVER_NAME
     148: invokespecial #53                 // Method org/apache/hadoop/hbase/ChoreService."<init>":(Ljava/lang/String;)V
     151: astore        10
     153: aload         5
     155: aload         10
     157: invokevirtual #54                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager.start:(Lorg/apache/hadoop/hbase/ChoreService;)V
     160: aload         4
     162: getstatic     #55                 // Field org/apache/hadoop/hbase/regionserver/FlushType.ABOVE_ONHEAP_HIGHER_MARK:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     165: putfield      #56                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.flushType:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     168: aload         4
     170: aconst_null
     171: iconst_0
     172: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     175: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     178: pop
     179: aload         4
     181: aconst_null
     182: iconst_0
     183: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     186: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     189: pop
     190: aload         4
     192: aconst_null
     193: iconst_0
     194: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     197: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     200: pop
     201: aload         4
     203: getstatic     #59                 // Field org/apache/hadoop/hbase/regionserver/FlushType.ABOVE_ONHEAP_LOWER_MARK:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     206: putfield      #56                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.flushType:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     209: aload         4
     211: aconst_null
     212: iconst_0
     213: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     216: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     219: pop
     220: ldc2_w        #60                 // long 1500l
     223: invokestatic  #62                 // Method java/lang/Thread.sleep:(J)V
     226: lload         6
     228: aload         4
     230: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     233: invokestatic  #63                 // Method org/junit/Assert.assertEquals:(JJ)V
     236: lload         8
     238: aload_2
     239: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     242: invokestatic  #63                 // Method org/junit/Assert.assertEquals:(JJ)V
     245: return

  public void testHeapMemoryManagerWhenOffheapFlushesHappenUnderReadHeavyCase() throws java.lang.Exception;
    Code:
       0: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
       3: dup
       4: aload_0
       5: getfield      #5                  // Field maxHeapSize:J
       8: l2d
       9: ldc2_w        #42                 // double 0.4d
      12: dmul
      13: d2l
      14: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
      17: astore_1
      18: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
      21: astore_2
      22: aload_2
      23: ldc           #64                 // String hbase.regionserver.global.memstore.size.lower.limit
      25: ldc           #35                 // float 0.7f
      27: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      30: aload_2
      31: ldc           #29                 // String hbase.regionserver.global.memstore.size.max.range
      33: ldc           #13                 // float 0.75f
      35: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      38: aload_2
      39: ldc           #30                 // String hbase.regionserver.global.memstore.size.min.range
      41: ldc           #36                 // float 0.1f
      43: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      46: aload_2
      47: ldc           #12                 // String hfile.block.cache.size.max.range
      49: ldc           #35                 // float 0.7f
      51: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      54: aload_2
      55: ldc           #14                 // String hfile.block.cache.size.min.range
      57: ldc           #37                 // float 0.05f
      59: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      62: aload_2
      63: ldc           #38                 // String hbase.regionserver.heapmemory.tuner.period
      65: ldc2_w        #39                 // long 1000l
      68: invokevirtual #41                 // Method org/apache/hadoop/conf/Configuration.setLong:(Ljava/lang/String;J)V
      71: aload_2
      72: ldc           #47                 // String hbase.regionserver.heapmemory.autotuner.ignored.periods
      74: iconst_0
      75: invokevirtual #48                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      78: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
      81: dup
      82: aload_2
      83: iconst_1
      84: invokespecial #65                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;Z)V
      87: astore_3
      88: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      91: dup
      92: aload_0
      93: getfield      #5                  // Field maxHeapSize:J
      96: l2d
      97: ldc2_w        #42                 // double 0.4d
     100: dmul
     101: d2l
     102: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
     105: astore        4
     107: aload_1
     108: aload_0
     109: getfield      #5                  // Field maxHeapSize:J
     112: l2d
     113: ldc2_w        #42                 // double 0.4d
     116: dmul
     117: ldc2_w        #66                 // double 0.8d
     120: dmul
     121: d2l
     122: invokevirtual #44                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.setTestBlockSize:(J)V
     125: aload_3
     126: lconst_0
     127: invokevirtual #45                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub.setTestMemstoreSize:(J)V
     130: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
     133: dup
     134: aload_1
     135: aload         4
     137: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
     140: dup
     141: aload_2
     142: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     145: aload_3
     146: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
     149: astore        5
     151: aload         4
     153: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     156: lstore        6
     158: aload_1
     159: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     162: lstore        8
     164: ldc           #68                 // float 0.00125f
     166: fstore        10
     168: new           #51                 // class org/apache/hadoop/hbase/ChoreService
     171: dup
     172: ldc           #52                 // String TEST_SERVER_NAME
     174: invokespecial #53                 // Method org/apache/hadoop/hbase/ChoreService."<init>":(Ljava/lang/String;)V
     177: astore        11
     179: aload         5
     181: aload         11
     183: invokevirtual #54                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager.start:(Lorg/apache/hadoop/hbase/ChoreService;)V
     186: aload_1
     187: aconst_null
     188: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     191: pop
     192: aload_1
     193: aconst_null
     194: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     197: pop
     198: aload_1
     199: aconst_null
     200: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     203: pop
     204: aload         4
     206: getstatic     #70                 // Field org/apache/hadoop/hbase/regionserver/FlushType.ABOVE_OFFHEAP_HIGHER_MARK:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     209: putfield      #56                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.flushType:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     212: aload         4
     214: aconst_null
     215: iconst_0
     216: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     219: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     222: pop
     223: aload         4
     225: aconst_null
     226: iconst_0
     227: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     230: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     233: pop
     234: aload         4
     236: aconst_null
     237: iconst_0
     238: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     241: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     244: pop
     245: aload         4
     247: aconst_null
     248: iconst_0
     249: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     252: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     255: pop
     256: aload_0
     257: aload         4
     259: aload         4
     261: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     264: invokespecial #71                 // Method waitForTune:(Lorg/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub;J)V
     267: aload_0
     268: fload         10
     270: fneg
     271: f2d
     272: lload         6
     274: aload         4
     276: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     279: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     282: aload_0
     283: fload         10
     285: f2d
     286: lload         8
     288: aload_1
     289: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     292: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     295: aload         4
     297: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     300: lstore        6
     302: aload_1
     303: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     306: lstore        8
     308: aload_1
     309: aconst_null
     310: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     313: pop
     314: aload_0
     315: aload         4
     317: aload         4
     319: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     322: invokespecial #71                 // Method waitForTune:(Lorg/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub;J)V
     325: aload_0
     326: fload         10
     328: fneg
     329: f2d
     330: lload         6
     332: aload         4
     334: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     337: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     340: aload_0
     341: fload         10
     343: f2d
     344: lload         8
     346: aload_1
     347: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     350: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     353: return

  public void testHeapMemoryManagerWithOffheapMemstoreAndMixedWorkload() throws java.lang.Exception;
    Code:
       0: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
       3: dup
       4: aload_0
       5: getfield      #5                  // Field maxHeapSize:J
       8: l2d
       9: ldc2_w        #42                 // double 0.4d
      12: dmul
      13: d2l
      14: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
      17: astore_1
      18: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
      21: astore_2
      22: aload_2
      23: ldc           #64                 // String hbase.regionserver.global.memstore.size.lower.limit
      25: ldc           #35                 // float 0.7f
      27: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      30: aload_2
      31: ldc           #29                 // String hbase.regionserver.global.memstore.size.max.range
      33: ldc           #13                 // float 0.75f
      35: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      38: aload_2
      39: ldc           #30                 // String hbase.regionserver.global.memstore.size.min.range
      41: ldc           #36                 // float 0.1f
      43: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      46: aload_2
      47: ldc           #12                 // String hfile.block.cache.size.max.range
      49: ldc           #35                 // float 0.7f
      51: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      54: aload_2
      55: ldc           #14                 // String hfile.block.cache.size.min.range
      57: ldc           #37                 // float 0.05f
      59: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      62: aload_2
      63: ldc           #38                 // String hbase.regionserver.heapmemory.tuner.period
      65: ldc2_w        #39                 // long 1000l
      68: invokevirtual #41                 // Method org/apache/hadoop/conf/Configuration.setLong:(Ljava/lang/String;J)V
      71: aload_2
      72: ldc           #47                 // String hbase.regionserver.heapmemory.autotuner.ignored.periods
      74: iconst_0
      75: invokevirtual #48                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      78: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
      81: dup
      82: aload_2
      83: iconst_1
      84: invokespecial #65                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;Z)V
      87: astore_3
      88: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      91: dup
      92: aload_0
      93: getfield      #5                  // Field maxHeapSize:J
      96: l2d
      97: ldc2_w        #42                 // double 0.4d
     100: dmul
     101: d2l
     102: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
     105: astore        4
     107: aload_1
     108: aload_0
     109: getfield      #5                  // Field maxHeapSize:J
     112: l2d
     113: ldc2_w        #42                 // double 0.4d
     116: dmul
     117: ldc2_w        #66                 // double 0.8d
     120: dmul
     121: d2l
     122: invokevirtual #44                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.setTestBlockSize:(J)V
     125: aload_3
     126: aload_0
     127: getfield      #5                  // Field maxHeapSize:J
     130: l2d
     131: ldc2_w        #42                 // double 0.4d
     134: dmul
     135: ldc2_w        #66                 // double 0.8d
     138: dmul
     139: d2l
     140: invokevirtual #45                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub.setTestMemstoreSize:(J)V
     143: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
     146: dup
     147: aload_1
     148: aload         4
     150: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
     153: dup
     154: aload_2
     155: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     158: aload_3
     159: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
     162: astore        5
     164: aload         4
     166: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     169: lstore        6
     171: aload_1
     172: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     175: lstore        8
     177: ldc           #68                 // float 0.00125f
     179: fstore        10
     181: new           #51                 // class org/apache/hadoop/hbase/ChoreService
     184: dup
     185: ldc           #52                 // String TEST_SERVER_NAME
     187: invokespecial #53                 // Method org/apache/hadoop/hbase/ChoreService."<init>":(Ljava/lang/String;)V
     190: astore        11
     192: aload         5
     194: aload         11
     196: invokevirtual #54                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager.start:(Lorg/apache/hadoop/hbase/ChoreService;)V
     199: aload_1
     200: aconst_null
     201: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     204: pop
     205: aload_1
     206: aconst_null
     207: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     210: pop
     211: aload_1
     212: aconst_null
     213: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     216: pop
     217: aload         4
     219: getstatic     #70                 // Field org/apache/hadoop/hbase/regionserver/FlushType.ABOVE_OFFHEAP_HIGHER_MARK:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     222: putfield      #56                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.flushType:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     225: aload         4
     227: aconst_null
     228: iconst_0
     229: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     232: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     235: pop
     236: aload         4
     238: aconst_null
     239: iconst_0
     240: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     243: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     246: pop
     247: aload         4
     249: aconst_null
     250: iconst_0
     251: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     254: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     257: pop
     258: aload         4
     260: aconst_null
     261: iconst_0
     262: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     265: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     268: pop
     269: aload_0
     270: aload         4
     272: aload         4
     274: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     277: invokespecial #71                 // Method waitForTune:(Lorg/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub;J)V
     280: aload_0
     281: fload         10
     283: fneg
     284: f2d
     285: lload         6
     287: aload         4
     289: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     292: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     295: aload_0
     296: fload         10
     298: f2d
     299: lload         8
     301: aload_1
     302: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     305: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     308: aload         4
     310: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     313: lstore        6
     315: aload_1
     316: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     319: lstore        8
     321: aload         4
     323: getstatic     #55                 // Field org/apache/hadoop/hbase/regionserver/FlushType.ABOVE_ONHEAP_HIGHER_MARK:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     326: putfield      #56                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.flushType:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     329: aload         4
     331: aconst_null
     332: iconst_0
     333: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     336: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     339: pop
     340: aload         4
     342: aconst_null
     343: iconst_0
     344: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     347: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     350: pop
     351: aload         4
     353: aconst_null
     354: iconst_0
     355: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     358: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     361: pop
     362: aload         4
     364: aconst_null
     365: iconst_0
     366: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     369: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     372: pop
     373: aload_0
     374: aload         4
     376: aload         4
     378: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     381: invokespecial #71                 // Method waitForTune:(Lorg/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub;J)V
     384: aload_0
     385: fload         10
     387: f2d
     388: lload         6
     390: aload         4
     392: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     395: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     398: aload_0
     399: fload         10
     401: fneg
     402: f2d
     403: lload         8
     405: aload_1
     406: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     409: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     412: return

  public void testWhenClusterIsReadHeavyWithEmptyBlockCache() throws java.lang.Exception;
    Code:
       0: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
       3: dup
       4: aload_0
       5: getfield      #5                  // Field maxHeapSize:J
       8: l2d
       9: ldc2_w        #42                 // double 0.4d
      12: dmul
      13: d2l
      14: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
      17: astore_1
      18: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
      21: astore_2
      22: aload_2
      23: ldc           #29                 // String hbase.regionserver.global.memstore.size.max.range
      25: ldc           #13                 // float 0.75f
      27: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      30: aload_2
      31: ldc           #30                 // String hbase.regionserver.global.memstore.size.min.range
      33: ldc           #36                 // float 0.1f
      35: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      38: aload_2
      39: ldc           #12                 // String hfile.block.cache.size.max.range
      41: ldc           #35                 // float 0.7f
      43: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      46: aload_2
      47: ldc           #14                 // String hfile.block.cache.size.min.range
      49: ldc           #37                 // float 0.05f
      51: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      54: aload_2
      55: ldc           #38                 // String hbase.regionserver.heapmemory.tuner.period
      57: ldc2_w        #39                 // long 1000l
      60: invokevirtual #41                 // Method org/apache/hadoop/conf/Configuration.setLong:(Ljava/lang/String;J)V
      63: aload_2
      64: ldc           #47                 // String hbase.regionserver.heapmemory.autotuner.ignored.periods
      66: iconst_0
      67: invokevirtual #48                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      70: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
      73: dup
      74: aload_2
      75: invokespecial #17                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
      78: astore_3
      79: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      82: dup
      83: aload_0
      84: getfield      #5                  // Field maxHeapSize:J
      87: l2d
      88: ldc2_w        #42                 // double 0.4d
      91: dmul
      92: d2l
      93: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
      96: astore        4
      98: aload_1
      99: lconst_0
     100: invokevirtual #44                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.setTestBlockSize:(J)V
     103: aload_3
     104: lconst_0
     105: invokevirtual #45                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub.setTestMemstoreSize:(J)V
     108: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
     111: dup
     112: aload_1
     113: aload         4
     115: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
     118: dup
     119: aload_2
     120: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     123: aload_3
     124: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
     127: astore        5
     129: aload         4
     131: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     134: lstore        6
     136: aload_1
     137: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     140: lstore        8
     142: new           #51                 // class org/apache/hadoop/hbase/ChoreService
     145: dup
     146: ldc           #52                 // String TEST_SERVER_NAME
     148: invokespecial #53                 // Method org/apache/hadoop/hbase/ChoreService."<init>":(Ljava/lang/String;)V
     151: astore        10
     153: aload         5
     155: aload         10
     157: invokevirtual #54                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager.start:(Lorg/apache/hadoop/hbase/ChoreService;)V
     160: aload_1
     161: aconst_null
     162: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     165: pop
     166: aload_1
     167: aconst_null
     168: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     171: pop
     172: aload_1
     173: aconst_null
     174: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     177: pop
     178: ldc2_w        #60                 // long 1500l
     181: invokestatic  #62                 // Method java/lang/Thread.sleep:(J)V
     184: lload         6
     186: aload         4
     188: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     191: invokestatic  #63                 // Method org/junit/Assert.assertEquals:(JJ)V
     194: lload         8
     196: aload_1
     197: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     200: invokestatic  #63                 // Method org/junit/Assert.assertEquals:(JJ)V
     203: return

  public void testWhenClusterIsWriteHeavy() throws java.lang.Exception;
    Code:
       0: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
       3: dup
       4: aload_0
       5: getfield      #5                  // Field maxHeapSize:J
       8: l2d
       9: ldc2_w        #42                 // double 0.4d
      12: dmul
      13: d2l
      14: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
      17: astore_1
      18: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
      21: astore_2
      22: aload_2
      23: ldc           #29                 // String hbase.regionserver.global.memstore.size.max.range
      25: ldc           #13                 // float 0.75f
      27: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      30: aload_2
      31: ldc           #30                 // String hbase.regionserver.global.memstore.size.min.range
      33: ldc           #36                 // float 0.1f
      35: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      38: aload_2
      39: ldc           #12                 // String hfile.block.cache.size.max.range
      41: ldc           #35                 // float 0.7f
      43: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      46: aload_2
      47: ldc           #14                 // String hfile.block.cache.size.min.range
      49: ldc           #37                 // float 0.05f
      51: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      54: aload_2
      55: ldc           #38                 // String hbase.regionserver.heapmemory.tuner.period
      57: ldc2_w        #39                 // long 1000l
      60: invokevirtual #41                 // Method org/apache/hadoop/conf/Configuration.setLong:(Ljava/lang/String;J)V
      63: aload_2
      64: ldc           #47                 // String hbase.regionserver.heapmemory.autotuner.ignored.periods
      66: iconst_0
      67: invokevirtual #48                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      70: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
      73: dup
      74: aload_2
      75: invokespecial #17                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
      78: astore_3
      79: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      82: dup
      83: aload_0
      84: getfield      #5                  // Field maxHeapSize:J
      87: l2d
      88: ldc2_w        #42                 // double 0.4d
      91: dmul
      92: d2l
      93: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
      96: astore        4
      98: aload_1
      99: lconst_0
     100: invokevirtual #44                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.setTestBlockSize:(J)V
     103: aload_3
     104: aload_0
     105: getfield      #5                  // Field maxHeapSize:J
     108: l2d
     109: ldc2_w        #42                 // double 0.4d
     112: dmul
     113: ldc2_w        #66                 // double 0.8d
     116: dmul
     117: d2l
     118: invokevirtual #45                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub.setTestMemstoreSize:(J)V
     121: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
     124: dup
     125: aload_1
     126: aload         4
     128: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
     131: dup
     132: aload_2
     133: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     136: aload_3
     137: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
     140: astore        5
     142: aload         4
     144: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     147: lstore        6
     149: aload_1
     150: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     153: lstore        8
     155: new           #51                 // class org/apache/hadoop/hbase/ChoreService
     158: dup
     159: ldc           #52                 // String TEST_SERVER_NAME
     161: invokespecial #53                 // Method org/apache/hadoop/hbase/ChoreService."<init>":(Ljava/lang/String;)V
     164: astore        10
     166: aload         5
     168: aload         10
     170: invokevirtual #54                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager.start:(Lorg/apache/hadoop/hbase/ChoreService;)V
     173: aload         4
     175: getstatic     #59                 // Field org/apache/hadoop/hbase/regionserver/FlushType.ABOVE_ONHEAP_LOWER_MARK:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     178: putfield      #56                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.flushType:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     181: aload         4
     183: aconst_null
     184: iconst_0
     185: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     188: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     191: pop
     192: aload         4
     194: aconst_null
     195: iconst_0
     196: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     199: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     202: pop
     203: aload         4
     205: aconst_null
     206: iconst_0
     207: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     210: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     213: pop
     214: aload         4
     216: aconst_null
     217: iconst_0
     218: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     221: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     224: pop
     225: aload_0
     226: aload         4
     228: aload         4
     230: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     233: invokespecial #71                 // Method waitForTune:(Lorg/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub;J)V
     236: aload_0
     237: ldc2_w        #73                 // double 0.03999999910593033d
     240: lload         6
     242: aload         4
     244: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     247: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     250: aload_0
     251: ldc2_w        #75                 // double -0.03999999910593033d
     254: lload         8
     256: aload_1
     257: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     260: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     263: aload         4
     265: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     268: lstore        6
     270: aload_1
     271: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     274: lstore        8
     276: aload         4
     278: getstatic     #59                 // Field org/apache/hadoop/hbase/regionserver/FlushType.ABOVE_ONHEAP_LOWER_MARK:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     281: putfield      #56                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.flushType:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     284: aload         4
     286: aconst_null
     287: iconst_0
     288: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     291: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     294: pop
     295: aload         4
     297: aconst_null
     298: iconst_0
     299: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     302: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     305: pop
     306: aload_0
     307: aload         4
     309: aload         4
     311: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     314: invokespecial #71                 // Method waitForTune:(Lorg/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub;J)V
     317: aload_0
     318: ldc2_w        #73                 // double 0.03999999910593033d
     321: lload         6
     323: aload         4
     325: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     328: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     331: aload_0
     332: ldc2_w        #75                 // double -0.03999999910593033d
     335: lload         8
     337: aload_1
     338: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     341: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     344: return

  public void testWhenClusterIsWriteHeavyWithOffheapMemstore() throws java.lang.Exception;
    Code:
       0: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
       3: dup
       4: aload_0
       5: getfield      #5                  // Field maxHeapSize:J
       8: l2d
       9: ldc2_w        #42                 // double 0.4d
      12: dmul
      13: d2l
      14: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
      17: astore_1
      18: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
      21: astore_2
      22: aload_2
      23: ldc           #29                 // String hbase.regionserver.global.memstore.size.max.range
      25: ldc           #13                 // float 0.75f
      27: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      30: aload_2
      31: ldc           #30                 // String hbase.regionserver.global.memstore.size.min.range
      33: ldc           #36                 // float 0.1f
      35: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      38: aload_2
      39: ldc           #12                 // String hfile.block.cache.size.max.range
      41: ldc           #35                 // float 0.7f
      43: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      46: aload_2
      47: ldc           #14                 // String hfile.block.cache.size.min.range
      49: ldc           #37                 // float 0.05f
      51: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      54: aload_2
      55: ldc           #38                 // String hbase.regionserver.heapmemory.tuner.period
      57: ldc2_w        #39                 // long 1000l
      60: invokevirtual #41                 // Method org/apache/hadoop/conf/Configuration.setLong:(Ljava/lang/String;J)V
      63: aload_2
      64: ldc           #47                 // String hbase.regionserver.heapmemory.autotuner.ignored.periods
      66: iconst_0
      67: invokevirtual #48                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      70: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
      73: dup
      74: aload_2
      75: invokespecial #17                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
      78: astore_3
      79: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      82: dup
      83: aload_0
      84: getfield      #5                  // Field maxHeapSize:J
      87: l2d
      88: ldc2_w        #42                 // double 0.4d
      91: dmul
      92: d2l
      93: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
      96: astore        4
      98: aload_1
      99: lconst_0
     100: invokevirtual #44                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.setTestBlockSize:(J)V
     103: aload_3
     104: aload_0
     105: getfield      #5                  // Field maxHeapSize:J
     108: l2d
     109: ldc2_w        #42                 // double 0.4d
     112: dmul
     113: ldc2_w        #66                 // double 0.8d
     116: dmul
     117: d2l
     118: invokevirtual #45                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub.setTestMemstoreSize:(J)V
     121: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
     124: dup
     125: aload_1
     126: aload         4
     128: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
     131: dup
     132: aload_2
     133: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     136: aload_3
     137: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
     140: astore        5
     142: aload         4
     144: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     147: lstore        6
     149: aload_1
     150: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     153: lstore        8
     155: new           #51                 // class org/apache/hadoop/hbase/ChoreService
     158: dup
     159: ldc           #52                 // String TEST_SERVER_NAME
     161: invokespecial #53                 // Method org/apache/hadoop/hbase/ChoreService."<init>":(Ljava/lang/String;)V
     164: astore        10
     166: aload         5
     168: aload         10
     170: invokevirtual #54                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager.start:(Lorg/apache/hadoop/hbase/ChoreService;)V
     173: aload         4
     175: getstatic     #70                 // Field org/apache/hadoop/hbase/regionserver/FlushType.ABOVE_OFFHEAP_HIGHER_MARK:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     178: putfield      #56                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.flushType:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     181: aload         4
     183: aconst_null
     184: iconst_0
     185: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     188: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     191: pop
     192: aload         4
     194: aconst_null
     195: iconst_0
     196: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     199: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     202: pop
     203: aload         4
     205: aconst_null
     206: iconst_0
     207: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     210: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     213: pop
     214: aload         4
     216: aconst_null
     217: iconst_0
     218: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     221: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     224: pop
     225: ldc2_w        #60                 // long 1500l
     228: invokestatic  #62                 // Method java/lang/Thread.sleep:(J)V
     231: lload         6
     233: aload         4
     235: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     238: invokestatic  #63                 // Method org/junit/Assert.assertEquals:(JJ)V
     241: lload         8
     243: aload_1
     244: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     247: invokestatic  #63                 // Method org/junit/Assert.assertEquals:(JJ)V
     250: return

  public void testWhenClusterIsReadHeavy() throws java.lang.Exception;
    Code:
       0: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
       3: dup
       4: aload_0
       5: getfield      #5                  // Field maxHeapSize:J
       8: l2d
       9: ldc2_w        #42                 // double 0.4d
      12: dmul
      13: d2l
      14: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
      17: astore_1
      18: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
      21: astore_2
      22: aload_2
      23: ldc           #64                 // String hbase.regionserver.global.memstore.size.lower.limit
      25: ldc           #35                 // float 0.7f
      27: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      30: aload_2
      31: ldc           #29                 // String hbase.regionserver.global.memstore.size.max.range
      33: ldc           #13                 // float 0.75f
      35: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      38: aload_2
      39: ldc           #30                 // String hbase.regionserver.global.memstore.size.min.range
      41: ldc           #36                 // float 0.1f
      43: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      46: aload_2
      47: ldc           #12                 // String hfile.block.cache.size.max.range
      49: ldc           #35                 // float 0.7f
      51: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      54: aload_2
      55: ldc           #14                 // String hfile.block.cache.size.min.range
      57: ldc           #37                 // float 0.05f
      59: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      62: aload_2
      63: ldc           #38                 // String hbase.regionserver.heapmemory.tuner.period
      65: ldc2_w        #39                 // long 1000l
      68: invokevirtual #41                 // Method org/apache/hadoop/conf/Configuration.setLong:(Ljava/lang/String;J)V
      71: aload_2
      72: ldc           #47                 // String hbase.regionserver.heapmemory.autotuner.ignored.periods
      74: iconst_0
      75: invokevirtual #48                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      78: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
      81: dup
      82: aload_2
      83: invokespecial #17                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
      86: astore_3
      87: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      90: dup
      91: aload_0
      92: getfield      #5                  // Field maxHeapSize:J
      95: l2d
      96: ldc2_w        #42                 // double 0.4d
      99: dmul
     100: d2l
     101: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
     104: astore        4
     106: aload_1
     107: aload_0
     108: getfield      #5                  // Field maxHeapSize:J
     111: l2d
     112: ldc2_w        #42                 // double 0.4d
     115: dmul
     116: ldc2_w        #66                 // double 0.8d
     119: dmul
     120: d2l
     121: invokevirtual #44                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.setTestBlockSize:(J)V
     124: aload_3
     125: lconst_0
     126: invokevirtual #45                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub.setTestMemstoreSize:(J)V
     129: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
     132: dup
     133: aload_1
     134: aload         4
     136: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
     139: dup
     140: aload_2
     141: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     144: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
     147: dup
     148: aload_2
     149: invokespecial #17                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     152: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
     155: astore        5
     157: aload         4
     159: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     162: lstore        6
     164: aload_1
     165: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     168: lstore        8
     170: ldc2_w        #77                 // long 7l
     173: lload         6
     175: lmul
     176: ldc2_w        #79                 // long 10l
     179: ldiv
     180: lstore        10
     182: lload         6
     184: lload         10
     186: lload         6
     188: ladd
     189: ldc2_w        #81                 // long 2l
     192: ldiv
     193: lsub
     194: lstore        12
     196: lload         12
     198: l2f
     199: fconst_1
     200: fmul
     201: lload         6
     203: l2f
     204: fdiv
     205: fstore        14
     207: fload         14
     209: ldc           #83                 // float 0.04f
     211: fcmpl
     212: ifle          220
     215: ldc           #83                 // float 0.04f
     217: goto          222
     220: fload         14
     222: fstore        14
     224: new           #51                 // class org/apache/hadoop/hbase/ChoreService
     227: dup
     228: ldc           #52                 // String TEST_SERVER_NAME
     230: invokespecial #53                 // Method org/apache/hadoop/hbase/ChoreService."<init>":(Ljava/lang/String;)V
     233: astore        15
     235: aload         5
     237: aload         15
     239: invokevirtual #54                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager.start:(Lorg/apache/hadoop/hbase/ChoreService;)V
     242: aload_1
     243: aconst_null
     244: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     247: pop
     248: aload_1
     249: aconst_null
     250: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     253: pop
     254: aload_1
     255: aconst_null
     256: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     259: pop
     260: aload_0
     261: aload         4
     263: aload         4
     265: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     268: invokespecial #71                 // Method waitForTune:(Lorg/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub;J)V
     271: aload_0
     272: fload         14
     274: fneg
     275: f2d
     276: lload         6
     278: aload         4
     280: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     283: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     286: aload_0
     287: fload         14
     289: f2d
     290: lload         8
     292: aload_1
     293: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     296: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     299: aload         4
     301: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     304: lstore        6
     306: aload_1
     307: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     310: lstore        8
     312: ldc2_w        #77                 // long 7l
     315: lload         6
     317: lmul
     318: ldc2_w        #79                 // long 10l
     321: ldiv
     322: lstore        10
     324: lload         6
     326: lload         10
     328: lload         6
     330: ladd
     331: ldc2_w        #81                 // long 2l
     334: ldiv
     335: lsub
     336: lstore        12
     338: lload         12
     340: l2f
     341: fconst_1
     342: fmul
     343: lload         6
     345: l2f
     346: fdiv
     347: fstore        14
     349: fload         14
     351: ldc           #83                 // float 0.04f
     353: fcmpl
     354: ifle          362
     357: ldc           #83                 // float 0.04f
     359: goto          364
     362: fload         14
     364: fstore        14
     366: aload_1
     367: aconst_null
     368: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     371: pop
     372: aload_0
     373: aload         4
     375: aload         4
     377: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     380: invokespecial #71                 // Method waitForTune:(Lorg/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub;J)V
     383: aload_0
     384: fload         14
     386: fneg
     387: f2d
     388: lload         6
     390: aload         4
     392: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     395: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     398: aload_0
     399: fload         14
     401: f2d
     402: lload         8
     404: aload_1
     405: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     408: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     411: return

  public void testWhenClusterIsHavingMoreWritesThanReads() throws java.lang.Exception;
    Code:
       0: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
       3: dup
       4: aload_0
       5: getfield      #5                  // Field maxHeapSize:J
       8: l2d
       9: ldc2_w        #42                 // double 0.4d
      12: dmul
      13: d2l
      14: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
      17: astore_1
      18: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
      21: astore_2
      22: aload_2
      23: ldc           #29                 // String hbase.regionserver.global.memstore.size.max.range
      25: ldc           #13                 // float 0.75f
      27: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      30: aload_2
      31: ldc           #30                 // String hbase.regionserver.global.memstore.size.min.range
      33: ldc           #36                 // float 0.1f
      35: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      38: aload_2
      39: ldc           #12                 // String hfile.block.cache.size.max.range
      41: ldc           #35                 // float 0.7f
      43: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      46: aload_2
      47: ldc           #14                 // String hfile.block.cache.size.min.range
      49: ldc           #37                 // float 0.05f
      51: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      54: aload_2
      55: ldc           #38                 // String hbase.regionserver.heapmemory.tuner.period
      57: ldc2_w        #39                 // long 1000l
      60: invokevirtual #41                 // Method org/apache/hadoop/conf/Configuration.setLong:(Ljava/lang/String;J)V
      63: aload_2
      64: ldc           #47                 // String hbase.regionserver.heapmemory.autotuner.ignored.periods
      66: iconst_0
      67: invokevirtual #48                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      70: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
      73: dup
      74: aload_2
      75: invokespecial #17                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
      78: astore_3
      79: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      82: dup
      83: aload_0
      84: getfield      #5                  // Field maxHeapSize:J
      87: l2d
      88: ldc2_w        #42                 // double 0.4d
      91: dmul
      92: d2l
      93: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
      96: astore        4
      98: aload_1
      99: lconst_0
     100: invokevirtual #44                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.setTestBlockSize:(J)V
     103: aload_3
     104: aload_0
     105: getfield      #5                  // Field maxHeapSize:J
     108: l2d
     109: ldc2_w        #42                 // double 0.4d
     112: dmul
     113: ldc2_w        #66                 // double 0.8d
     116: dmul
     117: d2l
     118: invokevirtual #45                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub.setTestMemstoreSize:(J)V
     121: aload_1
     122: aload_0
     123: getfield      #5                  // Field maxHeapSize:J
     126: l2d
     127: ldc2_w        #42                 // double 0.4d
     130: dmul
     131: ldc2_w        #66                 // double 0.8d
     134: dmul
     135: d2l
     136: invokevirtual #44                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.setTestBlockSize:(J)V
     139: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
     142: dup
     143: aload_1
     144: aload         4
     146: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
     149: dup
     150: aload_2
     151: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     154: aload_3
     155: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
     158: astore        5
     160: aload         4
     162: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     165: lstore        6
     167: aload_1
     168: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     171: lstore        8
     173: new           #51                 // class org/apache/hadoop/hbase/ChoreService
     176: dup
     177: ldc           #52                 // String TEST_SERVER_NAME
     179: invokespecial #53                 // Method org/apache/hadoop/hbase/ChoreService."<init>":(Ljava/lang/String;)V
     182: astore        10
     184: aload         5
     186: aload         10
     188: invokevirtual #54                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager.start:(Lorg/apache/hadoop/hbase/ChoreService;)V
     191: aload         4
     193: getstatic     #59                 // Field org/apache/hadoop/hbase/regionserver/FlushType.ABOVE_ONHEAP_LOWER_MARK:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     196: putfield      #56                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.flushType:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     199: aload         4
     201: aconst_null
     202: iconst_0
     203: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     206: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     209: pop
     210: aload         4
     212: aconst_null
     213: iconst_0
     214: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     217: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     220: pop
     221: aload         4
     223: aconst_null
     224: iconst_0
     225: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     228: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     231: pop
     232: aload_1
     233: aconst_null
     234: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     237: pop
     238: ldc2_w        #60                 // long 1500l
     241: invokestatic  #62                 // Method java/lang/Thread.sleep:(J)V
     244: lload         6
     246: aload         4
     248: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     251: invokestatic  #63                 // Method org/junit/Assert.assertEquals:(JJ)V
     254: lload         8
     256: aload_1
     257: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     260: invokestatic  #63                 // Method org/junit/Assert.assertEquals:(JJ)V
     263: aload         4
     265: getstatic     #59                 // Field org/apache/hadoop/hbase/regionserver/FlushType.ABOVE_ONHEAP_LOWER_MARK:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     268: putfield      #56                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.flushType:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     271: aload         4
     273: aconst_null
     274: iconst_0
     275: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     278: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     281: pop
     282: aload         4
     284: aconst_null
     285: iconst_0
     286: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     289: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     292: pop
     293: aload         4
     295: aconst_null
     296: iconst_0
     297: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     300: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     303: pop
     304: aload_0
     305: aload         4
     307: aload         4
     309: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     312: invokespecial #71                 // Method waitForTune:(Lorg/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub;J)V
     315: aload_0
     316: ldc2_w        #73                 // double 0.03999999910593033d
     319: lload         6
     321: aload         4
     323: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     326: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     329: aload_0
     330: ldc2_w        #75                 // double -0.03999999910593033d
     333: lload         8
     335: aload_1
     336: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     339: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     342: return

  public void testBlockedFlushesIncreaseMemstoreInSteadyState() throws java.lang.Exception;
    Code:
       0: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
       3: dup
       4: aload_0
       5: getfield      #5                  // Field maxHeapSize:J
       8: l2d
       9: ldc2_w        #42                 // double 0.4d
      12: dmul
      13: d2l
      14: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
      17: astore_1
      18: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      21: dup
      22: aload_0
      23: getfield      #5                  // Field maxHeapSize:J
      26: l2d
      27: ldc2_w        #42                 // double 0.4d
      30: dmul
      31: d2l
      32: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
      35: astore_2
      36: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
      39: astore_3
      40: aload_3
      41: ldc           #29                 // String hbase.regionserver.global.memstore.size.max.range
      43: ldc           #13                 // float 0.75f
      45: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      48: aload_3
      49: ldc           #30                 // String hbase.regionserver.global.memstore.size.min.range
      51: ldc           #36                 // float 0.1f
      53: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      56: aload_3
      57: ldc           #12                 // String hfile.block.cache.size.max.range
      59: ldc           #35                 // float 0.7f
      61: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      64: aload_3
      65: ldc           #14                 // String hfile.block.cache.size.min.range
      67: ldc           #37                 // float 0.05f
      69: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      72: aload_3
      73: ldc           #38                 // String hbase.regionserver.heapmemory.tuner.period
      75: ldc2_w        #39                 // long 1000l
      78: invokevirtual #41                 // Method org/apache/hadoop/conf/Configuration.setLong:(Ljava/lang/String;J)V
      81: aload_3
      82: ldc           #47                 // String hbase.regionserver.heapmemory.autotuner.ignored.periods
      84: iconst_0
      85: invokevirtual #48                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      88: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
      91: dup
      92: aload_3
      93: invokespecial #17                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
      96: astore        4
      98: aload_1
      99: lconst_0
     100: invokevirtual #44                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.setTestBlockSize:(J)V
     103: aload         4
     105: aload_0
     106: getfield      #5                  // Field maxHeapSize:J
     109: l2d
     110: ldc2_w        #42                 // double 0.4d
     113: dmul
     114: ldc2_w        #66                 // double 0.8d
     117: dmul
     118: d2l
     119: invokevirtual #45                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub.setTestMemstoreSize:(J)V
     122: aload_1
     123: aload_0
     124: getfield      #5                  // Field maxHeapSize:J
     127: l2d
     128: ldc2_w        #42                 // double 0.4d
     131: dmul
     132: ldc2_w        #66                 // double 0.8d
     135: dmul
     136: d2l
     137: invokevirtual #44                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.setTestBlockSize:(J)V
     140: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
     143: dup
     144: aload_1
     145: aload_2
     146: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
     149: dup
     150: aload_3
     151: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     154: aload         4
     156: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
     159: astore        5
     161: aload_2
     162: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     165: lstore        6
     167: aload_1
     168: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     171: lstore        8
     173: new           #51                 // class org/apache/hadoop/hbase/ChoreService
     176: dup
     177: ldc           #52                 // String TEST_SERVER_NAME
     179: invokespecial #53                 // Method org/apache/hadoop/hbase/ChoreService."<init>":(Ljava/lang/String;)V
     182: astore        10
     184: aload         5
     186: aload         10
     188: invokevirtual #54                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager.start:(Lorg/apache/hadoop/hbase/ChoreService;)V
     191: aload_2
     192: getstatic     #59                 // Field org/apache/hadoop/hbase/regionserver/FlushType.ABOVE_ONHEAP_LOWER_MARK:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     195: putfield      #56                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.flushType:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     198: aload_2
     199: aconst_null
     200: iconst_0
     201: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     204: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     207: pop
     208: aload_2
     209: aconst_null
     210: iconst_0
     211: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     214: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     217: pop
     218: aload_2
     219: aconst_null
     220: iconst_0
     221: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     224: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     227: pop
     228: aload_1
     229: aconst_null
     230: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     233: pop
     234: aload_1
     235: aconst_null
     236: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     239: pop
     240: ldc2_w        #60                 // long 1500l
     243: invokestatic  #62                 // Method java/lang/Thread.sleep:(J)V
     246: lload         6
     248: aload_2
     249: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     252: invokestatic  #63                 // Method org/junit/Assert.assertEquals:(JJ)V
     255: lload         8
     257: aload_1
     258: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     261: invokestatic  #63                 // Method org/junit/Assert.assertEquals:(JJ)V
     264: aload_2
     265: getstatic     #55                 // Field org/apache/hadoop/hbase/regionserver/FlushType.ABOVE_ONHEAP_HIGHER_MARK:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     268: putfield      #56                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.flushType:Lorg/apache/hadoop/hbase/regionserver/FlushType;
     271: aload_2
     272: aconst_null
     273: iconst_0
     274: getstatic     #57                 // Field org/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;
     277: invokevirtual #58                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.requestFlush:(Lorg/apache/hadoop/hbase/regionserver/HRegion;ZLorg/apache/hadoop/hbase/regionserver/FlushLifeCycleTracker;)Z
     280: pop
     281: aload_1
     282: aconst_null
     283: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     286: pop
     287: aload_1
     288: aconst_null
     289: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     292: pop
     293: aload_1
     294: aconst_null
     295: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     298: pop
     299: aload_1
     300: aconst_null
     301: invokevirtual #69                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.evictBlock:(Lorg/apache/hadoop/hbase/io/hfile/BlockCacheKey;)Z
     304: pop
     305: ldc2_w        #60                 // long 1500l
     308: invokestatic  #62                 // Method java/lang/Thread.sleep:(J)V
     311: aload_0
     312: ldc2_w        #73                 // double 0.03999999910593033d
     315: lload         6
     317: aload_2
     318: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     321: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     324: aload_0
     325: ldc2_w        #75                 // double -0.03999999910593033d
     328: lload         8
     330: aload_1
     331: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     334: invokespecial #72                 // Method assertHeapSpaceDelta:(DJJ)V
     337: return

  public void testPluggingInHeapMemoryTuner() throws java.lang.Exception;
    Code:
       0: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
       3: dup
       4: aload_0
       5: getfield      #5                  // Field maxHeapSize:J
       8: l2d
       9: ldc2_w        #42                 // double 0.4d
      12: dmul
      13: d2l
      14: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
      17: astore_1
      18: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      21: dup
      22: aload_0
      23: getfield      #5                  // Field maxHeapSize:J
      26: l2d
      27: ldc2_w        #42                 // double 0.4d
      30: dmul
      31: d2l
      32: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
      35: astore_2
      36: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
      39: astore_3
      40: aload_3
      41: ldc           #29                 // String hbase.regionserver.global.memstore.size.max.range
      43: ldc           #84                 // float 0.78f
      45: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      48: aload_3
      49: ldc           #30                 // String hbase.regionserver.global.memstore.size.min.range
      51: ldc           #37                 // float 0.05f
      53: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      56: aload_3
      57: ldc           #12                 // String hfile.block.cache.size.max.range
      59: ldc           #13                 // float 0.75f
      61: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      64: aload_3
      65: ldc           #14                 // String hfile.block.cache.size.min.range
      67: ldc           #9                  // float 0.02f
      69: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      72: aload_3
      73: ldc           #38                 // String hbase.regionserver.heapmemory.tuner.period
      75: ldc2_w        #39                 // long 1000l
      78: invokevirtual #41                 // Method org/apache/hadoop/conf/Configuration.setLong:(Ljava/lang/String;J)V
      81: aload_3
      82: ldc           #47                 // String hbase.regionserver.heapmemory.autotuner.ignored.periods
      84: iconst_0
      85: invokevirtual #48                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      88: aload_3
      89: ldc           #85                 // String hbase.regionserver.heapmemory.tuner.class
      91: ldc           #86                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$CustomHeapMemoryTuner
      93: ldc           #87                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryTuner
      95: invokevirtual #88                 // Method org/apache/hadoop/conf/Configuration.setClass:(Ljava/lang/String;Ljava/lang/Class;Ljava/lang/Class;)V
      98: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
     101: dup
     102: aload_1
     103: aload_2
     104: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
     107: dup
     108: aload_3
     109: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     112: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
     115: dup
     116: aload_3
     117: invokespecial #17                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     120: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
     123: astore        4
     125: new           #51                 // class org/apache/hadoop/hbase/ChoreService
     128: dup
     129: ldc           #52                 // String TEST_SERVER_NAME
     131: invokespecial #53                 // Method org/apache/hadoop/hbase/ChoreService."<init>":(Ljava/lang/String;)V
     134: astore        5
     136: aload         4
     138: aload         5
     140: invokevirtual #54                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager.start:(Lorg/apache/hadoop/hbase/ChoreService;)V
     143: ldc           #84                 // float 0.78f
     145: putstatic     #89                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$CustomHeapMemoryTuner.memstoreSize:F
     148: ldc           #9                  // float 0.02f
     150: putstatic     #90                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$CustomHeapMemoryTuner.blockCacheSize:F
     153: aload_0
     154: aload_2
     155: aload_2
     156: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     159: invokespecial #71                 // Method waitForTune:(Lorg/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub;J)V
     162: aload_0
     163: ldc           #84                 // float 0.78f
     165: aload_2
     166: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     169: invokespecial #91                 // Method assertHeapSpace:(FJ)V
     172: aload_0
     173: ldc           #9                  // float 0.02f
     175: aload_1
     176: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     179: invokespecial #91                 // Method assertHeapSpace:(FJ)V
     182: ldc           #13                 // float 0.75f
     184: putstatic     #90                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$CustomHeapMemoryTuner.blockCacheSize:F
     187: ldc           #37                 // float 0.05f
     189: putstatic     #89                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$CustomHeapMemoryTuner.memstoreSize:F
     192: aload_0
     193: aload_2
     194: aload_2
     195: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     198: invokespecial #71                 // Method waitForTune:(Lorg/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub;J)V
     201: aload_0
     202: ldc           #13                 // float 0.75f
     204: aload_1
     205: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     208: invokespecial #91                 // Method assertHeapSpace:(FJ)V
     211: aload_0
     212: ldc           #37                 // float 0.05f
     214: aload_2
     215: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     218: invokespecial #91                 // Method assertHeapSpace:(FJ)V
     221: return

  public void testWhenSizeGivenByHeapTunerGoesOutsideRange() throws java.lang.Exception;
    Code:
       0: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
       3: dup
       4: aload_0
       5: getfield      #5                  // Field maxHeapSize:J
       8: l2d
       9: ldc2_w        #42                 // double 0.4d
      12: dmul
      13: d2l
      14: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
      17: astore_1
      18: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      21: dup
      22: aload_0
      23: getfield      #5                  // Field maxHeapSize:J
      26: l2d
      27: ldc2_w        #42                 // double 0.4d
      30: dmul
      31: d2l
      32: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
      35: astore_2
      36: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
      39: astore_3
      40: aload_3
      41: ldc           #29                 // String hbase.regionserver.global.memstore.size.max.range
      43: ldc           #35                 // float 0.7f
      45: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      48: aload_3
      49: ldc           #30                 // String hbase.regionserver.global.memstore.size.min.range
      51: ldc           #36                 // float 0.1f
      53: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      56: aload_3
      57: ldc           #12                 // String hfile.block.cache.size.max.range
      59: ldc           #35                 // float 0.7f
      61: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      64: aload_3
      65: ldc           #14                 // String hfile.block.cache.size.min.range
      67: ldc           #36                 // float 0.1f
      69: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      72: aload_3
      73: ldc           #38                 // String hbase.regionserver.heapmemory.tuner.period
      75: ldc2_w        #39                 // long 1000l
      78: invokevirtual #41                 // Method org/apache/hadoop/conf/Configuration.setLong:(Ljava/lang/String;J)V
      81: aload_3
      82: ldc           #47                 // String hbase.regionserver.heapmemory.autotuner.ignored.periods
      84: iconst_0
      85: invokevirtual #48                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      88: aload_3
      89: ldc           #85                 // String hbase.regionserver.heapmemory.tuner.class
      91: ldc           #86                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$CustomHeapMemoryTuner
      93: ldc           #87                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryTuner
      95: invokevirtual #88                 // Method org/apache/hadoop/conf/Configuration.setClass:(Ljava/lang/String;Ljava/lang/Class;Ljava/lang/Class;)V
      98: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
     101: dup
     102: aload_1
     103: aload_2
     104: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
     107: dup
     108: aload_3
     109: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     112: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
     115: dup
     116: aload_3
     117: invokespecial #17                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     120: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
     123: astore        4
     125: new           #51                 // class org/apache/hadoop/hbase/ChoreService
     128: dup
     129: ldc           #52                 // String TEST_SERVER_NAME
     131: invokespecial #53                 // Method org/apache/hadoop/hbase/ChoreService."<init>":(Ljava/lang/String;)V
     134: astore        5
     136: aload         4
     138: aload         5
     140: invokevirtual #54                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager.start:(Lorg/apache/hadoop/hbase/ChoreService;)V
     143: ldc           #84                 // float 0.78f
     145: putstatic     #89                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$CustomHeapMemoryTuner.memstoreSize:F
     148: ldc           #9                  // float 0.02f
     150: putstatic     #90                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$CustomHeapMemoryTuner.blockCacheSize:F
     153: ldc2_w        #60                 // long 1500l
     156: invokestatic  #62                 // Method java/lang/Thread.sleep:(J)V
     159: aload_0
     160: ldc           #35                 // float 0.7f
     162: aload_2
     163: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     166: invokespecial #91                 // Method assertHeapSpace:(FJ)V
     169: aload_0
     170: ldc           #36                 // float 0.1f
     172: aload_1
     173: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     176: invokespecial #91                 // Method assertHeapSpace:(FJ)V
     179: return

  public void testWhenCombinedHeapSizesFromTunerGoesOutSideMaxLimit() throws java.lang.Exception;
    Code:
       0: new           #18                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub
       3: dup
       4: aload_0
       5: getfield      #5                  // Field maxHeapSize:J
       8: l2d
       9: ldc2_w        #42                 // double 0.4d
      12: dmul
      13: d2l
      14: invokespecial #19                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub."<init>":(J)V
      17: astore_1
      18: new           #20                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub
      21: dup
      22: aload_0
      23: getfield      #5                  // Field maxHeapSize:J
      26: l2d
      27: ldc2_w        #42                 // double 0.4d
      30: dmul
      31: d2l
      32: invokespecial #21                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub."<init>":(J)V
      35: astore_2
      36: invokestatic  #6                  // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
      39: astore_3
      40: aload_3
      41: ldc           #29                 // String hbase.regionserver.global.memstore.size.max.range
      43: ldc           #35                 // float 0.7f
      45: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      48: aload_3
      49: ldc           #30                 // String hbase.regionserver.global.memstore.size.min.range
      51: ldc           #36                 // float 0.1f
      53: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      56: aload_3
      57: ldc           #12                 // String hfile.block.cache.size.max.range
      59: ldc           #35                 // float 0.7f
      61: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      64: aload_3
      65: ldc           #14                 // String hfile.block.cache.size.min.range
      67: ldc           #36                 // float 0.1f
      69: invokevirtual #10                 // Method org/apache/hadoop/conf/Configuration.setFloat:(Ljava/lang/String;F)V
      72: aload_3
      73: ldc           #38                 // String hbase.regionserver.heapmemory.tuner.period
      75: ldc2_w        #39                 // long 1000l
      78: invokevirtual #41                 // Method org/apache/hadoop/conf/Configuration.setLong:(Ljava/lang/String;J)V
      81: aload_3
      82: ldc           #47                 // String hbase.regionserver.heapmemory.autotuner.ignored.periods
      84: iconst_0
      85: invokevirtual #48                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      88: aload_3
      89: ldc           #85                 // String hbase.regionserver.heapmemory.tuner.class
      91: ldc           #86                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$CustomHeapMemoryTuner
      93: ldc           #87                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryTuner
      95: invokevirtual #88                 // Method org/apache/hadoop/conf/Configuration.setClass:(Ljava/lang/String;Ljava/lang/Class;Ljava/lang/Class;)V
      98: new           #11                 // class org/apache/hadoop/hbase/regionserver/HeapMemoryManager
     101: dup
     102: aload_1
     103: aload_2
     104: new           #22                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub
     107: dup
     108: aload_3
     109: invokespecial #23                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     112: new           #16                 // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub
     115: dup
     116: aload_3
     117: invokespecial #17                 // Method org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$RegionServerAccountingStub."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
     120: invokespecial #24                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager."<init>":(Lorg/apache/hadoop/hbase/io/hfile/BlockCache;Lorg/apache/hadoop/hbase/regionserver/FlushRequester;Lorg/apache/hadoop/hbase/Server;Lorg/apache/hadoop/hbase/regionserver/RegionServerAccounting;)V
     123: astore        4
     125: aload_2
     126: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     129: lstore        5
     131: aload_1
     132: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     135: lstore        7
     137: new           #51                 // class org/apache/hadoop/hbase/ChoreService
     140: dup
     141: ldc           #52                 // String TEST_SERVER_NAME
     143: invokespecial #53                 // Method org/apache/hadoop/hbase/ChoreService."<init>":(Ljava/lang/String;)V
     146: astore        9
     148: aload         4
     150: aload         9
     152: invokevirtual #54                 // Method org/apache/hadoop/hbase/regionserver/HeapMemoryManager.start:(Lorg/apache/hadoop/hbase/ChoreService;)V
     155: ldc           #35                 // float 0.7f
     157: putstatic     #89                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$CustomHeapMemoryTuner.memstoreSize:F
     160: ldc           #92                 // float 0.3f
     162: putstatic     #90                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$CustomHeapMemoryTuner.blockCacheSize:F
     165: ldc2_w        #60                 // long 1500l
     168: invokestatic  #62                 // Method java/lang/Thread.sleep:(J)V
     171: lload         5
     173: aload_2
     174: getfield      #49                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$MemstoreFlusherStub.memstoreSize:J
     177: invokestatic  #63                 // Method org/junit/Assert.assertEquals:(JJ)V
     180: lload         7
     182: aload_1
     183: getfield      #50                 // Field org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager$BlockCacheStub.maxSize:J
     186: invokestatic  #63                 // Method org/junit/Assert.assertEquals:(JJ)V
     189: return

  static {};
    Code:
       0: ldc           #102                // class org/apache/hadoop/hbase/regionserver/TestHeapMemoryManager
       2: invokestatic  #103                // Method org/apache/hadoop/hbase/HBaseClassTestRule.forClass:(Ljava/lang/Class;)Lorg/apache/hadoop/hbase/HBaseClassTestRule;
       5: putstatic     #104                // Field CLASS_RULE:Lorg/apache/hadoop/hbase/HBaseClassTestRule;
       8: new           #105                // class org/apache/hadoop/hbase/HBaseTestingUtility
      11: dup
      12: invokespecial #106                // Method org/apache/hadoop/hbase/HBaseTestingUtility."<init>":()V
      15: putstatic     #96                 // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      18: return
}
