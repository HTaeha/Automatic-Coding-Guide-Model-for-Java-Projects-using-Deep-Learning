Using TensorFlow backend.
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.
Instructions for updating:
Colocations handled automatically by placer.
WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/keras/backend/tensorflow_backend.py:3445: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.
Instructions for updating:
Please use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.
First data
zero :  10049
one :  10279

Second data
zero :  10049
one :  10279

Third data
zero :  10049
one :  10279

hbase-code
After set document size of train data, the number of zero and one label data :  44 56
After set document size of test data, the number of zero and one label data :  10005 10223

Sentence length Average : 44

Under 10 : 3104
Over 10, Under 30 : 7785
Over 30, Under 100 : 7330
Over 100, Under 150 : 1113
Over 150, Under 200 : 509
Over 200, Under 400 : 487
Over 400 : 0

After balance out data.
hbase-code

Sentence length Average : 44

Under 10 : 3104
Over 10, Under 30 : 7785
Over 30, Under 100 : 7330
Over 100, Under 150 : 1113
Over 150, Under 200 : 509
Over 200, Under 400 : 487
Over 400 : 0

300
hbase-AST
After set document size of train data, the number of zero and one label data :  44 56
After set document size of test data, the number of zero and one label data :  10005 10223
After balance out data.
hbase-AST

Sentence length Average : 30

Under 10 : 7492
Over 10, Under 30 : 6294
Over 30, Under 100 : 5232
Over 100, Under 150 : 774
Over 150, Under 200 : 347
Over 200, Under 400 : 186
Over 400 : 3

621
hbase-CAST
After set document size of train data, the number of zero and one label data :  44 56
After set document size of test data, the number of zero and one label data :  10005 10223
After balance out data.
hbase-CAST

Sentence length Average : 66

Under 10 : 1960
Over 10, Under 30 : 6663
Over 30, Under 100 : 7615
Over 100, Under 150 : 1826
Over 150, Under 200 : 842
Over 200, Under 400 : 1236
Over 400 : 186

697
Count model parameter.
Get a short summary of each layer dimensions and parameters.
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
input_1 (InputLayer)            (None, 300, 200)     0                                            
__________________________________________________________________________________________________
input_2 (InputLayer)            (None, 621, 200)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, 300, 200)     0           input_1[0][0]                    
__________________________________________________________________________________________________
masking_2 (Masking)             (None, 621, 200)     0           input_2[0][0]                    
__________________________________________________________________________________________________
input_3 (InputLayer)            (None, 697, 200)     0                                            
__________________________________________________________________________________________________
forwards_1 (LSTM)               (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
backwords_1 (LSTM)              (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
forwards_2 (LSTM)               (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
backwards_2 (LSTM)              (None, 64)           67840       masking_2[0][0]                  
__________________________________________________________________________________________________
masking_3 (Masking)             (None, 697, 200)     0           input_3[0][0]                    
__________________________________________________________________________________________________
after_dp_forward_1 (Dropout)    (None, 64)           0           forwards_1[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_1 (Dropout)   (None, 64)           0           backwords_1[0][0]                
__________________________________________________________________________________________________
after_dp_forward_2 (Dropout)    (None, 64)           0           forwards_2[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_2 (Dropout)   (None, 64)           0           backwards_2[0][0]                
__________________________________________________________________________________________________
forwards_3 (LSTM)               (None, 64)           67840       masking_3[0][0]                  
__________________________________________________________________________________________________
backwards_3 (LSTM)              (None, 64)           67840       masking_3[0][0]                  
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, 128)          0           after_dp_forward_1[0][0]         
                                                                 after_dp_backward_1[0][0]        
__________________________________________________________________________________________________
concatenate_2 (Concatenate)     (None, 128)          0           after_dp_forward_2[0][0]         
                                                                 after_dp_backward_2[0][0]        
__________________________________________________________________________________________________
after_dp_forward_3 (Dropout)    (None, 64)           0           forwards_3[0][0]                 
__________________________________________________________________________________________________
after_dp_backward_3 (Dropout)   (None, 64)           0           backwards_3[0][0]                
__________________________________________________________________________________________________
after_dp_1 (Dropout)            (None, 128)          0           concatenate_1[0][0]              
__________________________________________________________________________________________________
after_dp_2 (Dropout)            (None, 128)          0           concatenate_2[0][0]              
__________________________________________________________________________________________________
concatenate_3 (Concatenate)     (None, 128)          0           after_dp_forward_3[0][0]         
                                                                 after_dp_backward_3[0][0]        
__________________________________________________________________________________________________
concatenate_4 (Concatenate)     (None, 256)          0           after_dp_1[0][0]                 
                                                                 after_dp_2[0][0]                 
__________________________________________________________________________________________________
after_dp_3 (Dropout)            (None, 128)          0           concatenate_3[0][0]              
__________________________________________________________________________________________________
concatenate_5 (Concatenate)     (None, 384)          0           concatenate_4[0][0]              
                                                                 after_dp_3[0][0]                 
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 256)          98560       concatenate_5[0][0]              
__________________________________________________________________________________________________
dense_2 (Dense)                 (None, 128)          32896       dense_1[0][0]                    
__________________________________________________________________________________________________
output (Dense)                  (None, 2)            258         dense_2[0][0]                    
==================================================================================================
Total params: 538,754/home/2014313303/taeha/JavaAutoException/model.py:86: UserWarning: Update your `Model` call to the Keras 2 API: `Model(outputs=Tensor("ou..., inputs=[<tf.Tenso...)`
  model = Model(input=[input1, input2, input3], output=output)
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/ops/math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.cast instead.
2019-10-11 02:47:14.050822: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-10-11 02:47:14.082153: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100005000 Hz
2019-10-11 02:47:14.089986: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0xb749a30 executing computations on platform Host. Devices:
2019-10-11 02:47:14.090050: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>

Trainable params: 538,754
Non-trainable params: 0
__________________________________________________________________________________________________
1

Epoch 1/1

 64/100 [==================>...........] - ETA: 4s - loss: 0.7055 - acc: 0.5469
100/100 [==============================] - 8s 81ms/step - loss: 0.7456 - acc: 0.5100

Test accuracy: 57.99386988333004

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  13300

choose_one :  6928

F1score :  0.5045769925951841

AUC :  0.6444703257292415

Confusion Matrix
[[7404 2601]
 [5896 4327]]
True label 0
0.7400299850074963  
0.2599700149925038  
True label 1
0.5767387264012521  
0.42326127359874793  

Train_result {'loss': [0.7455871844291687], 'acc': [0.5100000011920929]}
Saved model to disk


2

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.6263 - acc: 0.6250
100/100 [==============================] - 2s 21ms/step - loss: 0.6468 - acc: 0.6000

Test accuracy: 60.26794542218706

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  16426

choose_one :  3802

F1score :  0.42695187165775395

AUC :  0.6993269187571919

Confusion Matrix
[[9197  808]
 [7229 2994]]
True label 0
0.919240379810095  
0.08075962018990505  
True label 1
0.7071309791646287  
0.2928690208353712  

Train_result {'loss': [0.6467689967155457], 'acc': [0.6000000095367432]}
Saved model to disk


3

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.6191 - acc: 0.6406
100/100 [==============================] - 2s 19ms/step - loss: 0.6076 - acc: 0.6800

Test accuracy: 55.1611627447103

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  1551

choose_one :  18677

F1score :  0.686159169550173

AUC :  0.7319450858548032

Confusion Matrix
[[1243 8762]
 [ 308 9915]]
True label 0
0.12423788105947027  
0.8757621189405297  
True label 1
0.030128142423946003  
0.969871857576054  

Train_result {'loss': [0.6075749611854553], 'acc': [0.68]}
Saved model to disk


4

Epoch 1/1

 64/100 [==================>...........] - ETA: 1s - loss: 0.6097 - acc: 0.6719
100/100 [==============================] - 3s 27ms/step - loss: 0.5867 - acc: 0.6900

Test accuracy: 56.545382637927624

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  1917

choose_one :  18311

F1score :  0.6919464498493025

AUC :  0.7445518021581989

Confusion Matrix
[[1566 8439]
 [ 351 9872]]
True label 0
0.1565217391304348  
0.8434782608695652  
True label 1
0.034334344125990415  
0.9656656558740095  

Train_result {'loss': [0.5867215371131898], 'acc': [0.6899999952316285]}
Saved model to disk


5

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5601 - acc: 0.6875
100/100 [==============================] - 2s 20ms/step - loss: 0.5360 - acc: 0.7300

Test accuracy: 67.07534111133083

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  7403

choose_one :  12825

F1score :  0.7110378340853871

AUC :  0.7525227408793891

Confusion Matrix
[[5374 4631]
 [2029 8194]]
True label 0
0.5371314342828586  
0.4628685657171414  
True label 1
0.198474029149956  
0.8015259708500441  

Train_result {'loss': [0.5360046720504761], 'acc': [0.7300000095367432]}
Saved model to disk


6

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4697 - acc: 0.8281
100/100 [==============================] - 2s 20ms/step - loss: 0.4875 - acc: 0.8000

Test accuracy: 68.54360292663635

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  11020

choose_one :  9208

F1score :  0.6725335803612784

AUC :  0.7552576641347721

Confusion Matrix
[[7331 2674]
 [3689 6534]]
True label 0
0.7327336331834083  
0.2672663668165917  
True label 1
0.3608529785777169  
0.6391470214222831  

Train_result {'loss': [0.487460253238678], 'acc': [0.8]}
Saved model to disk


7

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4524 - acc: 0.7969
100/100 [==============================] - 2s 21ms/step - loss: 0.4523 - acc: 0.8000

Test accuracy: 69.28514929800276

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  10242

choose_one :  9986

F1score :  0.692562719580385

AUC :  0.7597182676391434

Confusion Matrix
[[7017 2988]
 [3225 6998]]
True label 0
0.7013493253373313  
0.29865067466266865  
True label 1
0.31546512765333073  
0.6845348723466693  

Train_result {'loss': [0.4522862231731415], 'acc': [0.8000000095367432]}
Saved model to disk


8

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5269 - acc: 0.7344
100/100 [==============================] - 2s 22ms/step - loss: 0.4530 - acc: 0.7800

Test accuracy: 68.15305517105003

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  7843

choose_one :  12385

F1score :  0.7150566171266808

AUC :  0.761578430192123

Confusion Matrix
[[5703 4302]
 [2140 8083]]
True label 0
0.5700149925037481  
0.42998500749625185  
True label 1
0.20933189865988458  
0.7906681013401154  

Train_result {'loss': [0.4530145728588104], 'acc': [0.7799999976158142]}
Saved model to disk


9

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3456 - acc: 0.7969
100/100 [==============================] - 2s 21ms/step - loss: 0.3917 - acc: 0.7900

Test accuracy: 68.42001186474194

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  7857

choose_one :  12371

F1score :  0.7172700717004514

AUC :  0.7625898436871752

Confusion Matrix
[[5737 4268]
 [2120 8103]]
True label 0
0.5734132933533234  
0.42658670664667664  
True label 1
0.20737552577521276  
0.7926244742247872  

Train_result {'loss': [0.3917324447631836], 'acc': [0.7900000047683716]}
Saved model to disk


10

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3577 - acc: 0.7969
100/100 [==============================] - 2s 21ms/step - loss: 0.3291 - acc: 0.8300

Test accuracy: 69.2999802254301

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  8785

choose_one :  11443

F1score :  0.713375796178344

AUC :  0.7628732195576867

Confusion Matrix
[[6290 3715]
 [2495 7728]]
True label 0
0.6286856571714143  
0.3713143428285857  
True label 1
0.24405751736280934  
0.7559424826371907  

Train_result {'loss': [0.3291251003742218], 'acc': [0.8300000023841858]}
Saved model to disk


11

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2871 - acc: 0.8594
100/100 [==============================] - 2s 23ms/step - loss: 0.3398 - acc: 0.8400

Test accuracy: 68.93415068222266

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  8249

choose_one :  11979

F1score :  0.7169624358165931

AUC :  0.762309640445355

Confusion Matrix
[[5985 4020]
 [2264 7959]]
True label 0
0.5982008995502249  
0.4017991004497751  
True label 1
0.22146141054484986  
0.7785385894551502  

Train_result {'loss': [0.3397641694545746], 'acc': [0.8400000095367431]}
Saved model to disk


12

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2741 - acc: 0.9062
100/100 [==============================] - 2s 22ms/step - loss: 0.2874 - acc: 0.8800

Test accuracy: 68.6770812734823

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  9011

choose_one :  11217

F1score :  0.7044776119402985

AUC :  0.7587651346976418

Confusion Matrix
[[6340 3665]
 [2671 7552]]
True label 0
0.6336831584207896  
0.3663168415792104  
True label 1
0.26127359874792133  
0.7387264012520787  

Train_result {'loss': [0.2874267911911011], 'acc': [0.8799999928474427]}
Saved model to disk


13

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2024 - acc: 0.9375
100/100 [==============================] - 2s 22ms/step - loss: 0.3096 - acc: 0.8700

Test accuracy: 68.242040735614

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  9869

choose_one :  10359

F1score :  0.6878826158779516

AUC :  0.7526337779950872

Confusion Matrix
[[6725 3280]
 [3144 7079]]
True label 0
0.6721639180409795  
0.3278360819590205  
True label 1
0.3075418174704099  
0.6924581825295901  

Train_result {'loss': [0.3095848846435547], 'acc': [0.87]}
Saved model to disk


14

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2121 - acc: 0.9531
100/100 [==============================] - 2s 23ms/step - loss: 0.2611 - acc: 0.9000

Test accuracy: 67.96519675697054

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  10349

choose_one :  9879

F1score :  0.6776440155208436

AUC :  0.7482810194237713

Confusion Matrix
[[6937 3068]
 [3412 6811]]
True label 0
0.6933533233383309  
0.30664667666166917  
True label 1
0.33375721412501225  
0.6662427858749878  

Train_result {'loss': [0.26107033371925353], 'acc': [0.9000000095367432]}
Saved model to disk


15

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3009 - acc: 0.8906
100/100 [==============================] - 2s 20ms/step - loss: 0.2770 - acc: 0.8700
