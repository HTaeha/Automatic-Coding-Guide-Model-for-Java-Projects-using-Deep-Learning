Using TensorFlow backend.
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.
Instructions for updating:
Colocations handled automatically by placer.
WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/keras/backend/tensorflow_backend.py:3445: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.
Instructions for updating:
Please use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.
/home/2014313303/taeha/JavaAutoException/model.py:159: UserWarning: Update your `Model` call to the Keras 2 API: `Model(outputs=Tensor("de..., inputs=Tensor("in...)`
  model = Model(input=inputs, output=output)
WARNING:tensorflow:From /home/2014313303/.local/lib/python3.5/site-packages/tensorflow/python/ops/math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.cast instead.
2019-10-10 12:25:34.026767: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-10-10 12:25:34.036998: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100005000 Hz
2019-10-10 12:25:34.039156: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x7496b80 executing computations on platform Host. Devices:
2019-10-10 12:25:34.039195: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>
First data
zero :  10049
one :  10279

hbase-code
After set document size of train data, the number of zero and one label data :  44 56
After set document size of test data, the number of zero and one label data :  10005 10223

Sentence length Average : 36

Under 10 : 4078
Over 10, Under 30 : 8257
Over 30, Under 100 : 6473
Over 100, Under 150 : 866
Over 150, Under 200 : 416
Over 200, Under 400 : 238
Over 400 : 0

After balance out data.
hbase-code

Sentence length Average : 36

Under 10 : 4078
Over 10, Under 30 : 8257
Over 30, Under 100 : 6473
Over 100, Under 150 : 866
Over 150, Under 200 : 416
Over 200, Under 400 : 238
Over 400 : 0

281
Count model parameter.
Get a short summary of each layer dimensions and parameters.
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
input_1 (InputLayer)            (None, 281, 200)     0                                            
__________________________________________________________________________________________________
masking_1 (Masking)             (None, 281, 200)     0           input_1[0][0]                    
__________________________________________________________________________________________________
lstm_1 (LSTM)                   (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
lstm_2 (LSTM)                   (None, 64)           67840       masking_1[0][0]                  
__________________________________________________________________________________________________
dropout_1 (Dropout)             (None, 64)           0           lstm_1[0][0]                     
__________________________________________________________________________________________________
dropout_2 (Dropout)             (None, 64)           0           lstm_2[0][0]                     
__________________________________________________________________________________________________
concatenate_1 (Concatenate)     (None, 128)          0           dropout_1[0][0]                  
                                                                 dropout_2[0][0]                  
__________________________________________________________________________________________________
dropout_3 (Dropout)             (None, 128)          0           concatenate_1[0][0]              
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 2)            258         dropout_3[0][0]                  
==================================================================================================
Total params: 135,938
Trainable params: 135,938
Non-trainable params: 0
__________________________________________________________________________________________________
1

Epoch 1/1

 64/100 [==================>...........] - ETA: 1s - loss: 0.6915 - acc: 0.6094
100/100 [==============================] - 2s 22ms/step - loss: 0.7266 - acc: 0.5700

Test accuracy: 52.249357326478155

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  18610

choose_one :  1618

F1score :  0.18427497677561014

AUC :  0.6727076547806503

Confusion Matrix
[[9478  527]
 [9132 1091]]
True label 0
0.9473263368315842  
0.05267366316841579  
True label 1
0.8932798591411523  
0.10672014085884769  

Train_result {'loss': [0.7266065287590027], 'acc': [0.57]}
Saved model to disk


2

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.7464 - acc: 0.4531
100/100 [==============================] - 1s 7ms/step - loss: 0.6953 - acc: 0.5400

Test accuracy: 59.79335574451255

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  3882

choose_one :  16346

F1score :  0.693891377168881

AUC :  0.7047967799334217

Confusion Matrix
[[2877 7128]
 [1005 9218]]
True label 0
0.2875562218890555  
0.7124437781109445  
True label 1
0.09830773745475888  
0.9016922625452412  

Train_result {'loss': [0.6952761554718018], 'acc': [0.5399999904632569]}
Saved model to disk


3

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4910 - acc: 0.7656
100/100 [==============================] - 1s 6ms/step - loss: 0.5300 - acc: 0.7500

Test accuracy: 59.27427328455606

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  3363

choose_one :  16865

F1score :  0.6958800945067927

AUC :  0.7087720787948001

Confusion Matrix
[[2565 7440]
 [ 798 9425]]
True label 0
0.2563718140929535  
0.7436281859070465  
True label 1
0.07805927809840556  
0.9219407219015945  

Train_result {'loss': [0.5299959540367126], 'acc': [0.7499999952316284]}
Saved model to disk


4

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.5171 - acc: 0.7656
100/100 [==============================] - 1s 7ms/step - loss: 0.5176 - acc: 0.8100

Test accuracy: 61.97844571880562

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  4708

choose_one :  15520

F1score :  0.701239171813697

AUC :  0.7080412254011897

Confusion Matrix
[[3511 6494]
 [1197 9026]]
True label 0
0.3509245377311344  
0.6490754622688656  
True label 1
0.11708891714760833  
0.8829110828523916  

Train_result {'loss': [0.5176360821723938], 'acc': [0.8100000023841858]}
Saved model to disk


5

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4878 - acc: 0.7812
100/100 [==============================] - 1s 7ms/step - loss: 0.4956 - acc: 0.7600

Test accuracy: 59.13090765275856

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  3208

choose_one :  17020

F1score :  0.6965459016995191

AUC :  0.7050675777243922

Confusion Matrix
[[2473 7532]
 [ 735 9488]]
True label 0
0.24717641179410293  
0.752823588205897  
True label 1
0.07189670351168932  
0.9281032964883107  

Train_result {'loss': [0.49555038928985595], 'acc': [0.7599999952316284]}
Saved model to disk


6

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4870 - acc: 0.7500
100/100 [==============================] - 1s 7ms/step - loss: 0.4696 - acc: 0.7800

Test accuracy: 62.2107969151671

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  5107

choose_one :  15121

F1score :  0.6983901515151516

AUC :  0.7080201755720008

Confusion Matrix
[[3734 6271]
 [1373 8850]]
True label 0
0.37321339330334835  
0.6267866066966516  
True label 1
0.13430499853272035  
0.8656950014672796  

Train_result {'loss': [0.469609899520874], 'acc': [0.7799999928474426]}
Saved model to disk


7

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.4347 - acc: 0.8125
100/100 [==============================] - 1s 7ms/step - loss: 0.4234 - acc: 0.8300

Test accuracy: 64.77654736009491

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  8802

choose_one :  11426

F1score :  0.6708854912467089

AUC :  0.7046697672390451

Confusion Matrix
[[5841 4164]
 [2961 7262]]
True label 0
0.583808095952024  
0.416191904047976  
True label 1
0.28964100557566275  
0.7103589944243373  

Train_result {'loss': [0.42343067526817324], 'acc': [0.8299999976158142]}
Saved model to disk


8

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3657 - acc: 0.8125
100/100 [==============================] - 1s 6ms/step - loss: 0.4431 - acc: 0.7600

Test accuracy: 65.16215147320545

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  10762

choose_one :  9466

F1score :  0.6420844126161817

AUC :  0.7127476709654562

Confusion Matrix
[[6860 3145]
 [3902 6321]]
True label 0
0.6856571714142928  
0.31434282858570717  
True label 1
0.3816883497994718  
0.6183116502005283  

Train_result {'loss': [0.44313294410705567], 'acc': [0.7600000071525573]}
Saved model to disk


9

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3772 - acc: 0.8594
100/100 [==============================] - 1s 6ms/step - loss: 0.4013 - acc: 0.8300

Test accuracy: 66.04211983389361

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  9326

choose_one :  10902

F1score :  0.6748402366863905

AUC :  0.7239439851628524

Confusion Matrix
[[6231 3774]
 [3095 7128]]
True label 0
0.6227886056971514  
0.37721139430284856  
True label 1
0.3027487039029639  
0.6972512960970361  

Train_result {'loss': [0.40128934144973755], 'acc': [0.8300000047683715]}
Saved model to disk


10

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3635 - acc: 0.8594
100/100 [==============================] - 1s 6ms/step - loss: 0.3673 - acc: 0.8600

Test accuracy: 65.47360094917936

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  7239

choose_one :  12989

F1score :  0.6991211442357402

AUC :  0.7210015651471926

Confusion Matrix
[[5130 4875]
 [2109 8114]]
True label 0
0.512743628185907  
0.487256371814093  
True label 1
0.20629952068864327  
0.7937004793113568  

Train_result {'loss': [0.3672630333900452], 'acc': [0.8599999976158142]}
Saved model to disk


11

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3154 - acc: 0.8750
100/100 [==============================] - 1s 7ms/step - loss: 0.3637 - acc: 0.8500

Test accuracy: 65.62685386592841

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  10222

choose_one :  10006

F1score :  0.6562855306737851

AUC :  0.714400341646647

Confusion Matrix
[[6637 3368]
 [3585 6638]]
True label 0
0.663368315842079  
0.33663168415792105  
True label 1
0.35067983957742344  
0.6493201604225766  

Train_result {'loss': [0.36369296789169314], 'acc': [0.8500000095367432]}
Saved model to disk


12

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2661 - acc: 0.9219
100/100 [==============================] - 1s 7ms/step - loss: 0.2966 - acc: 0.8800

Test accuracy: 63.92129721178564

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  5941

choose_one :  14287

F1score :  0.7022439820481436

AUC :  0.7149001553219282

Confusion Matrix
[[4324 5681]
 [1617 8606]]
True label 0
0.432183908045977  
0.5678160919540229  
True label 1
0.15817274772571652  
0.8418272522742835  

Train_result {'loss': [0.2965782117843628], 'acc': [0.8800000095367432]}
Saved model to disk


13

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2735 - acc: 0.9062
100/100 [==============================] - 1s 6ms/step - loss: 0.2805 - acc: 0.9100

Test accuracy: 64.98418034407752

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  8230

choose_one :  11998

F1score :  0.6812474686107736

AUC :  0.71245687437021

Confusion Matrix
[[5576 4429]
 [2654 7569]]
True label 0
0.5573213393303348  
0.44267866066966516  
True label 1
0.2596106817959503  
0.7403893182040497  

Train_result {'loss': [0.2805155563354492], 'acc': [0.9100000071525574]}
Saved model to disk


14

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.2748 - acc: 0.8906
100/100 [==============================] - 1s 6ms/step - loss: 0.2473 - acc: 0.9200

Test accuracy: 62.186078702788215

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  4872

choose_one :  15356

F1score :  0.7009656358731772

AUC :  0.7021508027166111

Confusion Matrix
[[3614 6391]
 [1258 8965]]
True label 0
0.36121939030484757  
0.6387806096951524  
True label 1
0.12305585444585738  
0.8769441455541426  

Train_result {'loss': [0.24730120956897736], 'acc': [0.9199999952316285]}
Saved model to disk


15

Epoch 1/1

 64/100 [==================>...........] - ETA: 0s - loss: 0.3462 - acc: 0.8594
100/100 [==============================] - 1s 7ms/step - loss: 0.3401 - acc: 0.8500

Test accuracy: 64.54419616373343

data size :  20328

zero :  10049

one :  10279

train_zero :  44

train_one :  56

test_zero :  10005

test_one :  10223

choose_zero :  6303

choose_one :  13925

F1score :  0.702998177902932

AUC :  0.717380271030483

Confusion Matrix
[[4568 5437]
 [1735 8488]]
True label 0
0.4565717141429285  
0.5434282858570715  
True label 1
0.16971534774528024  
0.8302846522547197  

Train_result {'loss': [0.3401469707489014], 'acc': [0.8499999928474427]}
Saved model to disk


[[52.249357326478155, 1], [59.79335574451255, 2], [59.27427328455606, 3], [61.97844571880562, 4], [59.13090765275856, 5], [62.2107969151671, 6], [64.77654736009491, 7], [65.16215147320545, 8], [66.04211983389361, 9], [65.47360094917936, 10], [65.62685386592841, 11], [63.92129721178564, 12], [64.98418034407752, 13], [62.186078702788215, 14], [64.54419616373343, 15]]
max accuracy :  [66.04211983389361, 9]
