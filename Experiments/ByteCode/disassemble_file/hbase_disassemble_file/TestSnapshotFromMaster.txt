Compiled from "TestSnapshotFromMaster.java"
public class org.apache.hadoop.hbase.master.cleaner.TestSnapshotFromMaster {
  public static final org.apache.hadoop.hbase.HBaseClassTestRule CLASS_RULE;

  public org.apache.hadoop.hbase.master.cleaner.TestSnapshotFromMaster();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public static void setupCluster() throws java.lang.Exception;
    Code:
       0: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
       3: invokevirtual #3                  // Method org/apache/hadoop/hbase/HBaseTestingUtility.getConfiguration:()Lorg/apache/hadoop/conf/Configuration;
       6: invokestatic  #4                  // Method setupConf:(Lorg/apache/hadoop/conf/Configuration;)V
       9: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      12: iconst_2
      13: invokevirtual #6                  // Method org/apache/hadoop/hbase/HBaseTestingUtility.startMiniCluster:(I)Lorg/apache/hadoop/hbase/MiniHBaseCluster;
      16: pop
      17: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      20: invokevirtual #7                  // Method org/apache/hadoop/hbase/HBaseTestingUtility.getDFSCluster:()Lorg/apache/hadoop/hdfs/MiniDFSCluster;
      23: invokevirtual #8                  // Method org/apache/hadoop/hdfs/MiniDFSCluster.getFileSystem:()Lorg/apache/hadoop/hdfs/DistributedFileSystem;
      26: putstatic     #9                  // Field fs:Lorg/apache/hadoop/fs/FileSystem;
      29: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      32: invokevirtual #10                 // Method org/apache/hadoop/hbase/HBaseTestingUtility.getMiniHBaseCluster:()Lorg/apache/hadoop/hbase/MiniHBaseCluster;
      35: invokevirtual #11                 // Method org/apache/hadoop/hbase/MiniHBaseCluster.getMaster:()Lorg/apache/hadoop/hbase/master/HMaster;
      38: putstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
      41: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
      44: invokevirtual #13                 // Method org/apache/hadoop/hbase/master/HMaster.getMasterFileSystem:()Lorg/apache/hadoop/hbase/master/MasterFileSystem;
      47: invokevirtual #14                 // Method org/apache/hadoop/hbase/master/MasterFileSystem.getRootDir:()Lorg/apache/hadoop/fs/Path;
      50: putstatic     #15                 // Field rootDir:Lorg/apache/hadoop/fs/Path;
      53: new           #16                 // class org/apache/hadoop/fs/Path
      56: dup
      57: getstatic     #15                 // Field rootDir:Lorg/apache/hadoop/fs/Path;
      60: ldc           #18                 // String archive
      62: invokespecial #19                 // Method org/apache/hadoop/fs/Path."<init>":(Lorg/apache/hadoop/fs/Path;Ljava/lang/String;)V
      65: putstatic     #20                 // Field archiveDir:Lorg/apache/hadoop/fs/Path;
      68: return

  public void setup() throws java.lang.Exception;
    Code:
       0: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
       3: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
       6: getstatic     #48                 // Field TEST_FAM:[B
       9: invokevirtual #49                 // Method org/apache/hadoop/hbase/HBaseTestingUtility.createTable:(Lorg/apache/hadoop/hbase/TableName;[B)Lorg/apache/hadoop/hbase/client/Table;
      12: pop
      13: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
      16: invokevirtual #50                 // Method org/apache/hadoop/hbase/master/HMaster.getSnapshotManager:()Lorg/apache/hadoop/hbase/master/snapshot/SnapshotManager;
      19: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
      22: aconst_null
      23: invokevirtual #51                 // Method org/apache/hadoop/hbase/master/snapshot/SnapshotManager.setSnapshotHandlerForTesting:(Lorg/apache/hadoop/hbase/TableName;Lorg/apache/hadoop/hbase/master/SnapshotSentinel;)V
      26: return

  public void tearDown() throws java.lang.Exception;
    Code:
       0: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
       3: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
       6: invokevirtual #52                 // Method org/apache/hadoop/hbase/HBaseTestingUtility.deleteTable:(Lorg/apache/hadoop/hbase/TableName;)V
       9: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      12: invokevirtual #53                 // Method org/apache/hadoop/hbase/HBaseTestingUtility.getAdmin:()Lorg/apache/hadoop/hbase/client/Admin;
      15: invokestatic  #54                 // Method org/apache/hadoop/hbase/snapshot/SnapshotTestingUtils.deleteAllSnapshots:(Lorg/apache/hadoop/hbase/client/Admin;)V
      18: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      21: invokestatic  #55                 // Method org/apache/hadoop/hbase/snapshot/SnapshotTestingUtils.deleteArchiveDirectory:(Lorg/apache/hadoop/hbase/HBaseTestingUtility;)V
      24: return

  public static void cleanupTest() throws java.lang.Exception;
    Code:
       0: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
       3: invokevirtual #56                 // Method org/apache/hadoop/hbase/HBaseTestingUtility.shutdownMiniCluster:()V
       6: goto          10
       9: astore_0
      10: return
    Exception table:
       from    to  target type
           0     6     9   Class java/lang/Exception

  public void testIsDoneContract() throws java.lang.Exception;
    Code:
       0: invokestatic  #58                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest.newBuilder:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder;
       3: astore_1
       4: ldc           #59                 // String asyncExpectedFailureTest
       6: astore_2
       7: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
      10: aload_1
      11: invokevirtual #60                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder.build:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest;
      14: ldc           #61                 // class org/apache/hadoop/hbase/snapshot/UnknownSnapshotException
      16: invokestatic  #62                 // Method org/apache/hadoop/hbase/snapshot/SnapshotTestingUtils.expectSnapshotDoneException:(Lorg/apache/hadoop/hbase/master/HMaster;Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest;Ljava/lang/Class;)V
      19: invokestatic  #63                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription.newBuilder:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription$Builder;
      22: aload_2
      23: invokevirtual #64                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription$Builder.setName:(Ljava/lang/String;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription$Builder;
      26: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
      29: invokevirtual #65                 // Method org/apache/hadoop/hbase/TableName.getNameAsString:()Ljava/lang/String;
      32: invokevirtual #66                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription$Builder.setTable:(Ljava/lang/String;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription$Builder;
      35: invokevirtual #67                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription$Builder.build:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription;
      38: astore_3
      39: aload_1
      40: aload_3
      41: invokevirtual #68                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder.setSnapshot:(Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder;
      44: pop
      45: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
      48: aload_1
      49: invokevirtual #60                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder.build:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest;
      52: ldc           #61                 // class org/apache/hadoop/hbase/snapshot/UnknownSnapshotException
      54: invokestatic  #62                 // Method org/apache/hadoop/hbase/snapshot/SnapshotTestingUtils.expectSnapshotDoneException:(Lorg/apache/hadoop/hbase/master/HMaster;Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest;Ljava/lang/Class;)V
      57: ldc           #69                 // class org/apache/hadoop/hbase/master/snapshot/DisabledTableSnapshotHandler
      59: invokestatic  #70                 // Method org/mockito/Mockito.mock:(Ljava/lang/Class;)Ljava/lang/Object;
      62: checkcast     #69                 // class org/apache/hadoop/hbase/master/snapshot/DisabledTableSnapshotHandler
      65: astore        4
      67: aload         4
      69: invokevirtual #71                 // Method org/apache/hadoop/hbase/master/snapshot/DisabledTableSnapshotHandler.getException:()Lorg/apache/hadoop/hbase/errorhandling/ForeignException;
      72: invokestatic  #72                 // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      75: aconst_null
      76: invokeinterface #73,  2           // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      81: pop
      82: aload         4
      84: invokevirtual #74                 // Method org/apache/hadoop/hbase/master/snapshot/DisabledTableSnapshotHandler.getSnapshot:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription;
      87: invokestatic  #72                 // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      90: aload_3
      91: invokeinterface #73,  2           // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      96: pop
      97: aload         4
      99: invokevirtual #75                 // Method org/apache/hadoop/hbase/master/snapshot/DisabledTableSnapshotHandler.isFinished:()Z
     102: invokestatic  #76                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     105: invokestatic  #72                 // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
     108: getstatic     #77                 // Field java/lang/Boolean.TRUE:Ljava/lang/Boolean;
     111: invokeinterface #73,  2           // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
     116: pop
     117: aload         4
     119: invokevirtual #78                 // Method org/apache/hadoop/hbase/master/snapshot/DisabledTableSnapshotHandler.getCompletionTimestamp:()J
     122: invokestatic  #79                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     125: invokestatic  #72                 // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
     128: invokestatic  #80                 // Method org/apache/hadoop/hbase/util/EnvironmentEdgeManager.currentTime:()J
     131: invokestatic  #79                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     134: invokeinterface #73,  2           // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
     139: pop
     140: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
     143: invokevirtual #50                 // Method org/apache/hadoop/hbase/master/HMaster.getSnapshotManager:()Lorg/apache/hadoop/hbase/master/snapshot/SnapshotManager;
     146: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
     149: aload         4
     151: invokevirtual #51                 // Method org/apache/hadoop/hbase/master/snapshot/SnapshotManager.setSnapshotHandlerForTesting:(Lorg/apache/hadoop/hbase/TableName;Lorg/apache/hadoop/hbase/master/SnapshotSentinel;)V
     154: invokestatic  #58                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest.newBuilder:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder;
     157: astore_1
     158: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
     161: aload_1
     162: invokevirtual #60                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder.build:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest;
     165: ldc           #61                 // class org/apache/hadoop/hbase/snapshot/UnknownSnapshotException
     167: invokestatic  #62                 // Method org/apache/hadoop/hbase/snapshot/SnapshotTestingUtils.expectSnapshotDoneException:(Lorg/apache/hadoop/hbase/master/HMaster;Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest;Ljava/lang/Class;)V
     170: aload_1
     171: aload_3
     172: invokevirtual #68                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder.setSnapshot:(Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder;
     175: pop
     176: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
     179: invokevirtual #81                 // Method org/apache/hadoop/hbase/master/HMaster.getMasterRpcServices:()Lorg/apache/hadoop/hbase/master/MasterRpcServices;
     182: aconst_null
     183: aload_1
     184: invokevirtual #60                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder.build:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest;
     187: invokevirtual #82                 // Method org/apache/hadoop/hbase/master/MasterRpcServices.isSnapshotDone:(Lorg/apache/hbase/thirdparty/com/google/protobuf/RpcController;Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneResponse;
     190: astore        5
     192: ldc           #83                 // String Snapshot didn't complete when it should have.
     194: aload         5
     196: invokevirtual #84                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneResponse.getDone:()Z
     199: invokestatic  #85                 // Method org/junit/Assert.assertTrue:(Ljava/lang/String;Z)V
     202: aload_1
     203: invokestatic  #63                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription.newBuilder:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription$Builder;
     206: ldc           #86                 // String Not A Snapshot
     208: invokevirtual #64                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription$Builder.setName:(Ljava/lang/String;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription$Builder;
     211: invokevirtual #67                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription$Builder.build:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription;
     214: invokevirtual #68                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder.setSnapshot:(Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder;
     217: pop
     218: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
     221: aload_1
     222: invokevirtual #60                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder.build:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest;
     225: ldc           #61                 // class org/apache/hadoop/hbase/snapshot/UnknownSnapshotException
     227: invokestatic  #62                 // Method org/apache/hadoop/hbase/snapshot/SnapshotTestingUtils.expectSnapshotDoneException:(Lorg/apache/hadoop/hbase/master/HMaster;Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest;Ljava/lang/Class;)V
     230: ldc           #87                 // String completed
     232: astore_2
     233: aload_0
     234: aload_2
     235: invokespecial #88                 // Method createSnapshot:(Ljava/lang/String;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription;
     238: astore_3
     239: aload_1
     240: aload_3
     241: invokevirtual #68                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder.setSnapshot:(Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder;
     244: pop
     245: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
     248: invokevirtual #81                 // Method org/apache/hadoop/hbase/master/HMaster.getMasterRpcServices:()Lorg/apache/hadoop/hbase/master/MasterRpcServices;
     251: aconst_null
     252: aload_1
     253: invokevirtual #60                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest$Builder.build:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest;
     256: invokevirtual #82                 // Method org/apache/hadoop/hbase/master/MasterRpcServices.isSnapshotDone:(Lorg/apache/hbase/thirdparty/com/google/protobuf/RpcController;Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneRequest;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneResponse;
     259: astore        5
     261: ldc           #89                 // String Completed, on-disk snapshot not found
     263: aload         5
     265: invokevirtual #84                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$IsSnapshotDoneResponse.getDone:()Z
     268: invokestatic  #85                 // Method org/junit/Assert.assertTrue:(Ljava/lang/String;Z)V
     271: return

  public void testGetCompletedSnapshots() throws java.lang.Exception;
    Code:
       0: invokestatic  #90                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsRequest.newBuilder:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsRequest$Builder;
       3: invokevirtual #91                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsRequest$Builder.build:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsRequest;
       6: astore_1
       7: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
      10: invokevirtual #81                 // Method org/apache/hadoop/hbase/master/HMaster.getMasterRpcServices:()Lorg/apache/hadoop/hbase/master/MasterRpcServices;
      13: aconst_null
      14: aload_1
      15: invokevirtual #92                 // Method org/apache/hadoop/hbase/master/MasterRpcServices.getCompletedSnapshots:(Lorg/apache/hbase/thirdparty/com/google/protobuf/RpcController;Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsRequest;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsResponse;
      18: astore_2
      19: ldc           #93                 // String Found unexpected number of snapshots
      21: lconst_0
      22: aload_2
      23: invokevirtual #94                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsResponse.getSnapshotsCount:()I
      26: i2l
      27: invokestatic  #95                 // Method org/junit/Assert.assertEquals:(Ljava/lang/String;JJ)V
      30: ldc           #87                 // String completed
      32: astore_3
      33: aload_0
      34: aload_3
      35: invokespecial #88                 // Method createSnapshot:(Ljava/lang/String;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription;
      38: astore        4
      40: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
      43: invokevirtual #81                 // Method org/apache/hadoop/hbase/master/HMaster.getMasterRpcServices:()Lorg/apache/hadoop/hbase/master/MasterRpcServices;
      46: aconst_null
      47: aload_1
      48: invokevirtual #92                 // Method org/apache/hadoop/hbase/master/MasterRpcServices.getCompletedSnapshots:(Lorg/apache/hbase/thirdparty/com/google/protobuf/RpcController;Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsRequest;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsResponse;
      51: astore_2
      52: ldc           #93                 // String Found unexpected number of snapshots
      54: lconst_1
      55: aload_2
      56: invokevirtual #94                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsResponse.getSnapshotsCount:()I
      59: i2l
      60: invokestatic  #95                 // Method org/junit/Assert.assertEquals:(Ljava/lang/String;JJ)V
      63: aload_2
      64: invokevirtual #96                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsResponse.getSnapshotsList:()Ljava/util/List;
      67: astore        5
      69: iconst_1
      70: anewarray     #97                 // class org/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription
      73: dup
      74: iconst_0
      75: aload         4
      77: aastore
      78: invokestatic  #98                 // Method org/apache/hbase/thirdparty/com/google/common/collect/Lists.newArrayList:([Ljava/lang/Object;)Ljava/util/ArrayList;
      81: astore        6
      83: ldc           #99                 // String Returned snapshots don't match created snapshots
      85: aload         6
      87: aload         5
      89: invokestatic  #100                // Method org/junit/Assert.assertEquals:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      92: ldc           #101                // String completed_two
      94: astore_3
      95: aload_0
      96: aload_3
      97: invokespecial #88                 // Method createSnapshot:(Ljava/lang/String;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription;
     100: astore        4
     102: aload         6
     104: aload         4
     106: invokeinterface #102,  2          // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     111: pop
     112: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
     115: invokevirtual #81                 // Method org/apache/hadoop/hbase/master/HMaster.getMasterRpcServices:()Lorg/apache/hadoop/hbase/master/MasterRpcServices;
     118: aconst_null
     119: aload_1
     120: invokevirtual #92                 // Method org/apache/hadoop/hbase/master/MasterRpcServices.getCompletedSnapshots:(Lorg/apache/hbase/thirdparty/com/google/protobuf/RpcController;Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsRequest;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsResponse;
     123: astore_2
     124: ldc           #93                 // String Found unexpected number of snapshots
     126: ldc2_w        #103                // long 2l
     129: aload_2
     130: invokevirtual #94                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsResponse.getSnapshotsCount:()I
     133: i2l
     134: invokestatic  #95                 // Method org/junit/Assert.assertEquals:(Ljava/lang/String;JJ)V
     137: aload_2
     138: invokevirtual #96                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$GetCompletedSnapshotsResponse.getSnapshotsList:()Ljava/util/List;
     141: astore        5
     143: ldc           #99                 // String Returned snapshots don't match created snapshots
     145: aload         6
     147: aload         5
     149: invokestatic  #100                // Method org/junit/Assert.assertEquals:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     152: return

  public void testDeleteSnapshot() throws java.lang.Exception;
    Code:
       0: ldc           #87                 // String completed
       2: astore_1
       3: invokestatic  #63                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription.newBuilder:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription$Builder;
       6: aload_1
       7: invokevirtual #64                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription$Builder.setName:(Ljava/lang/String;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription$Builder;
      10: invokevirtual #67                 // Method org/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription$Builder.build:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription;
      13: astore_2
      14: invokestatic  #105                // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$DeleteSnapshotRequest.newBuilder:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$DeleteSnapshotRequest$Builder;
      17: aload_2
      18: invokevirtual #106                // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$DeleteSnapshotRequest$Builder.setSnapshot:(Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$DeleteSnapshotRequest$Builder;
      21: invokevirtual #107                // Method org/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$DeleteSnapshotRequest$Builder.build:()Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$DeleteSnapshotRequest;
      24: astore_3
      25: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
      28: invokevirtual #81                 // Method org/apache/hadoop/hbase/master/HMaster.getMasterRpcServices:()Lorg/apache/hadoop/hbase/master/MasterRpcServices;
      31: aconst_null
      32: aload_3
      33: invokevirtual #108                // Method org/apache/hadoop/hbase/master/MasterRpcServices.deleteSnapshot:(Lorg/apache/hbase/thirdparty/com/google/protobuf/RpcController;Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$DeleteSnapshotRequest;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$DeleteSnapshotResponse;
      36: pop
      37: ldc           #109                // String Master didn't throw exception when attempting to delete snapshot that doesn't exist
      39: invokestatic  #110                // Method org/junit/Assert.fail:(Ljava/lang/String;)V
      42: goto          47
      45: astore        4
      47: aload_0
      48: aload_1
      49: invokespecial #88                 // Method createSnapshot:(Ljava/lang/String;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/SnapshotProtos$SnapshotDescription;
      52: pop
      53: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
      56: invokevirtual #81                 // Method org/apache/hadoop/hbase/master/HMaster.getMasterRpcServices:()Lorg/apache/hadoop/hbase/master/MasterRpcServices;
      59: aconst_null
      60: aload_3
      61: invokevirtual #108                // Method org/apache/hadoop/hbase/master/MasterRpcServices.deleteSnapshot:(Lorg/apache/hbase/thirdparty/com/google/protobuf/RpcController;Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$DeleteSnapshotRequest;)Lorg/apache/hadoop/hbase/shaded/protobuf/generated/MasterProtos$DeleteSnapshotResponse;
      64: pop
      65: return
    Exception table:
       from    to  target type
          25    42    45   Class org/apache/hbase/thirdparty/com/google/protobuf/ServiceException

  public void testSnapshotHFileArchiving() throws java.lang.Exception;
    Code:
       0: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
       3: invokevirtual #53                 // Method org/apache/hadoop/hbase/HBaseTestingUtility.getAdmin:()Lorg/apache/hadoop/hbase/client/Admin;
       6: astore_1
       7: aload_1
       8: invokestatic  #112                // Method org/apache/hadoop/hbase/snapshot/SnapshotTestingUtils.assertNoSnapshots:(Lorg/apache/hadoop/hbase/client/Admin;)V
      11: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      14: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
      17: invokevirtual #52                 // Method org/apache/hadoop/hbase/HBaseTestingUtility.deleteTable:(Lorg/apache/hadoop/hbase/TableName;)V
      20: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
      23: invokestatic  #113                // Method org/apache/hadoop/hbase/client/TableDescriptorBuilder.newBuilder:(Lorg/apache/hadoop/hbase/TableName;)Lorg/apache/hadoop/hbase/client/TableDescriptorBuilder;
      26: getstatic     #48                 // Field TEST_FAM:[B
      29: invokestatic  #114                // Method org/apache/hadoop/hbase/client/ColumnFamilyDescriptorBuilder.of:([B)Lorg/apache/hadoop/hbase/client/ColumnFamilyDescriptor;
      32: invokevirtual #115                // Method org/apache/hadoop/hbase/client/TableDescriptorBuilder.setColumnFamily:(Lorg/apache/hadoop/hbase/client/ColumnFamilyDescriptor;)Lorg/apache/hadoop/hbase/client/TableDescriptorBuilder;
      35: iconst_0
      36: invokevirtual #116                // Method org/apache/hadoop/hbase/client/TableDescriptorBuilder.setCompactionEnabled:(Z)Lorg/apache/hadoop/hbase/client/TableDescriptorBuilder;
      39: invokevirtual #117                // Method org/apache/hadoop/hbase/client/TableDescriptorBuilder.build:()Lorg/apache/hadoop/hbase/client/TableDescriptor;
      42: astore_2
      43: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      46: invokevirtual #53                 // Method org/apache/hadoop/hbase/HBaseTestingUtility.getAdmin:()Lorg/apache/hadoop/hbase/client/Admin;
      49: aload_2
      50: invokeinterface #118,  2          // InterfaceMethod org/apache/hadoop/hbase/client/Admin.createTable:(Lorg/apache/hadoop/hbase/client/TableDescriptor;)V
      55: iconst_0
      56: istore_3
      57: iload_3
      58: bipush        6
      60: if_icmpge     102
      63: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      66: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      69: invokevirtual #119                // Method org/apache/hadoop/hbase/HBaseTestingUtility.getConnection:()Lorg/apache/hadoop/hbase/client/Connection;
      72: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
      75: invokeinterface #120,  2          // InterfaceMethod org/apache/hadoop/hbase/client/Connection.getTable:(Lorg/apache/hadoop/hbase/TableName;)Lorg/apache/hadoop/hbase/client/Table;
      80: getstatic     #48                 // Field TEST_FAM:[B
      83: invokevirtual #121                // Method org/apache/hadoop/hbase/HBaseTestingUtility.loadTable:(Lorg/apache/hadoop/hbase/client/Table;[B)I
      86: pop
      87: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      90: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
      93: invokevirtual #122                // Method org/apache/hadoop/hbase/HBaseTestingUtility.flush:(Lorg/apache/hadoop/hbase/TableName;)V
      96: iinc          3, 1
      99: goto          57
     102: aload_1
     103: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
     106: invokeinterface #123,  2          // InterfaceMethod org/apache/hadoop/hbase/client/Admin.disableTable:(Lorg/apache/hadoop/hbase/TableName;)V
     111: ldc           #124                // String snapshot
     113: astore_3
     114: aload_3
     115: astore        4
     117: aload_1
     118: aload_3
     119: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
     122: invokeinterface #125,  3          // InterfaceMethod org/apache/hadoop/hbase/client/Admin.snapshot:(Ljava/lang/String;Lorg/apache/hadoop/hbase/TableName;)V
     127: getstatic     #126                // Field LOG:Lorg/slf4j/Logger;
     130: ldc           #127                // String After snapshot File-System state
     132: invokeinterface #128,  2          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     137: getstatic     #9                  // Field fs:Lorg/apache/hadoop/fs/FileSystem;
     140: getstatic     #15                 // Field rootDir:Lorg/apache/hadoop/fs/Path;
     143: getstatic     #126                // Field LOG:Lorg/slf4j/Logger;
     146: invokestatic  #129                // Method org/apache/hadoop/hbase/util/FSUtils.logFileSystemState:(Lorg/apache/hadoop/fs/FileSystem;Lorg/apache/hadoop/fs/Path;Lorg/slf4j/Logger;)V
     149: aload_1
     150: aload         4
     152: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
     155: invokestatic  #130                // Method org/apache/hadoop/hbase/snapshot/SnapshotTestingUtils.assertOneSnapshotThatMatches:(Lorg/apache/hadoop/hbase/client/Admin;Ljava/lang/String;Lorg/apache/hadoop/hbase/TableName;)Ljava/util/List;
     158: pop
     159: aload_2
     160: invokestatic  #131                // Method org/apache/hadoop/hbase/client/TableDescriptorBuilder.newBuilder:(Lorg/apache/hadoop/hbase/client/TableDescriptor;)Lorg/apache/hadoop/hbase/client/TableDescriptorBuilder;
     163: iconst_1
     164: invokevirtual #116                // Method org/apache/hadoop/hbase/client/TableDescriptorBuilder.setCompactionEnabled:(Z)Lorg/apache/hadoop/hbase/client/TableDescriptorBuilder;
     167: invokevirtual #117                // Method org/apache/hadoop/hbase/client/TableDescriptorBuilder.build:()Lorg/apache/hadoop/hbase/client/TableDescriptor;
     170: astore_2
     171: aload_1
     172: aload_2
     173: invokeinterface #132,  2          // InterfaceMethod org/apache/hadoop/hbase/client/Admin.modifyTable:(Lorg/apache/hadoop/hbase/client/TableDescriptor;)V
     178: aload_1
     179: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
     182: invokeinterface #133,  2          // InterfaceMethod org/apache/hadoop/hbase/client/Admin.enableTable:(Lorg/apache/hadoop/hbase/TableName;)V
     187: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
     190: invokevirtual #134                // Method org/apache/hadoop/hbase/HBaseTestingUtility.getHBaseCluster:()Lorg/apache/hadoop/hbase/MiniHBaseCluster;
     193: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
     196: invokevirtual #135                // Method org/apache/hadoop/hbase/MiniHBaseCluster.getRegions:(Lorg/apache/hadoop/hbase/TableName;)Ljava/util/List;
     199: astore        5
     201: aload         5
     203: invokeinterface #136,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     208: astore        6
     210: aload         6
     212: invokeinterface #137,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     217: ifeq          245
     220: aload         6
     222: invokeinterface #138,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     227: checkcast     #139                // class org/apache/hadoop/hbase/regionserver/HRegion
     230: astore        7
     232: aload         7
     234: invokevirtual #140                // Method org/apache/hadoop/hbase/regionserver/HRegion.waitForFlushesAndCompactions:()V
     237: aload         7
     239: invokevirtual #141                // Method org/apache/hadoop/hbase/regionserver/HRegion.compactStores:()V
     242: goto          210
     245: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
     248: invokevirtual #10                 // Method org/apache/hadoop/hbase/HBaseTestingUtility.getMiniHBaseCluster:()Lorg/apache/hadoop/hbase/MiniHBaseCluster;
     251: invokevirtual #142                // Method org/apache/hadoop/hbase/MiniHBaseCluster.getRegionServerThreads:()Ljava/util/List;
     254: astore        6
     256: aconst_null
     257: astore        7
     259: aload         6
     261: invokeinterface #136,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     266: astore        8
     268: aload         8
     270: invokeinterface #137,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     275: ifeq          322
     278: aload         8
     280: invokeinterface #138,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     285: checkcast     #143                // class org/apache/hadoop/hbase/util/JVMClusterUtil$RegionServerThread
     288: astore        9
     290: aload         9
     292: invokevirtual #144                // Method org/apache/hadoop/hbase/util/JVMClusterUtil$RegionServerThread.getRegionServer:()Lorg/apache/hadoop/hbase/regionserver/HRegionServer;
     295: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
     298: invokevirtual #145                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.getRegions:(Lorg/apache/hadoop/hbase/TableName;)Ljava/util/List;
     301: invokeinterface #146,  1          // InterfaceMethod java/util/List.isEmpty:()Z
     306: ifne          319
     309: aload         9
     311: invokevirtual #144                // Method org/apache/hadoop/hbase/util/JVMClusterUtil$RegionServerThread.getRegionServer:()Lorg/apache/hadoop/hbase/regionserver/HRegionServer;
     314: astore        7
     316: goto          322
     319: goto          268
     322: new           #147                // class org/apache/hadoop/hbase/regionserver/CompactedHFilesDischarger
     325: dup
     326: bipush        100
     328: aconst_null
     329: aload         7
     331: iconst_0
     332: invokespecial #148                // Method org/apache/hadoop/hbase/regionserver/CompactedHFilesDischarger."<init>":(ILorg/apache/hadoop/hbase/Stoppable;Lorg/apache/hadoop/hbase/regionserver/RegionServerServices;Z)V
     335: astore        8
     337: aload         8
     339: invokevirtual #149                // Method org/apache/hadoop/hbase/regionserver/CompactedHFilesDischarger.chore:()V
     342: getstatic     #126                // Field LOG:Lorg/slf4j/Logger;
     345: ldc           #150                // String After compaction File-System state
     347: invokeinterface #128,  2          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     352: getstatic     #9                  // Field fs:Lorg/apache/hadoop/fs/FileSystem;
     355: getstatic     #15                 // Field rootDir:Lorg/apache/hadoop/fs/Path;
     358: getstatic     #126                // Field LOG:Lorg/slf4j/Logger;
     361: invokestatic  #129                // Method org/apache/hadoop/hbase/util/FSUtils.logFileSystemState:(Lorg/apache/hadoop/fs/FileSystem;Lorg/apache/hadoop/fs/Path;Lorg/slf4j/Logger;)V
     364: getstatic     #126                // Field LOG:Lorg/slf4j/Logger;
     367: ldc           #151                // String Running hfile cleaners
     369: invokeinterface #152,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     374: invokestatic  #153                // Method ensureHFileCleanersRun:()V
     377: getstatic     #126                // Field LOG:Lorg/slf4j/Logger;
     380: new           #154                // class java/lang/StringBuilder
     383: dup
     384: invokespecial #155                // Method java/lang/StringBuilder."<init>":()V
     387: ldc           #156                // String After cleaners File-System state:
     389: invokevirtual #157                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     392: getstatic     #15                 // Field rootDir:Lorg/apache/hadoop/fs/Path;
     395: invokevirtual #158                // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     398: invokevirtual #159                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     401: invokeinterface #128,  2          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     406: getstatic     #9                  // Field fs:Lorg/apache/hadoop/fs/FileSystem;
     409: getstatic     #15                 // Field rootDir:Lorg/apache/hadoop/fs/Path;
     412: getstatic     #126                // Field LOG:Lorg/slf4j/Logger;
     415: invokestatic  #129                // Method org/apache/hadoop/hbase/util/FSUtils.logFileSystemState:(Lorg/apache/hadoop/fs/FileSystem;Lorg/apache/hadoop/fs/Path;Lorg/slf4j/Logger;)V
     418: aload_3
     419: getstatic     #15                 // Field rootDir:Lorg/apache/hadoop/fs/Path;
     422: invokestatic  #160                // Method org/apache/hadoop/hbase/snapshot/SnapshotDescriptionUtils.getCompletedSnapshotDir:(Ljava/lang/String;Lorg/apache/hadoop/fs/Path;)Lorg/apache/hadoop/fs/Path;
     425: astore        9
     427: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
     430: invokevirtual #3                  // Method org/apache/hadoop/hbase/HBaseTestingUtility.getConfiguration:()Lorg/apache/hadoop/conf/Configuration;
     433: getstatic     #9                  // Field fs:Lorg/apache/hadoop/fs/FileSystem;
     436: aload         9
     438: invokestatic  #161                // Method org/apache/hadoop/hbase/snapshot/SnapshotReferenceUtil.getHFileNames:(Lorg/apache/hadoop/conf/Configuration;Lorg/apache/hadoop/fs/FileSystem;Lorg/apache/hadoop/fs/Path;)Ljava/util/Set;
     441: astore        10
     443: getstatic     #126                // Field LOG:Lorg/slf4j/Logger;
     446: ldc           #162                // String Have snapshot hfiles:
     448: invokeinterface #152,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     453: aload         10
     455: invokeinterface #163,  1          // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     460: astore        11
     462: aload         11
     464: invokeinterface #137,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     469: ifeq          497
     472: aload         11
     474: invokeinterface #138,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     479: checkcast     #164                // class java/lang/String
     482: astore        12
     484: getstatic     #126                // Field LOG:Lorg/slf4j/Logger;
     487: aload         12
     489: invokeinterface #152,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     494: goto          462
     497: aload_0
     498: getstatic     #20                 // Field archiveDir:Lorg/apache/hadoop/fs/Path;
     501: getstatic     #9                  // Field fs:Lorg/apache/hadoop/fs/FileSystem;
     504: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
     507: invokespecial #165                // Method getHFiles:(Lorg/apache/hadoop/fs/Path;Lorg/apache/hadoop/fs/FileSystem;Lorg/apache/hadoop/hbase/TableName;)Ljava/util/Collection;
     510: astore        11
     512: aload_0
     513: getstatic     #15                 // Field rootDir:Lorg/apache/hadoop/fs/Path;
     516: getstatic     #9                  // Field fs:Lorg/apache/hadoop/fs/FileSystem;
     519: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
     522: invokespecial #165                // Method getHFiles:(Lorg/apache/hadoop/fs/Path;Lorg/apache/hadoop/fs/FileSystem;Lorg/apache/hadoop/hbase/TableName;)Ljava/util/Collection;
     525: astore        12
     527: aload         10
     529: invokeinterface #163,  1          // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     534: astore        13
     536: aload         13
     538: invokeinterface #137,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     543: ifeq          637
     546: aload         13
     548: invokeinterface #138,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     553: checkcast     #164                // class java/lang/String
     556: astore        14
     558: aload         11
     560: aload         14
     562: invokeinterface #166,  2          // InterfaceMethod java/util/Collection.contains:(Ljava/lang/Object;)Z
     567: ifne          582
     570: aload         12
     572: aload         14
     574: invokeinterface #166,  2          // InterfaceMethod java/util/Collection.contains:(Ljava/lang/Object;)Z
     579: ifeq          586
     582: iconst_1
     583: goto          587
     586: iconst_0
     587: istore        15
     589: new           #154                // class java/lang/StringBuilder
     592: dup
     593: invokespecial #155                // Method java/lang/StringBuilder."<init>":()V
     596: ldc           #167                // String Archived hfiles
     598: invokevirtual #157                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     601: aload         11
     603: invokevirtual #158                // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     606: ldc           #168                // String  and table hfiles
     608: invokevirtual #157                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     611: aload         12
     613: invokevirtual #158                // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     616: ldc           #169                // String  is missing snapshot file:
     618: invokevirtual #157                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     621: aload         14
     623: invokevirtual #157                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     626: invokevirtual #159                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     629: iload         15
     631: invokestatic  #85                 // Method org/junit/Assert.assertTrue:(Ljava/lang/String;Z)V
     634: goto          536
     637: aload_1
     638: aload         4
     640: invokeinterface #170,  2          // InterfaceMethod org/apache/hadoop/hbase/client/Admin.deleteSnapshot:(Ljava/lang/String;)V
     645: aload_1
     646: invokestatic  #112                // Method org/apache/hadoop/hbase/snapshot/SnapshotTestingUtils.assertNoSnapshots:(Lorg/apache/hadoop/hbase/client/Admin;)V
     649: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
     652: invokevirtual #10                 // Method org/apache/hadoop/hbase/HBaseTestingUtility.getMiniHBaseCluster:()Lorg/apache/hadoop/hbase/MiniHBaseCluster;
     655: invokevirtual #11                 // Method org/apache/hadoop/hbase/MiniHBaseCluster.getMaster:()Lorg/apache/hadoop/hbase/master/HMaster;
     658: invokevirtual #171                // Method org/apache/hadoop/hbase/master/HMaster.getHFileCleaner:()Lorg/apache/hadoop/hbase/master/cleaner/HFileCleaner;
     661: getfield      #172                // Field org/apache/hadoop/hbase/master/cleaner/HFileCleaner.cleanersChain:Ljava/util/List;
     664: astore        13
     666: aload         13
     668: invokeinterface #136,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     673: astore        14
     675: aload         14
     677: invokeinterface #137,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     682: ifeq          719
     685: aload         14
     687: invokeinterface #138,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     692: checkcast     #173                // class org/apache/hadoop/hbase/master/cleaner/BaseHFileCleanerDelegate
     695: astore        15
     697: aload         15
     699: instanceof    #39                 // class org/apache/hadoop/hbase/master/snapshot/SnapshotHFileCleaner
     702: ifeq          716
     705: aload         15
     707: checkcast     #39                 // class org/apache/hadoop/hbase/master/snapshot/SnapshotHFileCleaner
     710: invokevirtual #174                // Method org/apache/hadoop/hbase/master/snapshot/SnapshotHFileCleaner.getFileCacheForTesting:()Lorg/apache/hadoop/hbase/master/snapshot/SnapshotFileCache;
     713: invokevirtual #175                // Method org/apache/hadoop/hbase/master/snapshot/SnapshotFileCache.triggerCacheRefreshForTesting:()V
     716: goto          675
     719: getstatic     #126                // Field LOG:Lorg/slf4j/Logger;
     722: ldc           #151                // String Running hfile cleaners
     724: invokeinterface #152,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     729: invokestatic  #153                // Method ensureHFileCleanersRun:()V
     732: getstatic     #126                // Field LOG:Lorg/slf4j/Logger;
     735: ldc           #176                // String After delete snapshot cleaners run File-System state
     737: invokeinterface #128,  2          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     742: getstatic     #9                  // Field fs:Lorg/apache/hadoop/fs/FileSystem;
     745: getstatic     #15                 // Field rootDir:Lorg/apache/hadoop/fs/Path;
     748: getstatic     #126                // Field LOG:Lorg/slf4j/Logger;
     751: invokestatic  #129                // Method org/apache/hadoop/hbase/util/FSUtils.logFileSystemState:(Lorg/apache/hadoop/fs/FileSystem;Lorg/apache/hadoop/fs/Path;Lorg/slf4j/Logger;)V
     754: aload_0
     755: getstatic     #20                 // Field archiveDir:Lorg/apache/hadoop/fs/Path;
     758: getstatic     #9                  // Field fs:Lorg/apache/hadoop/fs/FileSystem;
     761: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
     764: invokespecial #165                // Method getHFiles:(Lorg/apache/hadoop/fs/Path;Lorg/apache/hadoop/fs/FileSystem;Lorg/apache/hadoop/hbase/TableName;)Ljava/util/Collection;
     767: astore        11
     769: ldc           #177                // String Still have some hfiles in the archive, when their snapshot has been deleted.
     771: lconst_0
     772: aload         11
     774: invokeinterface #178,  1          // InterfaceMethod java/util/Collection.size:()I
     779: i2l
     780: invokestatic  #95                 // Method org/junit/Assert.assertEquals:(Ljava/lang/String;JJ)V
     783: return

  public void testAsyncSnapshotWillNotBlockSnapshotHFileCleaner() throws java.lang.Exception;
    Code:
       0: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
       3: invokevirtual #119                // Method org/apache/hadoop/hbase/HBaseTestingUtility.getConnection:()Lorg/apache/hadoop/hbase/client/Connection;
       6: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
       9: invokeinterface #120,  2          // InterfaceMethod org/apache/hadoop/hbase/client/Connection.getTable:(Lorg/apache/hadoop/hbase/TableName;)Lorg/apache/hadoop/hbase/client/Table;
      14: astore_1
      15: iconst_0
      16: istore_2
      17: iload_2
      18: bipush        10
      20: if_icmpge     63
      23: new           #188                // class org/apache/hadoop/hbase/client/Put
      26: dup
      27: iload_2
      28: invokestatic  #189                // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(I)[B
      31: invokespecial #190                // Method org/apache/hadoop/hbase/client/Put."<init>":([B)V
      34: getstatic     #48                 // Field TEST_FAM:[B
      37: ldc           #191                // String q
      39: invokestatic  #192                // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(Ljava/lang/String;)[B
      42: iload_2
      43: invokestatic  #189                // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(I)[B
      46: invokevirtual #193                // Method org/apache/hadoop/hbase/client/Put.addColumn:([B[B[B)Lorg/apache/hadoop/hbase/client/Put;
      49: astore_3
      50: aload_1
      51: aload_3
      52: invokeinterface #194,  2          // InterfaceMethod org/apache/hadoop/hbase/client/Table.put:(Lorg/apache/hadoop/hbase/client/Put;)V
      57: iinc          2, 1
      60: goto          17
      63: ldc           #195                // String testAsyncSnapshotWillNotBlockSnapshotHFileCleaner01
      65: astore_2
      66: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      69: invokevirtual #53                 // Method org/apache/hadoop/hbase/HBaseTestingUtility.getAdmin:()Lorg/apache/hadoop/hbase/client/Admin;
      72: new           #196                // class org/apache/hadoop/hbase/client/SnapshotDescription
      75: dup
      76: aload_2
      77: getstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
      80: getstatic     #197                // Field org/apache/hadoop/hbase/client/SnapshotType.FLUSH:Lorg/apache/hadoop/hbase/client/SnapshotType;
      83: invokespecial #198                // Method org/apache/hadoop/hbase/client/SnapshotDescription."<init>":(Ljava/lang/String;Lorg/apache/hadoop/hbase/TableName;Lorg/apache/hadoop/hbase/client/SnapshotType;)V
      86: invokeinterface #199,  2          // InterfaceMethod org/apache/hadoop/hbase/client/Admin.snapshotAsync:(Lorg/apache/hadoop/hbase/client/SnapshotDescription;)Ljava/util/concurrent/Future;
      91: astore_3
      92: getstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      95: invokevirtual #3                  // Method org/apache/hadoop/hbase/HBaseTestingUtility.getConfiguration:()Lorg/apache/hadoop/conf/Configuration;
      98: ldc2_w        #200                // long 10000l
     101: ldc2_w        #202                // long 200l
     104: aload_2
     105: invokedynamic #204,  0            // InvokeDynamic #0:evaluate:(Ljava/lang/String;)Lorg/apache/hadoop/hbase/Waiter$Predicate;
     110: invokestatic  #205                // Method org/apache/hadoop/hbase/Waiter.waitFor:(Lorg/apache/hadoop/conf/Configuration;JJLorg/apache/hadoop/hbase/Waiter$Predicate;)J
     113: pop2
     114: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
     117: invokevirtual #50                 // Method org/apache/hadoop/hbase/master/HMaster.getSnapshotManager:()Lorg/apache/hadoop/hbase/master/snapshot/SnapshotManager;
     120: invokevirtual #206                // Method org/apache/hadoop/hbase/master/snapshot/SnapshotManager.isTakingAnySnapshot:()Z
     123: invokestatic  #207                // Method org/junit/Assert.assertTrue:(Z)V
     126: aload_3
     127: invokeinterface #208,  1          // InterfaceMethod java/util/concurrent/Future.get:()Ljava/lang/Object;
     132: pop
     133: getstatic     #12                 // Field master:Lorg/apache/hadoop/hbase/master/HMaster;
     136: invokevirtual #50                 // Method org/apache/hadoop/hbase/master/HMaster.getSnapshotManager:()Lorg/apache/hadoop/hbase/master/snapshot/SnapshotManager;
     139: invokevirtual #206                // Method org/apache/hadoop/hbase/master/snapshot/SnapshotManager.isTakingAnySnapshot:()Z
     142: invokestatic  #209                // Method org/junit/Assert.assertFalse:(Z)V
     145: return

  static {};
    Code:
       0: ldc           #5                  // class org/apache/hadoop/hbase/master/cleaner/TestSnapshotFromMaster
       2: invokestatic  #213                // Method org/apache/hadoop/hbase/HBaseClassTestRule.forClass:(Ljava/lang/Class;)Lorg/apache/hadoop/hbase/HBaseClassTestRule;
       5: putstatic     #214                // Field CLASS_RULE:Lorg/apache/hadoop/hbase/HBaseClassTestRule;
       8: ldc           #5                  // class org/apache/hadoop/hbase/master/cleaner/TestSnapshotFromMaster
      10: invokestatic  #215                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
      13: putstatic     #126                // Field LOG:Lorg/slf4j/Logger;
      16: new           #216                // class org/apache/hadoop/hbase/HBaseTestingUtility
      19: dup
      20: invokespecial #217                // Method org/apache/hadoop/hbase/HBaseTestingUtility."<init>":()V
      23: putstatic     #2                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      26: ldc           #218                // String fam
      28: invokestatic  #192                // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(Ljava/lang/String;)[B
      31: putstatic     #48                 // Field TEST_FAM:[B
      34: ldc           #184                // String test
      36: invokestatic  #219                // Method org/apache/hadoop/hbase/TableName.valueOf:(Ljava/lang/String;)Lorg/apache/hadoop/hbase/TableName;
      39: putstatic     #47                 // Field TABLE_NAME:Lorg/apache/hadoop/hbase/TableName;
      42: return
}
