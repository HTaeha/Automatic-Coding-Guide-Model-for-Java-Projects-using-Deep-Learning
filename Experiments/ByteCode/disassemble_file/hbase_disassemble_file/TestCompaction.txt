Compiled from "TestCompaction.java"
public class org.apache.hadoop.hbase.regionserver.TestCompaction {
  public static final org.apache.hadoop.hbase.HBaseClassTestRule CLASS_RULE;

  public org.junit.rules.TestName name;

  protected org.apache.hadoop.conf.Configuration conf;

  public org.apache.hadoop.hbase.regionserver.TestCompaction();
    Code:
       0: aload_0
       1: invokespecial #3                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #4                  // class org/junit/rules/TestName
       8: dup
       9: invokespecial #5                  // Method org/junit/rules/TestName."<init>":()V
      12: putfield      #6                  // Field name:Lorg/junit/rules/TestName;
      15: aload_0
      16: getstatic     #7                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      19: invokevirtual #8                  // Method org/apache/hadoop/hbase/HBaseTestingUtility.getConfiguration:()Lorg/apache/hadoop/conf/Configuration;
      22: putfield      #9                  // Field conf:Lorg/apache/hadoop/conf/Configuration;
      25: aload_0
      26: aconst_null
      27: putfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      30: aload_0
      31: aconst_null
      32: putfield      #10                 // Field htd:Lorg/apache/hadoop/hbase/HTableDescriptor;
      35: aload_0
      36: getstatic     #11                 // Field org/apache/hadoop/hbase/HBaseTestingUtility.START_KEY:Ljava/lang/String;
      39: invokestatic  #12                 // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(Ljava/lang/String;)[B
      42: putfield      #13                 // Field STARTROW:[B
      45: aload_0
      46: ldc           #14                 // String cf
      48: invokestatic  #12                 // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(Ljava/lang/String;)[B
      51: putfield      #15                 // Field FAMILY:[B
      54: aload_0
      55: getfield      #9                  // Field conf:Lorg/apache/hadoop/conf/Configuration;
      58: ldc           #17                 // String hbase.hregion.memstore.flush.size
      60: ldc           #18                 // int 1048576
      62: invokevirtual #19                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      65: aload_0
      66: getfield      #9                  // Field conf:Lorg/apache/hadoop/conf/Configuration;
      69: ldc           #20                 // String hbase.hregion.memstore.block.multiplier
      71: bipush        100
      73: invokevirtual #19                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      76: aload_0
      77: getfield      #9                  // Field conf:Lorg/apache/hadoop/conf/Configuration;
      80: ldc           #22                 // String hbase.regionserver.throughput.controller
      82: ldc           #23                 // class org/apache/hadoop/hbase/regionserver/throttle/NoLimitThroughputController
      84: invokevirtual #24                 // Method java/lang/Class.getName:()Ljava/lang/String;
      87: invokevirtual #25                 // Method org/apache/hadoop/conf/Configuration.set:(Ljava/lang/String;Ljava/lang/String;)V
      90: aload_0
      91: aload_0
      92: getfield      #9                  // Field conf:Lorg/apache/hadoop/conf/Configuration;
      95: ldc           #26                 // String hbase.hstore.compactionThreshold
      97: iconst_3
      98: invokevirtual #27                 // Method org/apache/hadoop/conf/Configuration.getInt:(Ljava/lang/String;I)I
     101: putfield      #28                 // Field compactionThreshold:I
     104: aload_0
     105: getstatic     #29                 // Field org/apache/hadoop/hbase/HBaseTestingUtility.START_KEY_BYTES:[B
     108: invokevirtual #30                 // Method "[B".clone:()Ljava/lang/Object;
     111: checkcast     #31                 // class "[B"
     114: putfield      #32                 // Field secondRowBytes:[B
     117: aload_0
     118: getfield      #32                 // Field secondRowBytes:[B
     121: getstatic     #29                 // Field org/apache/hadoop/hbase/HBaseTestingUtility.START_KEY_BYTES:[B
     124: arraylength
     125: iconst_1
     126: isub
     127: dup2
     128: baload
     129: iconst_1
     130: iadd
     131: i2b
     132: bastore
     133: aload_0
     134: getstatic     #29                 // Field org/apache/hadoop/hbase/HBaseTestingUtility.START_KEY_BYTES:[B
     137: invokevirtual #33                 // Method "[B".clone:()Ljava/lang/Object;
     140: checkcast     #31                 // class "[B"
     143: putfield      #34                 // Field thirdRowBytes:[B
     146: aload_0
     147: getfield      #34                 // Field thirdRowBytes:[B
     150: getstatic     #29                 // Field org/apache/hadoop/hbase/HBaseTestingUtility.START_KEY_BYTES:[B
     153: arraylength
     154: iconst_1
     155: isub
     156: aload_0
     157: getfield      #34                 // Field thirdRowBytes:[B
     160: getstatic     #29                 // Field org/apache/hadoop/hbase/HBaseTestingUtility.START_KEY_BYTES:[B
     163: arraylength
     164: iconst_1
     165: isub
     166: baload
     167: iconst_2
     168: iadd
     169: i2b
     170: bastore
     171: return

  public void setUp() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getstatic     #7                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
       4: aload_0
       5: getfield      #6                  // Field name:Lorg/junit/rules/TestName;
       8: invokevirtual #35                 // Method org/junit/rules/TestName.getMethodName:()Ljava/lang/String;
      11: invokevirtual #36                 // Method org/apache/hadoop/hbase/HBaseTestingUtility.createTableDescriptor:(Ljava/lang/String;)Lorg/apache/hadoop/hbase/HTableDescriptor;
      14: putfield      #10                 // Field htd:Lorg/apache/hadoop/hbase/HTableDescriptor;
      17: aload_0
      18: getfield      #6                  // Field name:Lorg/junit/rules/TestName;
      21: invokevirtual #35                 // Method org/junit/rules/TestName.getMethodName:()Ljava/lang/String;
      24: ldc           #37                 // String testCompactionSeqId
      26: invokevirtual #38                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      29: ifeq          89
      32: getstatic     #7                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      35: invokevirtual #8                  // Method org/apache/hadoop/hbase/HBaseTestingUtility.getConfiguration:()Lorg/apache/hadoop/conf/Configuration;
      38: ldc           #39                 // String hbase.hstore.compaction.kv.max
      40: ldc           #40                 // String 10
      42: invokevirtual #25                 // Method org/apache/hadoop/conf/Configuration.set:(Ljava/lang/String;Ljava/lang/String;)V
      45: getstatic     #7                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      48: invokevirtual #8                  // Method org/apache/hadoop/hbase/HBaseTestingUtility.getConfiguration:()Lorg/apache/hadoop/conf/Configuration;
      51: ldc           #42                 // String hbase.hstore.defaultengine.compactor.class
      53: ldc           #43                 // class org/apache/hadoop/hbase/regionserver/TestCompaction$DummyCompactor
      55: invokevirtual #24                 // Method java/lang/Class.getName:()Ljava/lang/String;
      58: invokevirtual #25                 // Method org/apache/hadoop/conf/Configuration.set:(Ljava/lang/String;Ljava/lang/String;)V
      61: new           #44                 // class org/apache/hadoop/hbase/HColumnDescriptor
      64: dup
      65: aload_0
      66: getfield      #15                 // Field FAMILY:[B
      69: invokespecial #45                 // Method org/apache/hadoop/hbase/HColumnDescriptor."<init>":([B)V
      72: astore_1
      73: aload_1
      74: ldc           #46                 // int 65536
      76: invokevirtual #47                 // Method org/apache/hadoop/hbase/HColumnDescriptor.setMaxVersions:(I)Lorg/apache/hadoop/hbase/HColumnDescriptor;
      79: pop
      80: aload_0
      81: getfield      #10                 // Field htd:Lorg/apache/hadoop/hbase/HTableDescriptor;
      84: aload_1
      85: invokevirtual #48                 // Method org/apache/hadoop/hbase/HTableDescriptor.addFamily:(Lorg/apache/hadoop/hbase/HColumnDescriptor;)Lorg/apache/hadoop/hbase/HTableDescriptor;
      88: pop
      89: aload_0
      90: getstatic     #7                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      93: aload_0
      94: getfield      #10                 // Field htd:Lorg/apache/hadoop/hbase/HTableDescriptor;
      97: aconst_null
      98: aconst_null
      99: invokevirtual #49                 // Method org/apache/hadoop/hbase/HBaseTestingUtility.createLocalHRegion:(Lorg/apache/hadoop/hbase/client/TableDescriptor;[B[B)Lorg/apache/hadoop/hbase/regionserver/HRegion;
     102: putfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     105: return

  public void tearDown() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
       4: invokevirtual #50                 // Method org/apache/hadoop/hbase/regionserver/HRegion.getWAL:()Lorg/apache/hadoop/hbase/wal/WAL;
       7: astore_1
       8: aload_0
       9: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      12: invokevirtual #51                 // Method org/apache/hadoop/hbase/regionserver/HRegion.close:()Ljava/util/Map;
      15: pop
      16: aload_1
      17: invokeinterface #52,  1           // InterfaceMethod org/apache/hadoop/hbase/wal/WAL.close:()V
      22: return

  public void testInterruptCompaction() throws java.lang.Exception;
    Code:
       0: lconst_0
       1: aload_0
       2: invokespecial #53                 // Method count:()I
       5: i2l
       6: invokestatic  #54                 // Method org/junit/Assert.assertEquals:(JJ)V
       9: getstatic     #55                 // Field org/apache/hadoop/hbase/regionserver/HStore.closeCheckInterval:I
      12: istore_1
      13: sipush        10000
      16: putstatic     #55                 // Field org/apache/hadoop/hbase/regionserver/HStore.closeCheckInterval:I
      19: ldc2_w        #56                 // double 15.0d
      22: aload_0
      23: getfield      #28                 // Field compactionThreshold:I
      26: i2d
      27: ddiv
      28: invokestatic  #58                 // Method java/lang/Math.ceil:(D)D
      31: d2i
      32: istore_2
      33: sipush        1000
      36: newarray       byte
      38: astore_3
      39: iconst_0
      40: istore        4
      42: iload         4
      44: aload_0
      45: getfield      #28                 // Field compactionThreshold:I
      48: if_icmpge     160
      51: new           #59                 // class org/apache/hadoop/hbase/regionserver/RegionAsTable
      54: dup
      55: aload_0
      56: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      59: invokespecial #60                 // Method org/apache/hadoop/hbase/regionserver/RegionAsTable."<init>":(Lorg/apache/hadoop/hbase/regionserver/Region;)V
      62: astore        5
      64: new           #61                 // class org/apache/hadoop/hbase/client/Put
      67: dup
      68: aload_0
      69: getfield      #13                 // Field STARTROW:[B
      72: iload         4
      74: invokestatic  #62                 // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(I)[B
      77: invokestatic  #63                 // Method org/apache/hadoop/hbase/util/Bytes.add:([B[B)[B
      80: invokespecial #64                 // Method org/apache/hadoop/hbase/client/Put."<init>":([B)V
      83: astore        6
      85: aload         6
      87: getstatic     #65                 // Field org/apache/hadoop/hbase/client/Durability.SKIP_WAL:Lorg/apache/hadoop/hbase/client/Durability;
      90: invokevirtual #66                 // Method org/apache/hadoop/hbase/client/Put.setDurability:(Lorg/apache/hadoop/hbase/client/Durability;)Lorg/apache/hadoop/hbase/client/Put;
      93: pop
      94: iconst_0
      95: istore        7
      97: iload         7
      99: iload_2
     100: if_icmpge     124
     103: aload         6
     105: getstatic     #67                 // Field COLUMN_FAMILY:[B
     108: iload         7
     110: invokestatic  #62                 // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(I)[B
     113: aload_3
     114: invokevirtual #68                 // Method org/apache/hadoop/hbase/client/Put.addColumn:([B[B[B)Lorg/apache/hadoop/hbase/client/Put;
     117: pop
     118: iinc          7, 1
     121: goto          97
     124: aload         5
     126: getstatic     #67                 // Field COLUMN_FAMILY:[B
     129: invokestatic  #69                 // Method org/apache/hadoop/hbase/util/Bytes.toString:([B)Ljava/lang/String;
     132: invokestatic  #70                 // Method org/apache/hadoop/hbase/HBaseTestCase.addContent:(Lorg/apache/hadoop/hbase/client/Table;Ljava/lang/String;)J
     135: pop2
     136: aload         5
     138: aload         6
     140: invokeinterface #71,  2           // InterfaceMethod org/apache/hadoop/hbase/client/Table.put:(Lorg/apache/hadoop/hbase/client/Put;)V
     145: aload_0
     146: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     149: iconst_1
     150: invokevirtual #72                 // Method org/apache/hadoop/hbase/regionserver/HRegion.flush:(Z)Lorg/apache/hadoop/hbase/regionserver/HRegion$FlushResult;
     153: pop
     154: iinc          4, 1
     157: goto          42
     160: aload_0
     161: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     164: invokestatic  #73                 // Method org/mockito/Mockito.spy:(Ljava/lang/Object;)Ljava/lang/Object;
     167: checkcast     #74                 // class org/apache/hadoop/hbase/regionserver/HRegion
     170: astore        4
     172: new           #75                 // class org/apache/hadoop/hbase/regionserver/TestCompaction$1
     175: dup
     176: aload_0
     177: invokespecial #76                 // Method org/apache/hadoop/hbase/regionserver/TestCompaction$1."<init>":(Lorg/apache/hadoop/hbase/regionserver/TestCompaction;)V
     180: invokestatic  #77                 // Method org/mockito/Mockito.doAnswer:(Lorg/mockito/stubbing/Answer;)Lorg/mockito/stubbing/Stubber;
     183: aload         4
     185: invokeinterface #78,  2           // InterfaceMethod org/mockito/stubbing/Stubber.when:(Ljava/lang/Object;)Ljava/lang/Object;
     190: checkcast     #74                 // class org/apache/hadoop/hbase/regionserver/HRegion
     193: invokevirtual #79                 // Method org/apache/hadoop/hbase/regionserver/HRegion.doRegionCompactionPrep:()V
     196: aload         4
     198: invokevirtual #80                 // Method org/apache/hadoop/hbase/regionserver/HRegion.compactStores:()V
     201: aload_0
     202: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     205: getstatic     #67                 // Field COLUMN_FAMILY:[B
     208: invokevirtual #81                 // Method org/apache/hadoop/hbase/regionserver/HRegion.getStore:([B)Lorg/apache/hadoop/hbase/regionserver/HStore;
     211: astore        5
     213: aload_0
     214: getfield      #28                 // Field compactionThreshold:I
     217: i2l
     218: aload         5
     220: invokevirtual #82                 // Method org/apache/hadoop/hbase/regionserver/HStore.getStorefilesCount:()I
     223: i2l
     224: invokestatic  #54                 // Method org/junit/Assert.assertEquals:(JJ)V
     227: aload         5
     229: invokevirtual #83                 // Method org/apache/hadoop/hbase/regionserver/HStore.getStorefilesSize:()J
     232: ldc2_w        #84                 // long 15000l
     235: lcmp
     236: ifle          243
     239: iconst_1
     240: goto          244
     243: iconst_0
     244: invokestatic  #86                 // Method org/junit/Assert.assertTrue:(Z)V
     247: aload_0
     248: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     251: invokevirtual #87                 // Method org/apache/hadoop/hbase/regionserver/HRegion.getFilesystem:()Lorg/apache/hadoop/fs/FileSystem;
     254: aload_0
     255: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     258: invokevirtual #88                 // Method org/apache/hadoop/hbase/regionserver/HRegion.getRegionFileSystem:()Lorg/apache/hadoop/hbase/regionserver/HRegionFileSystem;
     261: invokevirtual #89                 // Method org/apache/hadoop/hbase/regionserver/HRegionFileSystem.getTempDir:()Lorg/apache/hadoop/fs/Path;
     264: invokevirtual #90                 // Method org/apache/hadoop/fs/FileSystem.listStatus:(Lorg/apache/hadoop/fs/Path;)[Lorg/apache/hadoop/fs/FileStatus;
     267: astore        6
     269: lconst_1
     270: aload         6
     272: arraylength
     273: i2l
     274: invokestatic  #54                 // Method org/junit/Assert.assertEquals:(JJ)V
     277: new           #91                 // class org/apache/hadoop/fs/Path
     280: dup
     281: aload_0
     282: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     285: invokevirtual #88                 // Method org/apache/hadoop/hbase/regionserver/HRegion.getRegionFileSystem:()Lorg/apache/hadoop/hbase/regionserver/HRegionFileSystem;
     288: invokevirtual #89                 // Method org/apache/hadoop/hbase/regionserver/HRegionFileSystem.getTempDir:()Lorg/apache/hadoop/fs/Path;
     291: getstatic     #67                 // Field COLUMN_FAMILY:[B
     294: invokestatic  #69                 // Method org/apache/hadoop/hbase/util/Bytes.toString:([B)Ljava/lang/String;
     297: invokespecial #92                 // Method org/apache/hadoop/fs/Path."<init>":(Lorg/apache/hadoop/fs/Path;Ljava/lang/String;)V
     300: astore        7
     302: aload_0
     303: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     306: invokevirtual #87                 // Method org/apache/hadoop/hbase/regionserver/HRegion.getFilesystem:()Lorg/apache/hadoop/fs/FileSystem;
     309: aload         7
     311: invokevirtual #93                 // Method org/apache/hadoop/fs/FileSystem.exists:(Lorg/apache/hadoop/fs/Path;)Z
     314: invokestatic  #86                 // Method org/junit/Assert.assertTrue:(Z)V
     317: aload_0
     318: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     321: invokevirtual #87                 // Method org/apache/hadoop/hbase/regionserver/HRegion.getFilesystem:()Lorg/apache/hadoop/fs/FileSystem;
     324: aload         7
     326: invokevirtual #90                 // Method org/apache/hadoop/fs/FileSystem.listStatus:(Lorg/apache/hadoop/fs/Path;)[Lorg/apache/hadoop/fs/FileStatus;
     329: astore        6
     331: lconst_0
     332: aload         6
     334: arraylength
     335: i2l
     336: invokestatic  #54                 // Method org/junit/Assert.assertEquals:(JJ)V
     339: aload_0
     340: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     343: getfield      #94                 // Field org/apache/hadoop/hbase/regionserver/HRegion.writestate:Lorg/apache/hadoop/hbase/regionserver/HRegion$WriteState;
     346: iconst_1
     347: putfield      #95                 // Field org/apache/hadoop/hbase/regionserver/HRegion$WriteState.writesEnabled:Z
     350: iload_1
     351: putstatic     #55                 // Field org/apache/hadoop/hbase/regionserver/HStore.closeCheckInterval:I
     354: iconst_0
     355: istore_2
     356: iload_2
     357: aload_0
     358: getfield      #28                 // Field compactionThreshold:I
     361: if_icmpge     422
     364: new           #96                 // class org/apache/hadoop/hbase/client/Delete
     367: dup
     368: aload_0
     369: getfield      #13                 // Field STARTROW:[B
     372: iload_2
     373: invokestatic  #62                 // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(I)[B
     376: invokestatic  #63                 // Method org/apache/hadoop/hbase/util/Bytes.add:([B[B)[B
     379: invokespecial #97                 // Method org/apache/hadoop/hbase/client/Delete."<init>":([B)V
     382: astore_3
     383: iconst_2
     384: anewarray     #31                 // class "[B"
     387: dup
     388: iconst_0
     389: getstatic     #67                 // Field COLUMN_FAMILY:[B
     392: aastore
     393: dup
     394: iconst_1
     395: aconst_null
     396: aastore
     397: astore        4
     399: aload_3
     400: aload         4
     402: iconst_0
     403: aaload
     404: invokevirtual #98                 // Method org/apache/hadoop/hbase/client/Delete.addFamily:([B)Lorg/apache/hadoop/hbase/client/Delete;
     407: pop
     408: aload_0
     409: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     412: aload_3
     413: invokevirtual #99                 // Method org/apache/hadoop/hbase/regionserver/HRegion.delete:(Lorg/apache/hadoop/hbase/client/Delete;)V
     416: iinc          2, 1
     419: goto          356
     422: aload_0
     423: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     426: iconst_1
     427: invokevirtual #72                 // Method org/apache/hadoop/hbase/regionserver/HRegion.flush:(Z)Lorg/apache/hadoop/hbase/regionserver/HRegion$FlushResult;
     430: pop
     431: sipush        1000
     434: istore_2
     435: aload_0
     436: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     439: getfield      #100                // Field org/apache/hadoop/hbase/regionserver/HRegion.stores:Ljava/util/Map;
     442: invokeinterface #101,  1          // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
     447: invokeinterface #102,  1          // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
     452: astore_3
     453: aload_3
     454: invokeinterface #103,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     459: ifeq          510
     462: aload_3
     463: invokeinterface #104,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     468: checkcast     #105                // class org/apache/hadoop/hbase/regionserver/HStore
     471: astore        4
     473: aload         4
     475: invokevirtual #106                // Method org/apache/hadoop/hbase/regionserver/HStore.getScanInfo:()Lorg/apache/hadoop/hbase/regionserver/ScanInfo;
     478: astore        5
     480: aload         5
     482: aload         5
     484: invokevirtual #107                // Method org/apache/hadoop/hbase/regionserver/ScanInfo.getMaxVersions:()I
     487: ldc2_w        #108                // long 1000l
     490: aload         5
     492: invokevirtual #110                // Method org/apache/hadoop/hbase/regionserver/ScanInfo.getKeepDeletedCells:()Lorg/apache/hadoop/hbase/KeepDeletedCells;
     495: invokevirtual #111                // Method org/apache/hadoop/hbase/regionserver/ScanInfo.customize:(IJLorg/apache/hadoop/hbase/KeepDeletedCells;)Lorg/apache/hadoop/hbase/regionserver/ScanInfo;
     498: astore        6
     500: aload         4
     502: aload         6
     504: invokevirtual #112                // Method org/apache/hadoop/hbase/regionserver/HStore.setScanInfo:(Lorg/apache/hadoop/hbase/regionserver/ScanInfo;)V
     507: goto          453
     510: ldc2_w        #108                // long 1000l
     513: invokestatic  #113                // Method java/lang/Thread.sleep:(J)V
     516: aload_0
     517: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     520: iconst_1
     521: invokevirtual #114                // Method org/apache/hadoop/hbase/regionserver/HRegion.compact:(Z)V
     524: lconst_0
     525: aload_0
     526: invokespecial #53                 // Method count:()I
     529: i2l
     530: invokestatic  #54                 // Method org/junit/Assert.assertEquals:(JJ)V
     533: goto          745
     536: astore        8
     538: aload_0
     539: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     542: getfield      #94                 // Field org/apache/hadoop/hbase/regionserver/HRegion.writestate:Lorg/apache/hadoop/hbase/regionserver/HRegion$WriteState;
     545: iconst_1
     546: putfield      #95                 // Field org/apache/hadoop/hbase/regionserver/HRegion$WriteState.writesEnabled:Z
     549: iload_1
     550: putstatic     #55                 // Field org/apache/hadoop/hbase/regionserver/HStore.closeCheckInterval:I
     553: iconst_0
     554: istore        9
     556: iload         9
     558: aload_0
     559: getfield      #28                 // Field compactionThreshold:I
     562: if_icmpge     627
     565: new           #96                 // class org/apache/hadoop/hbase/client/Delete
     568: dup
     569: aload_0
     570: getfield      #13                 // Field STARTROW:[B
     573: iload         9
     575: invokestatic  #62                 // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(I)[B
     578: invokestatic  #63                 // Method org/apache/hadoop/hbase/util/Bytes.add:([B[B)[B
     581: invokespecial #97                 // Method org/apache/hadoop/hbase/client/Delete."<init>":([B)V
     584: astore        10
     586: iconst_2
     587: anewarray     #31                 // class "[B"
     590: dup
     591: iconst_0
     592: getstatic     #67                 // Field COLUMN_FAMILY:[B
     595: aastore
     596: dup
     597: iconst_1
     598: aconst_null
     599: aastore
     600: astore        11
     602: aload         10
     604: aload         11
     606: iconst_0
     607: aaload
     608: invokevirtual #98                 // Method org/apache/hadoop/hbase/client/Delete.addFamily:([B)Lorg/apache/hadoop/hbase/client/Delete;
     611: pop
     612: aload_0
     613: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     616: aload         10
     618: invokevirtual #99                 // Method org/apache/hadoop/hbase/regionserver/HRegion.delete:(Lorg/apache/hadoop/hbase/client/Delete;)V
     621: iinc          9, 1
     624: goto          556
     627: aload_0
     628: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     631: iconst_1
     632: invokevirtual #72                 // Method org/apache/hadoop/hbase/regionserver/HRegion.flush:(Z)Lorg/apache/hadoop/hbase/regionserver/HRegion$FlushResult;
     635: pop
     636: sipush        1000
     639: istore        9
     641: aload_0
     642: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     645: getfield      #100                // Field org/apache/hadoop/hbase/regionserver/HRegion.stores:Ljava/util/Map;
     648: invokeinterface #101,  1          // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
     653: invokeinterface #102,  1          // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
     658: astore        10
     660: aload         10
     662: invokeinterface #103,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     667: ifeq          719
     670: aload         10
     672: invokeinterface #104,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     677: checkcast     #105                // class org/apache/hadoop/hbase/regionserver/HStore
     680: astore        11
     682: aload         11
     684: invokevirtual #106                // Method org/apache/hadoop/hbase/regionserver/HStore.getScanInfo:()Lorg/apache/hadoop/hbase/regionserver/ScanInfo;
     687: astore        12
     689: aload         12
     691: aload         12
     693: invokevirtual #107                // Method org/apache/hadoop/hbase/regionserver/ScanInfo.getMaxVersions:()I
     696: ldc2_w        #108                // long 1000l
     699: aload         12
     701: invokevirtual #110                // Method org/apache/hadoop/hbase/regionserver/ScanInfo.getKeepDeletedCells:()Lorg/apache/hadoop/hbase/KeepDeletedCells;
     704: invokevirtual #111                // Method org/apache/hadoop/hbase/regionserver/ScanInfo.customize:(IJLorg/apache/hadoop/hbase/KeepDeletedCells;)Lorg/apache/hadoop/hbase/regionserver/ScanInfo;
     707: astore        13
     709: aload         11
     711: aload         13
     713: invokevirtual #112                // Method org/apache/hadoop/hbase/regionserver/HStore.setScanInfo:(Lorg/apache/hadoop/hbase/regionserver/ScanInfo;)V
     716: goto          660
     719: ldc2_w        #108                // long 1000l
     722: invokestatic  #113                // Method java/lang/Thread.sleep:(J)V
     725: aload_0
     726: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     729: iconst_1
     730: invokevirtual #114                // Method org/apache/hadoop/hbase/regionserver/HRegion.compact:(Z)V
     733: lconst_0
     734: aload_0
     735: invokespecial #53                 // Method count:()I
     738: i2l
     739: invokestatic  #54                 // Method org/junit/Assert.assertEquals:(JJ)V
     742: aload         8
     744: athrow
     745: return
    Exception table:
       from    to  target type
          19   339   536   any
         536   538   536   any

  public void testCompactionWithCorruptResult() throws java.lang.Exception;
    Code:
       0: bipush        10
       2: istore_1
       3: iconst_0
       4: istore_2
       5: iload_2
       6: iload_1
       7: if_icmpge     24
      10: aload_0
      11: aload_0
      12: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      15: invokespecial #124                // Method createStoreFile:(Lorg/apache/hadoop/hbase/regionserver/HRegion;)V
      18: iinc          2, 1
      21: goto          5
      24: aload_0
      25: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      28: getstatic     #67                 // Field COLUMN_FAMILY:[B
      31: invokevirtual #81                 // Method org/apache/hadoop/hbase/regionserver/HRegion.getStore:([B)Lorg/apache/hadoop/hbase/regionserver/HStore;
      34: astore_2
      35: aload_2
      36: invokevirtual #117                // Method org/apache/hadoop/hbase/regionserver/HStore.getStorefiles:()Ljava/util/Collection;
      39: astore_3
      40: aload_2
      41: getfield      #125                // Field org/apache/hadoop/hbase/regionserver/HStore.storeEngine:Lorg/apache/hadoop/hbase/regionserver/StoreEngine;
      44: invokevirtual #126                // Method org/apache/hadoop/hbase/regionserver/StoreEngine.getCompactor:()Lorg/apache/hadoop/hbase/regionserver/compactions/Compactor;
      47: checkcast     #127                // class org/apache/hadoop/hbase/regionserver/compactions/DefaultCompactor
      50: astore        4
      52: aload         4
      54: aload_3
      55: iconst_0
      56: invokevirtual #128                // Method org/apache/hadoop/hbase/regionserver/compactions/DefaultCompactor.compactForTesting:(Ljava/util/Collection;Z)Ljava/util/List;
      59: pop
      60: aload_2
      61: invokevirtual #129                // Method org/apache/hadoop/hbase/regionserver/HStore.getFileSystem:()Lorg/apache/hadoop/fs/FileSystem;
      64: astore        5
      66: aload_2
      67: invokevirtual #130                // Method org/apache/hadoop/hbase/regionserver/HStore.getRegionFileSystem:()Lorg/apache/hadoop/hbase/regionserver/HRegionFileSystem;
      70: invokevirtual #131                // Method org/apache/hadoop/hbase/regionserver/HRegionFileSystem.createTempName:()Lorg/apache/hadoop/fs/Path;
      73: astore        6
      75: aload         5
      77: aload         6
      79: aconst_null
      80: iconst_1
      81: sipush        512
      84: iconst_3
      85: ldc2_w        #132                // long 1024l
      88: aconst_null
      89: invokevirtual #134                // Method org/apache/hadoop/fs/FileSystem.create:(Lorg/apache/hadoop/fs/Path;Lorg/apache/hadoop/fs/permission/FsPermission;ZISJLorg/apache/hadoop/util/Progressable;)Lorg/apache/hadoop/fs/FSDataOutputStream;
      92: astore        7
      94: aload         7
      96: ldc           #135                // String CORRUPT FILE!!!!
      98: invokevirtual #136                // Method org/apache/hadoop/fs/FSDataOutputStream.writeChars:(Ljava/lang/String;)V
     101: aload         7
     103: invokevirtual #137                // Method org/apache/hadoop/fs/FSDataOutputStream.close:()V
     106: aload_2
     107: invokevirtual #130                // Method org/apache/hadoop/hbase/regionserver/HStore.getRegionFileSystem:()Lorg/apache/hadoop/hbase/regionserver/HRegionFileSystem;
     110: getstatic     #67                 // Field COLUMN_FAMILY:[B
     113: invokestatic  #69                 // Method org/apache/hadoop/hbase/util/Bytes.toString:([B)Ljava/lang/String;
     116: aload         6
     118: invokevirtual #138                // Method org/apache/hadoop/hbase/regionserver/HRegionFileSystem.commitStoreFile:(Ljava/lang/String;Lorg/apache/hadoop/fs/Path;)Lorg/apache/hadoop/fs/Path;
     121: astore        8
     123: aload_2
     124: aload         8
     126: invokevirtual #139                // Method org/apache/hadoop/hbase/regionserver/HStore.moveFileIntoPlace:(Lorg/apache/hadoop/fs/Path;)Lorg/apache/hadoop/hbase/regionserver/HStoreFile;
     129: pop
     130: goto          164
     133: astore        9
     135: aload         5
     137: aload         8
     139: invokevirtual #93                 // Method org/apache/hadoop/fs/FileSystem.exists:(Lorg/apache/hadoop/fs/Path;)Z
     142: invokestatic  #86                 // Method org/junit/Assert.assertTrue:(Z)V
     145: aload         5
     147: aload         6
     149: invokevirtual #93                 // Method org/apache/hadoop/fs/FileSystem.exists:(Lorg/apache/hadoop/fs/Path;)Z
     152: invokestatic  #141                // Method org/junit/Assert.assertFalse:(Z)V
     155: getstatic     #142                // Field java/lang/System.out:Ljava/io/PrintStream;
     158: ldc           #143                // String testCompactionWithCorruptResult Passed
     160: invokevirtual #144                // Method java/io/PrintStream.println:(Ljava/lang/String;)V
     163: return
     164: ldc           #145                // String testCompactionWithCorruptResult failed since no exception wasthrown while completing a corrupt file
     166: invokestatic  #146                // Method org/junit/Assert.fail:(Ljava/lang/String;)V
     169: return
    Exception table:
       from    to  target type
         123   130   133   Class java/lang/Exception

  public void testTrackingCompactionRequest() throws java.lang.Exception;
    Code:
       0: ldc           #147                // class org/apache/hadoop/hbase/regionserver/HRegionServer
       2: invokestatic  #148                // Method org/mockito/Mockito.mock:(Ljava/lang/Class;)Ljava/lang/Object;
       5: checkcast     #147                // class org/apache/hadoop/hbase/regionserver/HRegionServer
       8: astore_1
       9: aload_1
      10: invokevirtual #149                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.getConfiguration:()Lorg/apache/hadoop/conf/Configuration;
      13: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      16: aload_0
      17: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      20: invokevirtual #151                // Method org/apache/hadoop/hbase/regionserver/HRegion.getBaseConf:()Lorg/apache/hadoop/conf/Configuration;
      23: invokeinterface #152,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      28: pop
      29: new           #153                // class org/apache/hadoop/hbase/regionserver/CompactSplit
      32: dup
      33: aload_1
      34: invokespecial #154                // Method org/apache/hadoop/hbase/regionserver/CompactSplit."<init>":(Lorg/apache/hadoop/hbase/regionserver/HRegionServer;)V
      37: astore_2
      38: aload_1
      39: invokevirtual #155                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.getCompactSplitThread:()Lorg/apache/hadoop/hbase/regionserver/CompactSplit;
      42: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      45: aload_2
      46: invokeinterface #152,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      51: pop
      52: aload_0
      53: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      56: getstatic     #67                 // Field COLUMN_FAMILY:[B
      59: invokevirtual #81                 // Method org/apache/hadoop/hbase/regionserver/HRegion.getStore:([B)Lorg/apache/hadoop/hbase/regionserver/HStore;
      62: astore_3
      63: aload_0
      64: aload_0
      65: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      68: invokespecial #124                // Method createStoreFile:(Lorg/apache/hadoop/hbase/regionserver/HRegion;)V
      71: iconst_0
      72: istore        4
      74: iload         4
      76: i2l
      77: ldc2_w        #157                // long 11l
      80: lcmp
      81: ifge          98
      84: aload_0
      85: aload_0
      86: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      89: invokespecial #124                // Method createStoreFile:(Lorg/apache/hadoop/hbase/regionserver/HRegion;)V
      92: iinc          4, 1
      95: goto          74
      98: new           #159                // class java/util/concurrent/CountDownLatch
     101: dup
     102: iconst_1
     103: invokespecial #160                // Method java/util/concurrent/CountDownLatch."<init>":(I)V
     106: astore        4
     108: new           #161                // class org/apache/hadoop/hbase/regionserver/TestCompaction$Tracker
     111: dup
     112: aload         4
     114: invokespecial #162                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$Tracker."<init>":(Ljava/util/concurrent/CountDownLatch;)V
     117: astore        5
     119: aload_2
     120: aload_0
     121: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     124: aload_3
     125: ldc           #163                // String test custom comapction
     127: iconst_1
     128: aload         5
     130: aconst_null
     131: invokevirtual #164                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.requestCompaction:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Lorg/apache/hadoop/hbase/regionserver/HStore;Ljava/lang/String;ILorg/apache/hadoop/hbase/regionserver/compactions/CompactionLifeCycleTracker;Lorg/apache/hadoop/hbase/security/User;)V
     134: aload         4
     136: invokevirtual #165                // Method java/util/concurrent/CountDownLatch.await:()V
     139: aload_2
     140: invokevirtual #166                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.interruptIfNecessary:()V
     143: return

  public void testCompactionFailure() throws java.lang.Exception;
    Code:
       0: ldc           #147                // class org/apache/hadoop/hbase/regionserver/HRegionServer
       2: invokestatic  #148                // Method org/mockito/Mockito.mock:(Ljava/lang/Class;)Ljava/lang/Object;
       5: checkcast     #147                // class org/apache/hadoop/hbase/regionserver/HRegionServer
       8: astore_1
       9: aload_1
      10: invokevirtual #149                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.getConfiguration:()Lorg/apache/hadoop/conf/Configuration;
      13: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      16: aload_0
      17: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      20: invokevirtual #151                // Method org/apache/hadoop/hbase/regionserver/HRegion.getBaseConf:()Lorg/apache/hadoop/conf/Configuration;
      23: invokeinterface #152,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      28: pop
      29: new           #153                // class org/apache/hadoop/hbase/regionserver/CompactSplit
      32: dup
      33: aload_1
      34: invokespecial #154                // Method org/apache/hadoop/hbase/regionserver/CompactSplit."<init>":(Lorg/apache/hadoop/hbase/regionserver/HRegionServer;)V
      37: astore_2
      38: aload_1
      39: invokevirtual #155                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.getCompactSplitThread:()Lorg/apache/hadoop/hbase/regionserver/CompactSplit;
      42: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      45: aload_2
      46: invokeinterface #152,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      51: pop
      52: aload_0
      53: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      56: getstatic     #67                 // Field COLUMN_FAMILY:[B
      59: invokevirtual #81                 // Method org/apache/hadoop/hbase/regionserver/HRegion.getStore:([B)Lorg/apache/hadoop/hbase/regionserver/HStore;
      62: astore_3
      63: aload_0
      64: aload_0
      65: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      68: invokespecial #124                // Method createStoreFile:(Lorg/apache/hadoop/hbase/regionserver/HRegion;)V
      71: iconst_0
      72: istore        4
      74: iload         4
      76: bipush        15
      78: if_icmpge     95
      81: aload_0
      82: aload_0
      83: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      86: invokespecial #124                // Method createStoreFile:(Lorg/apache/hadoop/hbase/regionserver/HRegion;)V
      89: iinc          4, 1
      92: goto          74
      95: aload_0
      96: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      99: invokestatic  #73                 // Method org/mockito/Mockito.spy:(Ljava/lang/Object;)Ljava/lang/Object;
     102: checkcast     #74                 // class org/apache/hadoop/hbase/regionserver/HRegion
     105: astore        4
     107: aload         4
     109: invokevirtual #167                // Method org/apache/hadoop/hbase/regionserver/HRegion.checkSplit:()[B
     112: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
     115: iconst_1
     116: anewarray     #168                // class java/lang/Throwable
     119: dup
     120: iconst_0
     121: new           #169                // class java/lang/IndexOutOfBoundsException
     124: dup
     125: invokespecial #170                // Method java/lang/IndexOutOfBoundsException."<init>":()V
     128: aastore
     129: invokeinterface #171,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenThrow:([Ljava/lang/Throwable;)Lorg/mockito/stubbing/OngoingStubbing;
     134: pop
     135: new           #172                // class org/apache/hadoop/hbase/regionserver/MetricsRegionWrapperImpl
     138: dup
     139: aload_0
     140: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     143: invokespecial #173                // Method org/apache/hadoop/hbase/regionserver/MetricsRegionWrapperImpl."<init>":(Lorg/apache/hadoop/hbase/regionserver/HRegion;)V
     146: astore        5
     148: aload         5
     150: invokeinterface #174,  1          // InterfaceMethod org/apache/hadoop/hbase/regionserver/MetricsRegionWrapper.getNumCompactionsCompleted:()J
     155: lstore        6
     157: aload         5
     159: invokeinterface #175,  1          // InterfaceMethod org/apache/hadoop/hbase/regionserver/MetricsRegionWrapper.getNumCompactionsFailed:()J
     164: lstore        8
     166: new           #159                // class java/util/concurrent/CountDownLatch
     169: dup
     170: iconst_1
     171: invokespecial #160                // Method java/util/concurrent/CountDownLatch."<init>":(I)V
     174: astore        10
     176: new           #161                // class org/apache/hadoop/hbase/regionserver/TestCompaction$Tracker
     179: dup
     180: aload         10
     182: invokespecial #162                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$Tracker."<init>":(Ljava/util/concurrent/CountDownLatch;)V
     185: astore        11
     187: aload_2
     188: aload         4
     190: aload_3
     191: ldc           #163                // String test custom comapction
     193: iconst_1
     194: aload         11
     196: aconst_null
     197: invokevirtual #164                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.requestCompaction:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Lorg/apache/hadoop/hbase/regionserver/HStore;Ljava/lang/String;ILorg/apache/hadoop/hbase/regionserver/compactions/CompactionLifeCycleTracker;Lorg/apache/hadoop/hbase/security/User;)V
     200: aload         10
     202: ldc2_w        #176                // long 120l
     205: getstatic     #178                // Field java/util/concurrent/TimeUnit.SECONDS:Ljava/util/concurrent/TimeUnit;
     208: invokevirtual #179                // Method java/util/concurrent/CountDownLatch.await:(JLjava/util/concurrent/TimeUnit;)Z
     211: pop
     212: aload         5
     214: invokeinterface #174,  1          // InterfaceMethod org/apache/hadoop/hbase/regionserver/MetricsRegionWrapper.getNumCompactionsCompleted:()J
     219: lstore        12
     221: aload         5
     223: invokeinterface #175,  1          // InterfaceMethod org/apache/hadoop/hbase/regionserver/MetricsRegionWrapper.getNumCompactionsFailed:()J
     228: lstore        14
     230: new           #180                // class java/lang/StringBuilder
     233: dup
     234: invokespecial #181                // Method java/lang/StringBuilder."<init>":()V
     237: ldc           #182                // String Completed count should have increased (pre=
     239: invokevirtual #183                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     242: lload         6
     244: invokevirtual #184                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     247: ldc           #185                // String , post=
     249: invokevirtual #183                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     252: lload         12
     254: invokevirtual #184                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     257: ldc           #186                // String )
     259: invokevirtual #183                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     262: invokevirtual #187                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     265: lload         12
     267: lload         6
     269: lcmp
     270: ifle          277
     273: iconst_1
     274: goto          278
     277: iconst_0
     278: invokestatic  #188                // Method org/junit/Assert.assertTrue:(Ljava/lang/String;Z)V
     281: new           #180                // class java/lang/StringBuilder
     284: dup
     285: invokespecial #181                // Method java/lang/StringBuilder."<init>":()V
     288: ldc           #189                // String Failed count should have increased (pre=
     290: invokevirtual #183                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     293: lload         8
     295: invokevirtual #184                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     298: ldc           #185                // String , post=
     300: invokevirtual #183                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     303: lload         14
     305: invokevirtual #184                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     308: ldc           #186                // String )
     310: invokevirtual #183                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     313: invokevirtual #187                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     316: lload         14
     318: lload         8
     320: lcmp
     321: ifle          328
     324: iconst_1
     325: goto          329
     328: iconst_0
     329: invokestatic  #188                // Method org/junit/Assert.assertTrue:(Ljava/lang/String;Z)V
     332: return

  public void testStopStartCompaction() throws java.io.IOException;
    Code:
       0: ldc           #147                // class org/apache/hadoop/hbase/regionserver/HRegionServer
       2: invokestatic  #148                // Method org/mockito/Mockito.mock:(Ljava/lang/Class;)Ljava/lang/Object;
       5: checkcast     #147                // class org/apache/hadoop/hbase/regionserver/HRegionServer
       8: astore_1
       9: aload_1
      10: invokevirtual #149                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.getConfiguration:()Lorg/apache/hadoop/conf/Configuration;
      13: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      16: aload_0
      17: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      20: invokevirtual #151                // Method org/apache/hadoop/hbase/regionserver/HRegion.getBaseConf:()Lorg/apache/hadoop/conf/Configuration;
      23: invokeinterface #152,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      28: pop
      29: new           #153                // class org/apache/hadoop/hbase/regionserver/CompactSplit
      32: dup
      33: aload_1
      34: invokespecial #154                // Method org/apache/hadoop/hbase/regionserver/CompactSplit."<init>":(Lorg/apache/hadoop/hbase/regionserver/HRegionServer;)V
      37: astore_2
      38: aload_1
      39: invokevirtual #155                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.getCompactSplitThread:()Lorg/apache/hadoop/hbase/regionserver/CompactSplit;
      42: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      45: aload_2
      46: invokeinterface #152,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      51: pop
      52: aload_0
      53: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      56: getstatic     #67                 // Field COLUMN_FAMILY:[B
      59: invokevirtual #81                 // Method org/apache/hadoop/hbase/regionserver/HRegion.getStore:([B)Lorg/apache/hadoop/hbase/regionserver/HStore;
      62: astore_3
      63: aload_0
      64: aload_0
      65: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      68: invokespecial #124                // Method createStoreFile:(Lorg/apache/hadoop/hbase/regionserver/HRegion;)V
      71: iconst_0
      72: istore        4
      74: iload         4
      76: bipush        15
      78: if_icmpge     95
      81: aload_0
      82: aload_0
      83: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      86: invokespecial #124                // Method createStoreFile:(Lorg/apache/hadoop/hbase/regionserver/HRegion;)V
      89: iinc          4, 1
      92: goto          74
      95: aload_2
      96: iconst_0
      97: invokevirtual #190                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.switchCompaction:(Z)V
     100: aload_2
     101: aload_0
     102: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     105: aload_3
     106: ldc           #191                // String test
     108: iconst_1
     109: getstatic     #192                // Field org/apache/hadoop/hbase/regionserver/compactions/CompactionLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/compactions/CompactionLifeCycleTracker;
     112: aconst_null
     113: invokevirtual #164                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.requestCompaction:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Lorg/apache/hadoop/hbase/regionserver/HStore;Ljava/lang/String;ILorg/apache/hadoop/hbase/regionserver/compactions/CompactionLifeCycleTracker;Lorg/apache/hadoop/hbase/security/User;)V
     116: iconst_0
     117: invokestatic  #193                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     120: aload_2
     121: invokevirtual #194                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.isCompactionsEnabled:()Z
     124: invokestatic  #193                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     127: invokestatic  #195                // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     130: lconst_0
     131: aload_2
     132: invokevirtual #196                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.getLongCompactions:()Ljava/util/concurrent/ThreadPoolExecutor;
     135: invokevirtual #197                // Method java/util/concurrent/ThreadPoolExecutor.getActiveCount:()I
     138: aload_2
     139: invokevirtual #198                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.getShortCompactions:()Ljava/util/concurrent/ThreadPoolExecutor;
     142: invokevirtual #197                // Method java/util/concurrent/ThreadPoolExecutor.getActiveCount:()I
     145: iadd
     146: i2l
     147: invokestatic  #54                 // Method org/junit/Assert.assertEquals:(JJ)V
     150: aload_2
     151: iconst_1
     152: invokevirtual #190                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.switchCompaction:(Z)V
     155: iconst_1
     156: invokestatic  #193                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     159: aload_2
     160: invokevirtual #194                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.isCompactionsEnabled:()Z
     163: invokestatic  #193                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     166: invokestatic  #195                // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     169: aload_2
     170: aload_0
     171: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     174: aload_3
     175: ldc           #191                // String test
     177: iconst_1
     178: getstatic     #192                // Field org/apache/hadoop/hbase/regionserver/compactions/CompactionLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/compactions/CompactionLifeCycleTracker;
     181: aconst_null
     182: invokevirtual #164                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.requestCompaction:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Lorg/apache/hadoop/hbase/regionserver/HStore;Ljava/lang/String;ILorg/apache/hadoop/hbase/regionserver/compactions/CompactionLifeCycleTracker;Lorg/apache/hadoop/hbase/security/User;)V
     185: lconst_1
     186: aload_2
     187: invokevirtual #196                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.getLongCompactions:()Ljava/util/concurrent/ThreadPoolExecutor;
     190: invokevirtual #197                // Method java/util/concurrent/ThreadPoolExecutor.getActiveCount:()I
     193: aload_2
     194: invokevirtual #198                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.getShortCompactions:()Ljava/util/concurrent/ThreadPoolExecutor;
     197: invokevirtual #197                // Method java/util/concurrent/ThreadPoolExecutor.getActiveCount:()I
     200: iadd
     201: i2l
     202: invokestatic  #54                 // Method org/junit/Assert.assertEquals:(JJ)V
     205: return

  public void testInterruptingRunningCompactions() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #9                  // Field conf:Lorg/apache/hadoop/conf/Configuration;
       4: ldc           #22                 // String hbase.regionserver.throughput.controller
       6: ldc           #199                // class org/apache/hadoop/hbase/regionserver/TestCompaction$WaitThroughPutController
       8: invokevirtual #24                 // Method java/lang/Class.getName:()Ljava/lang/String;
      11: invokevirtual #25                 // Method org/apache/hadoop/conf/Configuration.set:(Ljava/lang/String;Ljava/lang/String;)V
      14: ldc           #147                // class org/apache/hadoop/hbase/regionserver/HRegionServer
      16: invokestatic  #148                // Method org/mockito/Mockito.mock:(Ljava/lang/Class;)Ljava/lang/Object;
      19: checkcast     #147                // class org/apache/hadoop/hbase/regionserver/HRegionServer
      22: astore_1
      23: aload_1
      24: invokevirtual #149                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.getConfiguration:()Lorg/apache/hadoop/conf/Configuration;
      27: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      30: aload_0
      31: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      34: invokevirtual #151                // Method org/apache/hadoop/hbase/regionserver/HRegion.getBaseConf:()Lorg/apache/hadoop/conf/Configuration;
      37: invokeinterface #152,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      42: pop
      43: new           #153                // class org/apache/hadoop/hbase/regionserver/CompactSplit
      46: dup
      47: aload_1
      48: invokespecial #154                // Method org/apache/hadoop/hbase/regionserver/CompactSplit."<init>":(Lorg/apache/hadoop/hbase/regionserver/HRegionServer;)V
      51: astore_2
      52: aload_1
      53: invokevirtual #155                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.getCompactSplitThread:()Lorg/apache/hadoop/hbase/regionserver/CompactSplit;
      56: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      59: aload_2
      60: invokeinterface #152,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      65: pop
      66: aload_0
      67: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      70: getstatic     #67                 // Field COLUMN_FAMILY:[B
      73: invokevirtual #81                 // Method org/apache/hadoop/hbase/regionserver/HRegion.getStore:([B)Lorg/apache/hadoop/hbase/regionserver/HStore;
      76: astore_3
      77: ldc2_w        #56                 // double 15.0d
      80: aload_0
      81: getfield      #28                 // Field compactionThreshold:I
      84: i2d
      85: ddiv
      86: invokestatic  #58                 // Method java/lang/Math.ceil:(D)D
      89: d2i
      90: istore        4
      92: sipush        1000
      95: newarray       byte
      97: astore        5
      99: iconst_0
     100: istore        6
     102: iload         6
     104: aload_0
     105: getfield      #28                 // Field compactionThreshold:I
     108: if_icmpge     222
     111: new           #59                 // class org/apache/hadoop/hbase/regionserver/RegionAsTable
     114: dup
     115: aload_0
     116: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     119: invokespecial #60                 // Method org/apache/hadoop/hbase/regionserver/RegionAsTable."<init>":(Lorg/apache/hadoop/hbase/regionserver/Region;)V
     122: astore        7
     124: new           #61                 // class org/apache/hadoop/hbase/client/Put
     127: dup
     128: aload_0
     129: getfield      #13                 // Field STARTROW:[B
     132: iload         6
     134: invokestatic  #62                 // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(I)[B
     137: invokestatic  #63                 // Method org/apache/hadoop/hbase/util/Bytes.add:([B[B)[B
     140: invokespecial #64                 // Method org/apache/hadoop/hbase/client/Put."<init>":([B)V
     143: astore        8
     145: aload         8
     147: getstatic     #65                 // Field org/apache/hadoop/hbase/client/Durability.SKIP_WAL:Lorg/apache/hadoop/hbase/client/Durability;
     150: invokevirtual #66                 // Method org/apache/hadoop/hbase/client/Put.setDurability:(Lorg/apache/hadoop/hbase/client/Durability;)Lorg/apache/hadoop/hbase/client/Put;
     153: pop
     154: iconst_0
     155: istore        9
     157: iload         9
     159: iload         4
     161: if_icmpge     186
     164: aload         8
     166: getstatic     #67                 // Field COLUMN_FAMILY:[B
     169: iload         9
     171: invokestatic  #62                 // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(I)[B
     174: aload         5
     176: invokevirtual #68                 // Method org/apache/hadoop/hbase/client/Put.addColumn:([B[B[B)Lorg/apache/hadoop/hbase/client/Put;
     179: pop
     180: iinc          9, 1
     183: goto          157
     186: aload         7
     188: getstatic     #67                 // Field COLUMN_FAMILY:[B
     191: invokestatic  #69                 // Method org/apache/hadoop/hbase/util/Bytes.toString:([B)Ljava/lang/String;
     194: invokestatic  #70                 // Method org/apache/hadoop/hbase/HBaseTestCase.addContent:(Lorg/apache/hadoop/hbase/client/Table;Ljava/lang/String;)J
     197: pop2
     198: aload         7
     200: aload         8
     202: invokeinterface #71,  2           // InterfaceMethod org/apache/hadoop/hbase/client/Table.put:(Lorg/apache/hadoop/hbase/client/Put;)V
     207: aload_0
     208: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     211: iconst_1
     212: invokevirtual #72                 // Method org/apache/hadoop/hbase/regionserver/HRegion.flush:(Z)Lorg/apache/hadoop/hbase/regionserver/HRegion$FlushResult;
     215: pop
     216: iinc          6, 1
     219: goto          102
     222: aload_0
     223: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     226: getstatic     #67                 // Field COLUMN_FAMILY:[B
     229: invokevirtual #81                 // Method org/apache/hadoop/hbase/regionserver/HRegion.getStore:([B)Lorg/apache/hadoop/hbase/regionserver/HStore;
     232: astore        6
     234: aload         6
     236: invokevirtual #82                 // Method org/apache/hadoop/hbase/regionserver/HStore.getStorefilesCount:()I
     239: istore        7
     241: aload_2
     242: aload_0
     243: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     246: aload_3
     247: ldc           #163                // String test custom comapction
     249: iconst_1
     250: getstatic     #192                // Field org/apache/hadoop/hbase/regionserver/compactions/CompactionLifeCycleTracker.DUMMY:Lorg/apache/hadoop/hbase/regionserver/compactions/CompactionLifeCycleTracker;
     253: aconst_null
     254: invokevirtual #164                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.requestCompaction:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Lorg/apache/hadoop/hbase/regionserver/HStore;Ljava/lang/String;ILorg/apache/hadoop/hbase/regionserver/compactions/CompactionLifeCycleTracker;Lorg/apache/hadoop/hbase/security/User;)V
     257: ldc2_w        #200                // long 3000l
     260: invokestatic  #113                // Method java/lang/Thread.sleep:(J)V
     263: aload_2
     264: iconst_0
     265: invokevirtual #190                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.switchCompaction:(Z)V
     268: iload         7
     270: i2l
     271: aload         6
     273: invokevirtual #82                 // Method org/apache/hadoop/hbase/regionserver/HStore.getStorefilesCount:()I
     276: i2l
     277: invokestatic  #54                 // Method org/junit/Assert.assertEquals:(JJ)V
     280: aload_2
     281: iconst_1
     282: invokevirtual #190                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.switchCompaction:(Z)V
     285: return

  public void testMultipleCustomCompactionRequests() throws java.lang.Exception;
    Code:
       0: ldc           #147                // class org/apache/hadoop/hbase/regionserver/HRegionServer
       2: invokestatic  #148                // Method org/mockito/Mockito.mock:(Ljava/lang/Class;)Ljava/lang/Object;
       5: checkcast     #147                // class org/apache/hadoop/hbase/regionserver/HRegionServer
       8: astore_1
       9: aload_1
      10: invokevirtual #149                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.getConfiguration:()Lorg/apache/hadoop/conf/Configuration;
      13: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      16: aload_0
      17: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      20: invokevirtual #151                // Method org/apache/hadoop/hbase/regionserver/HRegion.getBaseConf:()Lorg/apache/hadoop/conf/Configuration;
      23: invokeinterface #152,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      28: pop
      29: new           #153                // class org/apache/hadoop/hbase/regionserver/CompactSplit
      32: dup
      33: aload_1
      34: invokespecial #154                // Method org/apache/hadoop/hbase/regionserver/CompactSplit."<init>":(Lorg/apache/hadoop/hbase/regionserver/HRegionServer;)V
      37: astore_2
      38: aload_1
      39: invokevirtual #155                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.getCompactSplitThread:()Lorg/apache/hadoop/hbase/regionserver/CompactSplit;
      42: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      45: aload_2
      46: invokeinterface #152,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      51: pop
      52: aload_0
      53: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      56: invokevirtual #202                // Method org/apache/hadoop/hbase/regionserver/HRegion.getStores:()Ljava/util/List;
      59: invokeinterface #203,  1          // InterfaceMethod java/util/List.size:()I
      64: istore_3
      65: new           #159                // class java/util/concurrent/CountDownLatch
      68: dup
      69: iload_3
      70: invokespecial #160                // Method java/util/concurrent/CountDownLatch."<init>":(I)V
      73: astore        4
      75: new           #161                // class org/apache/hadoop/hbase/regionserver/TestCompaction$Tracker
      78: dup
      79: aload         4
      81: invokespecial #162                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$Tracker."<init>":(Ljava/util/concurrent/CountDownLatch;)V
      84: astore        5
      86: aload_0
      87: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      90: invokevirtual #202                // Method org/apache/hadoop/hbase/regionserver/HRegion.getStores:()Ljava/util/List;
      93: invokeinterface #204,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      98: astore        6
     100: aload         6
     102: invokeinterface #103,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     107: ifeq          180
     110: aload         6
     112: invokeinterface #104,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     117: checkcast     #105                // class org/apache/hadoop/hbase/regionserver/HStore
     120: astore        7
     122: aload_0
     123: aload_0
     124: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     127: aload         7
     129: invokevirtual #205                // Method org/apache/hadoop/hbase/regionserver/HStore.getColumnFamilyName:()Ljava/lang/String;
     132: invokespecial #123                // Method createStoreFile:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Ljava/lang/String;)V
     135: aload_0
     136: aload_0
     137: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     140: aload         7
     142: invokevirtual #205                // Method org/apache/hadoop/hbase/regionserver/HStore.getColumnFamilyName:()Ljava/lang/String;
     145: invokespecial #123                // Method createStoreFile:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Ljava/lang/String;)V
     148: aload_0
     149: aload_0
     150: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     153: aload         7
     155: invokevirtual #205                // Method org/apache/hadoop/hbase/regionserver/HStore.getColumnFamilyName:()Ljava/lang/String;
     158: invokespecial #123                // Method createStoreFile:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Ljava/lang/String;)V
     161: aload_2
     162: aload_0
     163: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     166: aload         7
     168: ldc           #206                // String test mulitple custom comapctions
     170: iconst_1
     171: aload         5
     173: aconst_null
     174: invokevirtual #164                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.requestCompaction:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Lorg/apache/hadoop/hbase/regionserver/HStore;Ljava/lang/String;ILorg/apache/hadoop/hbase/regionserver/compactions/CompactionLifeCycleTracker;Lorg/apache/hadoop/hbase/security/User;)V
     177: goto          100
     180: aload         4
     182: invokevirtual #165                // Method java/util/concurrent/CountDownLatch.await:()V
     185: aload_2
     186: invokevirtual #166                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.interruptIfNecessary:()V
     189: return

  public void testCompactionQueuePriorities() throws java.lang.Exception;
    Code:
       0: invokestatic  #207                // Method org/apache/hadoop/hbase/HBaseConfiguration.create:()Lorg/apache/hadoop/conf/Configuration;
       3: astore_1
       4: ldc           #147                // class org/apache/hadoop/hbase/regionserver/HRegionServer
       6: invokestatic  #148                // Method org/mockito/Mockito.mock:(Ljava/lang/Class;)Ljava/lang/Object;
       9: checkcast     #147                // class org/apache/hadoop/hbase/regionserver/HRegionServer
      12: astore_2
      13: aload_2
      14: invokevirtual #208                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.isStopped:()Z
      17: invokestatic  #193                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      20: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      23: iconst_0
      24: invokestatic  #193                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      27: invokeinterface #152,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      32: pop
      33: aload_2
      34: invokevirtual #149                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.getConfiguration:()Lorg/apache/hadoop/conf/Configuration;
      37: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      40: aload_1
      41: invokeinterface #152,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      46: pop
      47: aload_2
      48: invokevirtual #209                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.getChoreService:()Lorg/apache/hadoop/hbase/ChoreService;
      51: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      54: new           #210                // class org/apache/hadoop/hbase/ChoreService
      57: dup
      58: ldc           #191                // String test
      60: invokespecial #211                // Method org/apache/hadoop/hbase/ChoreService."<init>":(Ljava/lang/String;)V
      63: invokeinterface #152,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      68: pop
      69: new           #153                // class org/apache/hadoop/hbase/regionserver/CompactSplit
      72: dup
      73: aload_2
      74: invokespecial #154                // Method org/apache/hadoop/hbase/regionserver/CompactSplit."<init>":(Lorg/apache/hadoop/hbase/regionserver/HRegionServer;)V
      77: astore_3
      78: aload_2
      79: invokevirtual #155                // Method org/apache/hadoop/hbase/regionserver/HRegionServer.getCompactSplitThread:()Lorg/apache/hadoop/hbase/regionserver/CompactSplit;
      82: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      85: aload_3
      86: invokeinterface #152,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.thenReturn:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
      91: pop
      92: aload_3
      93: invokevirtual #212                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.shutdownLongCompactions:()V
      96: ldc           #74                 // class org/apache/hadoop/hbase/regionserver/HRegion
      98: invokestatic  #148                // Method org/mockito/Mockito.mock:(Ljava/lang/Class;)Ljava/lang/Object;
     101: checkcast     #74                 // class org/apache/hadoop/hbase/regionserver/HRegion
     104: astore        4
     106: aload         4
     108: invokestatic  #213                // Method org/mockito/Matchers.any:()Ljava/lang/Object;
     111: checkcast     #214                // class org/apache/hadoop/hbase/regionserver/compactions/CompactionContext
     114: invokestatic  #213                // Method org/mockito/Matchers.any:()Ljava/lang/Object;
     117: checkcast     #105                // class org/apache/hadoop/hbase/regionserver/HStore
     120: invokestatic  #213                // Method org/mockito/Matchers.any:()Ljava/lang/Object;
     123: checkcast     #215                // class org/apache/hadoop/hbase/regionserver/throttle/ThroughputController
     126: invokestatic  #213                // Method org/mockito/Matchers.any:()Ljava/lang/Object;
     129: checkcast     #216                // class org/apache/hadoop/hbase/security/User
     132: invokevirtual #217                // Method org/apache/hadoop/hbase/regionserver/HRegion.compact:(Lorg/apache/hadoop/hbase/regionserver/compactions/CompactionContext;Lorg/apache/hadoop/hbase/regionserver/HStore;Lorg/apache/hadoop/hbase/regionserver/throttle/ThroughputController;Lorg/apache/hadoop/hbase/security/User;)Z
     135: invokestatic  #193                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     138: invokestatic  #150                // Method org/mockito/Mockito.when:(Ljava/lang/Object;)Lorg/mockito/stubbing/OngoingStubbing;
     141: new           #218                // class org/apache/hadoop/hbase/regionserver/TestCompaction$2
     144: dup
     145: aload_0
     146: invokespecial #219                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$2."<init>":(Lorg/apache/hadoop/hbase/regionserver/TestCompaction;)V
     149: invokeinterface #220,  2          // InterfaceMethod org/mockito/stubbing/OngoingStubbing.then:(Lorg/mockito/stubbing/Answer;)Lorg/mockito/stubbing/OngoingStubbing;
     154: pop
     155: new           #221                // class java/util/ArrayList
     158: dup
     159: invokespecial #222                // Method java/util/ArrayList."<init>":()V
     162: astore        5
     164: new           #223                // class org/apache/hadoop/hbase/regionserver/TestCompaction$StoreMockMaker
     167: dup
     168: aload_0
     169: aload         5
     171: invokespecial #224                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$StoreMockMaker."<init>":(Lorg/apache/hadoop/hbase/regionserver/TestCompaction;Ljava/util/ArrayList;)V
     174: astore        6
     176: new           #223                // class org/apache/hadoop/hbase/regionserver/TestCompaction$StoreMockMaker
     179: dup
     180: aload_0
     181: aload         5
     183: invokespecial #224                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$StoreMockMaker."<init>":(Lorg/apache/hadoop/hbase/regionserver/TestCompaction;Ljava/util/ArrayList;)V
     186: astore        7
     188: aload         6
     190: ldc           #225                // String store1
     192: invokevirtual #226                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$StoreMockMaker.createStoreMock:(Ljava/lang/String;)Lorg/apache/hadoop/hbase/regionserver/HStore;
     195: astore        8
     197: aload         7
     199: ldc           #227                // String store2
     201: invokevirtual #226                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$StoreMockMaker.createStoreMock:(Ljava/lang/String;)Lorg/apache/hadoop/hbase/regionserver/HStore;
     204: astore        9
     206: new           #228                // class org/apache/hadoop/hbase/regionserver/TestCompaction$BlockingStoreMockMaker
     209: dup
     210: aload_0
     211: invokespecial #229                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$BlockingStoreMockMaker."<init>":(Lorg/apache/hadoop/hbase/regionserver/TestCompaction;)V
     214: astore        10
     216: aload_3
     217: aload         4
     219: aload         10
     221: iconst_1
     222: ldc           #230                // String b-pri1
     224: invokevirtual #231                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$BlockingStoreMockMaker.createStoreMock:(ILjava/lang/String;)Lorg/apache/hadoop/hbase/regionserver/HStore;
     227: ldc           #230                // String b-pri1
     229: invokevirtual #232                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.requestSystemCompaction:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Lorg/apache/hadoop/hbase/regionserver/HStore;Ljava/lang/String;)V
     232: aload         10
     234: invokevirtual #233                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$BlockingStoreMockMaker.waitForBlocking:()Lorg/apache/hadoop/hbase/regionserver/TestCompaction$BlockingStoreMockMaker$BlockingCompactionContext;
     237: astore        11
     239: iconst_0
     240: istore        12
     242: iload         12
     244: iconst_4
     245: if_icmpge     266
     248: aload         6
     250: getfield      #234                // Field org/apache/hadoop/hbase/regionserver/TestCompaction$StoreMockMaker.notCompacting:Ljava/util/ArrayList;
     253: invokestatic  #235                // Method createFile:()Lorg/apache/hadoop/hbase/regionserver/HStoreFile;
     256: invokevirtual #236                // Method java/util/ArrayList.add:(Ljava/lang/Object;)Z
     259: pop
     260: iinc          12, 1
     263: goto          242
     266: aload_3
     267: aload         4
     269: aload         8
     271: ldc           #237                // String s1-pri3
     273: invokevirtual #232                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.requestSystemCompaction:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Lorg/apache/hadoop/hbase/regionserver/HStore;Ljava/lang/String;)V
     276: iconst_0
     277: istore        12
     279: iload         12
     281: iconst_3
     282: if_icmpge     303
     285: aload         7
     287: getfield      #234                // Field org/apache/hadoop/hbase/regionserver/TestCompaction$StoreMockMaker.notCompacting:Ljava/util/ArrayList;
     290: invokestatic  #235                // Method createFile:()Lorg/apache/hadoop/hbase/regionserver/HStoreFile;
     293: invokevirtual #236                // Method java/util/ArrayList.add:(Ljava/lang/Object;)Z
     296: pop
     297: iinc          12, 1
     300: goto          279
     303: aload_3
     304: aload         4
     306: aload         9
     308: ldc           #238                // String s2-pri4
     310: invokevirtual #232                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.requestSystemCompaction:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Lorg/apache/hadoop/hbase/regionserver/HStore;Ljava/lang/String;)V
     313: iconst_0
     314: istore        12
     316: iload         12
     318: iconst_2
     319: if_icmpge     340
     322: aload         6
     324: getfield      #234                // Field org/apache/hadoop/hbase/regionserver/TestCompaction$StoreMockMaker.notCompacting:Ljava/util/ArrayList;
     327: invokestatic  #235                // Method createFile:()Lorg/apache/hadoop/hbase/regionserver/HStoreFile;
     330: invokevirtual #236                // Method java/util/ArrayList.add:(Ljava/lang/Object;)Z
     333: pop
     334: iinc          12, 1
     337: goto          316
     340: aload_3
     341: aload         4
     343: aload         8
     345: ldc           #239                // String s1-pri1
     347: invokevirtual #232                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.requestSystemCompaction:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Lorg/apache/hadoop/hbase/regionserver/HStore;Ljava/lang/String;)V
     350: aload_3
     351: aload         4
     353: aload         10
     355: iconst_2
     356: ldc           #240                // String b-pri2
     358: invokevirtual #231                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$BlockingStoreMockMaker.createStoreMock:(ILjava/lang/String;)Lorg/apache/hadoop/hbase/regionserver/HStore;
     361: ldc           #240                // String b-pri2
     363: invokevirtual #232                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.requestSystemCompaction:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Lorg/apache/hadoop/hbase/regionserver/HStore;Ljava/lang/String;)V
     366: aload         11
     368: invokevirtual #241                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$BlockingStoreMockMaker$BlockingCompactionContext.unblock:()V
     371: aload         10
     373: invokevirtual #233                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$BlockingStoreMockMaker.waitForBlocking:()Lorg/apache/hadoop/hbase/regionserver/TestCompaction$BlockingStoreMockMaker$BlockingCompactionContext;
     376: astore        11
     378: lconst_1
     379: aload         5
     381: invokevirtual #242                // Method java/util/ArrayList.size:()I
     384: i2l
     385: invokestatic  #54                 // Method org/junit/Assert.assertEquals:(JJ)V
     388: ldc2_w        #243                // long 6l
     391: aload         5
     393: iconst_0
     394: invokevirtual #245                // Method java/util/ArrayList.get:(I)Ljava/lang/Object;
     397: checkcast     #246                // class java/lang/Integer
     400: invokevirtual #247                // Method java/lang/Integer.intValue:()I
     403: i2l
     404: invokestatic  #54                 // Method org/junit/Assert.assertEquals:(JJ)V
     407: iconst_0
     408: istore        12
     410: iload         12
     412: iconst_2
     413: if_icmpge     434
     416: aload         6
     418: getfield      #234                // Field org/apache/hadoop/hbase/regionserver/TestCompaction$StoreMockMaker.notCompacting:Ljava/util/ArrayList;
     421: invokestatic  #235                // Method createFile:()Lorg/apache/hadoop/hbase/regionserver/HStoreFile;
     424: invokevirtual #236                // Method java/util/ArrayList.add:(Ljava/lang/Object;)Z
     427: pop
     428: iinc          12, 1
     431: goto          410
     434: aload_3
     435: aload         4
     437: aload         10
     439: bipush        7
     441: ldc           #248                // String b-pri7
     443: invokevirtual #231                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$BlockingStoreMockMaker.createStoreMock:(ILjava/lang/String;)Lorg/apache/hadoop/hbase/regionserver/HStore;
     446: ldc           #248                // String b-pri7
     448: invokevirtual #232                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.requestSystemCompaction:(Lorg/apache/hadoop/hbase/regionserver/HRegion;Lorg/apache/hadoop/hbase/regionserver/HStore;Ljava/lang/String;)V
     451: aload         11
     453: invokevirtual #241                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$BlockingStoreMockMaker$BlockingCompactionContext.unblock:()V
     456: aload         10
     458: invokevirtual #233                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$BlockingStoreMockMaker.waitForBlocking:()Lorg/apache/hadoop/hbase/regionserver/TestCompaction$BlockingStoreMockMaker$BlockingCompactionContext;
     461: astore        11
     463: ldc2_w        #249                // long 3l
     466: aload         5
     468: invokevirtual #242                // Method java/util/ArrayList.size:()I
     471: i2l
     472: invokestatic  #54                 // Method org/junit/Assert.assertEquals:(JJ)V
     475: ldc2_w        #249                // long 3l
     478: aload         5
     480: iconst_1
     481: invokevirtual #245                // Method java/util/ArrayList.get:(I)Ljava/lang/Object;
     484: checkcast     #246                // class java/lang/Integer
     487: invokevirtual #247                // Method java/lang/Integer.intValue:()I
     490: i2l
     491: invokestatic  #54                 // Method org/junit/Assert.assertEquals:(JJ)V
     494: ldc2_w        #251                // long 2l
     497: aload         5
     499: iconst_2
     500: invokevirtual #245                // Method java/util/ArrayList.get:(I)Ljava/lang/Object;
     503: checkcast     #246                // class java/lang/Integer
     506: invokevirtual #247                // Method java/lang/Integer.intValue:()I
     509: i2l
     510: invokestatic  #54                 // Method org/junit/Assert.assertEquals:(JJ)V
     513: aload         11
     515: invokevirtual #241                // Method org/apache/hadoop/hbase/regionserver/TestCompaction$BlockingStoreMockMaker$BlockingCompactionContext.unblock:()V
     518: aload_3
     519: invokevirtual #166                // Method org/apache/hadoop/hbase/regionserver/CompactSplit.interruptIfNecessary:()V
     522: return

  public void testCompactionSeqId() throws java.lang.Exception;
    Code:
       0: ldc           #253                // String row
       2: invokestatic  #12                 // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(Ljava/lang/String;)[B
       5: astore_1
       6: ldc           #254                // String qualifier
       8: invokestatic  #12                 // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(Ljava/lang/String;)[B
      11: astore_2
      12: ldc2_w        #255                // long 10000l
      15: lstore_3
      16: iconst_0
      17: istore        5
      19: iload         5
      21: bipush        10
      23: if_icmpge     91
      26: new           #61                 // class org/apache/hadoop/hbase/client/Put
      29: dup
      30: aload_1
      31: invokespecial #64                 // Method org/apache/hadoop/hbase/client/Put."<init>":([B)V
      34: astore        6
      36: aload         6
      38: aload_0
      39: getfield      #15                 // Field FAMILY:[B
      42: aload_2
      43: lload_3
      44: iload         5
      46: i2l
      47: ladd
      48: new           #180                // class java/lang/StringBuilder
      51: dup
      52: invokespecial #181                // Method java/lang/StringBuilder."<init>":()V
      55: ldc_w         #257                // String v
      58: invokevirtual #183                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      61: iload         5
      63: invokevirtual #258                // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      66: invokevirtual #187                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      69: invokestatic  #12                 // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(Ljava/lang/String;)[B
      72: invokevirtual #259                // Method org/apache/hadoop/hbase/client/Put.addColumn:([B[BJ[B)Lorg/apache/hadoop/hbase/client/Put;
      75: pop
      76: aload_0
      77: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      80: aload         6
      82: invokevirtual #260                // Method org/apache/hadoop/hbase/regionserver/HRegion.put:(Lorg/apache/hadoop/hbase/client/Put;)V
      85: iinc          5, 1
      88: goto          19
      91: aload_0
      92: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
      95: iconst_1
      96: invokevirtual #72                 // Method org/apache/hadoop/hbase/regionserver/HRegion.flush:(Z)Lorg/apache/hadoop/hbase/regionserver/HRegion$FlushResult;
      99: pop
     100: bipush        18
     102: istore        5
     104: iload         5
     106: bipush        8
     108: if_icmple     176
     111: new           #61                 // class org/apache/hadoop/hbase/client/Put
     114: dup
     115: aload_1
     116: invokespecial #64                 // Method org/apache/hadoop/hbase/client/Put."<init>":([B)V
     119: astore        6
     121: aload         6
     123: aload_0
     124: getfield      #15                 // Field FAMILY:[B
     127: aload_2
     128: lload_3
     129: iload         5
     131: i2l
     132: ladd
     133: new           #180                // class java/lang/StringBuilder
     136: dup
     137: invokespecial #181                // Method java/lang/StringBuilder."<init>":()V
     140: ldc_w         #257                // String v
     143: invokevirtual #183                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     146: iload         5
     148: invokevirtual #258                // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     151: invokevirtual #187                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     154: invokestatic  #12                 // Method org/apache/hadoop/hbase/util/Bytes.toBytes:(Ljava/lang/String;)[B
     157: invokevirtual #259                // Method org/apache/hadoop/hbase/client/Put.addColumn:([B[BJ[B)Lorg/apache/hadoop/hbase/client/Put;
     160: pop
     161: aload_0
     162: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     165: aload         6
     167: invokevirtual #260                // Method org/apache/hadoop/hbase/regionserver/HRegion.put:(Lorg/apache/hadoop/hbase/client/Put;)V
     170: iinc          5, -1
     173: goto          104
     176: aload_0
     177: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     180: iconst_1
     181: invokevirtual #72                 // Method org/apache/hadoop/hbase/regionserver/HRegion.flush:(Z)Lorg/apache/hadoop/hbase/regionserver/HRegion$FlushResult;
     184: pop
     185: aload_0
     186: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
     189: iconst_1
     190: invokevirtual #114                // Method org/apache/hadoop/hbase/regionserver/HRegion.compact:(Z)V
     193: return

  static org.apache.hadoop.hbase.regionserver.HRegion access$000(org.apache.hadoop.hbase.regionserver.TestCompaction);
    Code:
       0: aload_0
       1: getfield      #2                  // Field r:Lorg/apache/hadoop/hbase/regionserver/HRegion;
       4: areturn

  static {};
    Code:
       0: ldc           #156                // class org/apache/hadoop/hbase/regionserver/TestCompaction
       2: invokestatic  #269                // Method org/apache/hadoop/hbase/HBaseClassTestRule.forClass:(Ljava/lang/Class;)Lorg/apache/hadoop/hbase/HBaseClassTestRule;
       5: putstatic     #270                // Field CLASS_RULE:Lorg/apache/hadoop/hbase/HBaseClassTestRule;
       8: invokestatic  #271                // Method org/apache/hadoop/hbase/HBaseTestingUtility.createLocalHTU:()Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      11: putstatic     #7                  // Field UTIL:Lorg/apache/hadoop/hbase/HBaseTestingUtility;
      14: getstatic     #272                // Field org/apache/hadoop/hbase/HBaseTestingUtility.fam1:[B
      17: putstatic     #67                 // Field COLUMN_FAMILY:[B
      20: getstatic     #67                 // Field COLUMN_FAMILY:[B
      23: putstatic     #115                // Field COLUMN_FAMILY_TEXT:[B
      26: return
}
